var kpMerchantScript=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function o(e){e.forEach(t)}function i(e){return"function"==typeof e}function a(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let r,s;function c(t,...n){if(null==t)return e;const o=t.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}function _(e){let t;return c(e,(e=>t=e))(),t}function u(e,t,n){e.$$.on_destroy.push(c(t,n))}function l(e,t){e.appendChild(t)}function d(e,t,n){e.insertBefore(t,n||null)}function p(e){e.parentNode&&e.parentNode.removeChild(e)}function m(e){return document.createElement(e)}function f(e){return document.createTextNode(e)}function h(){return f(" ")}function E(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function w(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function g(e){s=e}function y(){if(!s)throw Error("Function called outside component initialization");return s}function I(e){y().$$.on_mount.push(e)}const S=[],O=[];let k=[];const N=[],P=Promise.resolve();let T=!1;function v(e){k.push(e)}const b=new Set;let R=0;function A(){if(0!==R)return;const e=s;do{try{for(;R<S.length;){const e=S[R];R++,g(e),C(e.$$)}}catch(e){throw S.length=0,R=0,e}for(g(null),S.length=0,R=0;O.length;)O.pop()();for(let e=0;e<k.length;e+=1){const t=k[e];b.has(t)||(b.add(t),t())}k.length=0}while(S.length);for(;N.length;)N.pop()();T=!1,b.clear(),g(e)}function C(e){if(null!==e.fragment){e.update(),o(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(v)}}const L=new Set;let U;function D(e,t){e&&e.i&&(L.delete(e),e.i(t))}function M(e,t,n,o){if(e&&e.o){if(L.has(e))return;L.add(e),U.c.push((()=>{L.delete(e),o&&(n&&e.d(1),o())})),e.o(t)}else o&&o()}function K(e){e&&e.c()}function F(e,n,a,r){const{fragment:s,after_update:c}=e.$$;s&&s.m(n,a),r||v((()=>{const n=e.$$.on_mount.map(t).filter(i);e.$$.on_destroy?e.$$.on_destroy.push(...n):o(n),e.$$.on_mount=[]})),c.forEach(v)}function H(e,t){const n=e.$$;null!==n.fragment&&(function(e){const t=[],n=[];k.forEach((o=>-1===e.indexOf(o)?t.push(o):n.push(o))),n.forEach((e=>e())),k=t}(n.after_update),o(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function G(t,i,a,r,c,_,u,l=[-1]){const d=s;g(t);const m=t.$$={fragment:null,ctx:[],props:_,update:e,not_equal:c,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(i.context||(d?d.$$.context:[])),callbacks:n(),dirty:l,skip_bound:!1,root:i.target||d.$$.root};u&&u(m.root);let f=!1;if(m.ctx=a?a(t,i.props||{},((e,n,...o)=>{const i=o.length?o[0]:n;return m.ctx&&c(m.ctx[e],m.ctx[e]=i)&&(!m.skip_bound&&m.bound[e]&&m.bound[e](i),f&&function(e,t){-1===e.$$.dirty[0]&&(S.push(e),T||(T=!0,P.then(A)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(t,e)),n})):[],m.update(),f=!0,o(m.before_update),m.fragment=!!r&&r(m.ctx),i.target){if(i.hydrate){const e=function(e){return Array.from(e.childNodes)}(i.target);m.fragment&&m.fragment.l(e),e.forEach(p)}else m.fragment&&m.fragment.c();i.intro&&D(t.$$.fragment),F(t,i.target,i.anchor,i.customElement),A()}g(d)}class B{$destroy(){H(this,1),this.$destroy=e}$on(t,n){if(!i(n))return e;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const e=o.indexOf(n);-1!==e&&o.splice(e,1)}}$set(e){this.$$set&&0!==Object.keys(e).length&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const x={validPhoneNumber:"Kindly enter a valid mobile number.",incorrectOtp:"OTP is invalid. Please try again.",enterInvalidOtp:"OTP entered is invalid. Please try again.",serverError:"Error verifying user. Try again.",otpError:"OTP verification failed.",multipleOtpError:"Multiple wrong OTPs entered. Please try again in a few minutes.",badRequest:"Bad Request.",Unauthorized:"Unauthorized user.",truecallFetchError:"Error verifying user. Try again.",whatsappNotInstalled:"WhatsApp missing. Please try again.",truecallerNotInstalled:"TrueCaller missing. Please try again.",invalidPhoneNumber:"Invalid phone number",invalidEmail:"Email is in invalid format",invalidDOB:"Date is invalid",invalidDOBByAge:"User cannot be younger than 10 yrs of age.",invalidDOBByTime:"Date cannot be in future",invalidName:"Invalid Name. Min 2 characters required",invalidNameByDigits:"Name cannot contain digits only",invalidProfession:"Invalid Profession. Min 2 characters required",requiredField:"Please fill the mandatory fields",emptyEmail:"Please enter email"},V=["/account/invalid_token","/account/reset","/account/activate"],j="kp_error_icon",W="/account",$="/account/login",q="/pages/kp-account",Y="kpShopifyCustomerDataErrorCode",J={NEW:"new",EXISTING:"existing"},z={SHOPIFY:"Shopify",CUSTOM:"custom",CUSTOM_SHOPIFY:"custom_shopify"},Q={PLUGIN:"plugin",CUSTOM:"custom",CUSTOM_SHOPIFY:"custom_shopify",CUSTOM_HEADLESS:"custom_headless"},X="CUSTOM_LOGIN_MODAL_ASSETS",Z="LOGIN_MODAL_ASSETS",ee={KP_CUSTOMER_EMAIL_DATA_ERROR:"KP_CUSTOMER_EMAIL_DATA_ERROR",KP_CUSTOMER_EMAIL_DATA_MANUAL_LOGIN:"KP_CUSTOMER_EMAIL_DATA_MANUAL_LOGIN",KP_CUSTOMER_EMAIL_DATA:"KP_CUSTOMER_EMAIL_DATA",TRIGGERED_LOGIN_POPUPS_PAGE_URL:"TRIGGERED_LOGIN_POPUPS_PAGE_URL",USER_VISITED_PAGES:"USER_VISITED_PAGES",TRIGGERED_MAKETING_POPUPS:"TRIGGERED_MAKETING_POPUPS",isLogout:"isLogout",IS_INTERNATIONAL_USER:"isInternationalUser",KP_USER_INPUT_NUMBER:"KP_USER_INPUT_NUMBER",KP_USER_INPUT_COUNTRY_CODE:"KP_USER_INPUT_COUNTRY_CODE",SHOPIFY_API_TAGS:"shopify_api_tags",SHOPIFY_API_TAGS_LOGIN_MODAL:"shopify_api_tags_login_modal",SHOPIFY_API_TAGS_MP:"shopify_api_tags_mp",URL_VISITED_BY_USER:"url_visited_by_user",META_EVENTS_ALREADY_FIRED:"meta_events_already_fired",IS_POPUP_OPENED:"is_popup_opened",MARKETING_ATTRIBUTION:"marketing_attribution",KP_MARKETING_POPUP_INFO:"KP_MARKETING_POPUP_INFO",IS_PAGE_PING_ENABLED:"trk_enbld",KP_INVALID_EMAIL:"kp_invalid_email",KP_META_CAPTURE_TRIGGER:"kp_meta_capture_trigger",KP_META_RETRIEVE_TRIGGER:"kp_meta_retrieve_trigger",KF_ASSET_PROPERTIES:"KF_ASSET_PROPERTIES"},te={IS_SSO_LOGIN:"IS_SSO_LOGIN",ACCOUNT_PAGE_LOGIN:"isAccountPageLogin",SHOPIFY_SESSION_KEY:"_shopify_y",SHOPIFY_REDIRECT_LINK:"SHOPIFY_REDIRECT_LINK",KC_PHONE:"KC_PHONE",IS_EMAIL_REQUIRED:"IS_EMAIL_REQUIRED",unverified_phone_number:"unverified_phone_number",KP_NON_OTP_VERIFIED_USER:"kp_non_otp_verified_user",KP_VISITOR_ID:"kp-v-id",KP_CONFIDENCE_SCORE:"kp-c-score",NOTIFY_PHONE_NUMBER:"notify_phone_number",KP_VISITOR_INFO:"unkwn",RP_PHONE_NUMBER:"rp-phone-number",SHOPIFY_COD_UNAUTH_PHONE_NUMBER:"app_unauth_user",AUTOLOAD_POPUP_ID:"autoload-popup-id",AUTOLOAD_POPUP_TYPE:"autoload-popup-type",SR_PHONE_NUMBER:"non_authed_info",VISITOR_ID_SOURCE:"vId_source",VISITED_NETWORK:"usr_trck",KP_TOKEN:"kpToken",SHOPIFY_API_TAGS:"shopify_api_tags",SHOPIFY_API_TAGS_LOGIN_MODAL:"shopify_api_tags_login_modal",NO_OTP_FLOW_PHONE_NUMBER:"no_otp_flow_phone_number",EXPIRED_PH_NO:"expired_ph_no",IDB_PH_NO:"idb_ph_no",KP_REQUEST_ID:"kp-request-id",KP_EMAIL:"kp_email",KP_MULTIPLE_EMAIL:"kp_multiple_email",KP_CUSTOMER_ID:"kp_customer_id",FP_REQUEST_ID:"fp_req",META_CUSTOM_EVENTS_CSV_DATA:"ka_ce_csv"},ne={kp_visitors:"kp_visitors",kp_engaged_visitors:"kp_engaged_visitors",kp_identified:"kp_identified",kp_atc:"kp_atc",STANDARD_EVENTS:["PageView","ViewContent","AddToCart","Search"],PageView:"PageView",ViewContent:"ViewContent",AddToCart:"AddToCart",Search:"Search"},oe={kp_notification_checked:"kp_notification_checked",kp_non_otp_verified_phone:"kp_non_otp_verified_phone",kp_no_otp_based_phone:"kp_no_otp_based_phone"},ie={GET_AUTOLOAD_CONFIG_SERVER_ERROR:"GET_AUTOLOAD_CONFIG_SERVER_ERROR",GET_MERCHANT_CONFIG_SERVER_ERROR:"GET_MERCHANT_CONFIG_SERVER_ERROR",KWIKPASS_DISABLED:"KWIKPASS_DISABLED",OPEN_LOGIN_MODAL:"open_login_modal",SHOPIFY_SESSION:"shopify-session",SHOW_LOADING_SCREEN:"SHOW_LOADING_SCREEN",HIDE_LOADING_SCREEN:"HIDE_LOADING_SCREEN",API_KEY_SUCCESS:"API_KEY_SUCCESS",API_KEY_ERROR:"API_KEY_ERROR",KC_PHONE_NUMBER:"KC_PHONE_NUMBER",RP_PHONE_NUMBER:"RP_PHONE_NUMBER",SR_PHONE_NUMBER:"SR_PHONE_NUMBER",EXPIRED_TOKEN_PHONE_NUMBER:"EXPIRED_TOKEN_PHONE_NUMBER",NON_OTP_VERIFIED_PHONE:"NON_OTP_VERIFIED_PHONE",SHOPIFY_COD_UNAUTH_PHONE_NUMBER:"SHOPIFY_COD_UNAUTH_PHONE_NUMBER",kp_sso_token:"kp_sso_token",store_data_from_merchant:"store_data_from_merchant",USER_STATUS:"user_status",META_VISIT_COUNT:"meta_visit_count",NO_OTP_FLOW_PHONE_NUMBER:"NO_OTP_FLOW_PHONE_NUMBER",CHECK_CORE_TOKEN:"check_core_token",kp_vst_cnt:"kp_vst_cnt",process_fingerprinting:"process_fingerprinting",store_visitor_information:"store_visitor_information",KWIKPASS_SCRIPT_INIT:"kp_script_init"},ae="kp-merchant-id",re="gk-merchant-id",se="gk-access-token",ce="gk-request-id",_e="kp-request-id",ue="is-orders-visible",le="checkout-access-token",de="gk_login_source",pe="kwik_pass",me="flits-referral-code",fe="verified",he="kp_session_type",Ee="kp_valid_session",we={KP_MERCHANT_CONFIG:"KP_MERCHANT_CONFIG",SP_DUID:"SP_DUID",FP_CONTROLS_DATA:"FP_CONTROLS_DATA",KP_META_FB_CLICK_ID:"KP_META_FB_CLICK_ID",KP_BACKEND_RETRIVED_FBCLID_COOKIE:"kpmclid",LOCALIZATION:"localization",KP_META_LAST_VISIT:"KP_META_LAST_VISIT",KP_MARKETING_POPUP_INFO:"KP_MARKETING_POPUP_INFO",KP_USER_ID:"kp_user_id",KP_UTM_SOURCE:"kp_utm_source",SHOPIFY_SA_P:"shopify_sa_p",KP_SESSION_ID:"kp_session_id",CUSTOMER_ACCESS_TOKEN:"acs_tkn",SHOPIFY_CUSTOMER_TOKEN:"sc_tkn",KP_META_KWIKADS_CONFIG:"_ka_c",KP_META_KWIKADS_CUSTOM_EVENT:"_ka_c_ce",KP_META_KWIKADS_KP_CUSTOM_EVENT:"_ka_c_kp_ce"},ge=5,ye=30,Ie="+91",Se={USER_INPUT:"userInput",CORE_TOKEN:"coreToken",FPPHONE:"fpPhone",KCPHONE:"kcPhone",RPPHONE:"rpPhone",SRPHONE:"srPhone",backend:"backend",NON_OTP_VERIFIED_PHONE:"nonOTPVerifiedPhone",SHOPIFY_APP_PHONE_NUMBER:"shopify_app_phone_number",NO_OTP_FLOW_PHONE_NUMBER:"noOtpFlowPhoneNumber",EXPIRED_TOKEN_PHONE:"expiresTokenPhone",UNVERIFIED_PHONE:"unverifiedPhone"},Oe="kwikPass",ke="kwikPass_plugin",Ne={cred:"cred",checkout:"checkout",metas2s:"meta_s2s",flits:"flits"},Pe={LOGIN_PARTNER:"Login Partner",ACCOUNT_PAGE_EXTENSION:"Account Page Extension"},Te={SOURCE_LOCAL:"SOURCE_LOCAL",SOURCE_PDP:"SOURCE_PDP",VISITOR_ID_GENERATED:"VISITOR_ID_GENERATED"},ve="kp_count",be="m_count",Re={LOGIN_MODAL:"login_modal"},Ae="longitude",Ce="latitude",Le={EMAIL:"Email",NAME:"Name",DOB:"DOB",GENDER:"Gender",PROFESSION:"Profession",PHONE:"Phone Number"},Ue={something_went_worng:"Something went wrong",scope_missing:"Request failed with status code 403"},De=["Product ID","Variant ID"],Me="kp_identified_trigger",Ke=["19g6ilna7x8mn","19g6im6ucihy2","19g6ilfm4emk7","19g6ilmrm0yi8","194jzpbx3sp2","191v12j0j690","19jhj0m1mwoj","p08im9v1fh6e","19u3vmi11wr4","196hpejqlb4d","19g6ilu9flfri","19f403fdbrpg","19g6ilhzwnelw","19g6im5dmqndu","19g6jlsvjilud","193kbvc47o31","19g6ilisrb8ff","19g6im8jqn0pi","19g6ilvqhbdtz","5cviqimclj7l80","19111z3am8u0","19g6im8h0d03e","iwfimgrqpxxq","19zcx2x26gap","19g6hlcud3ifz","19g6ilq0kivjn","194llhcebf7k","321uimbyt8fyb","19g6ilto0341k","4xb1dimh1wxixh"],Fe=[];function He(t,n=e){let o;const i=new Set;function r(e){if(a(t,e)&&(t=e,o)){const e=!Fe.length;for(const e of i)e[1](),Fe.push(e,t);if(e){for(let e=0;e<Fe.length;e+=2)Fe[e][0](Fe[e+1]);Fe.length=0}}}return{set:r,update:function(e){r(e(t))},subscribe:function(a,s=e){const c=[a,s];return i.add(c),1===i.size&&(o=n(r)||e),a(t),()=>{i.delete(c),0===i.size&&o&&(o(),o=null)}}}}const Ge=He(""),Be=He({}),xe=He(z.SHOPIFY),Ve=He(""),je=He(null);let We=!0;try{localStorage.getItem("kp_token"),We=!0}catch(e){We=!1}const $e=He(We),qe=He(null),Ye=He(""),Je=He(""),ze=He(""),Qe=He(""),Xe=He(!0),Ze=He(!0),et=He(["whatsApp","trueCaller"]),tt=He("false"),nt=He(!0),ot=He(""),it=He("/"),at=He(null),rt=He([]),st=He(!1),ct=He(!1),_t=He("1240px"),ut=He({country_code:"+91",value:""}),lt=He(null),dt=He(null),pt=He(null),mt=He(null),ft=He(null),ht=He(null),Et=He(null),wt=He(""),gt=He(null),yt=He(null),It=He(!1),St=He(!1),Ot=He(!0),kt=He(null),Nt=He(null),Pt=He(null),Tt=He(!0),vt=He("kwikPass"),bt=He(!1),Rt=He([]),At=He(!1),Ct=He({status:!1,meta:{},merchant:{}}),Lt=function(t,n,a){const r=!Array.isArray(t),s=r?[t]:t,_=n.length<2;return{subscribe:He(void 0,(t=>{let a=!1;const u=[];let l=0,d=e;const p=()=>{if(l)return;d();const o=n(r?u[0]:u,t);_?t(o):d=i(o)?o:e},m=s.map(((e,t)=>c(e,(e=>{u[t]=e,l&=~(1<<t),a&&p()}),(()=>{l|=1<<t}))));return a=!0,p(),function(){o(m),d(),a=!1}})).subscribe}}([lt,dt],(([e,t],n)=>{(e||t)&&n(JSON.stringify({authPh:e,unAuthPh:t}))})),Ut=He({initSPcalls:!1,onMetas2sFire:!1}),Dt=He(!0),Mt=He({country_code:"IN",dial_code:"+91"}),Kt=He(!1),Ft=He({authRequired:!1,email:""}),Ht=He(null),Gt=He(""),Bt=He([]),xt=He("opt_out"),Vt={requestApi:"/v3/session",login:{sendOtpApi:"/v3/gkstrict/auth/otp/send",verifyOtpApi:"/v3/auth/otp/verify",truecaller:"/v3/auth/truecaller/verify",whatsappLogin:"/v3/auth/whatsapp/verify",kwikpassSendOtpApi:"/auth/send-otp",kwikpassVerifyOtpApi:"/auth/verify-otp",whatsappIntentUrl:"/v3/auth/whatsapp/intent-url",createBrowserToken:"/v3/auth/browser",createBrowserTokenForCustomMerchant:"/kp/api/v1/auth/browser",sendOtpApiForCustomMerchant:"/kp/api/v1/auth/otp/send",verifyOtpApiForCustomMerchant:"/kp/api/v1/auth/otp/verify",generateCustomKpToken:"/kp/api/v1/auth/kp-token"},generateToken:"kp/api/v1/auth/generate-token",validateToken:"kp/api/v1/auth/validate-token",getMerchantConfig:"kp/api/v1/configurations",getAutoloadPopupConfig:"kp/api/v1/popup-config",getAllAutoloadConfigList:"kp/api/v1/popup-config/list",createShopifySession:"kp/api/v1/auth/shopify-session",createShopifySessionWithMetaData:"kp/api/v1/customer/shopify-session-with-metafields",createShopifySessionWithMetaForCustom:"kp/api/v1/customer/custom-session-with-metafields",shopifyLoginData:"kp/api/v1/customer/shopify-login",createCustomerLoginTag:"kp/api/v1/customer/tag",updateCustomer:"kp/api/v1/customer",checkIsNewUserInShopify:"kp/api/v1/customer/shopify-session",getAssetsPropertiesUrl:"kp/api/v1/components/merchants",integrateEasyRewardzUrl:"kp/api/v1/integrations/easy-rewardz",integratePopclubUrl:"kp/api/v1/integrations/popclub",integrateFlitsUrl:"/kp/api/v1/integrations/flits-refer",getGkpTokenUrl:"kp/api/v1/auth/core-token/login",getCustomerEmailUrl:"/kp/api/v1/customer/phone",validateEmaiURL:"kp/api/v1/disposable-email/validate",shopifyLoginDataV2URL:"kp/api/v1/customer/shopify-login-data",updateShopifyCustomer:"kp/api/v1/customer/shopify",kwikpassSendOTPOnEmail:"kp/api/v1/auth/send-otp",kwikpassVerifyOTP:"kp/api/v1/auth/verify-otp",decryptPhoneNumber:"kp/api/v1/customer/data",customLogin:"kp/api/v1/customer/custom/login",createUser:"kp/api/v1/customer/custom/create-user",postVisitorIdentification:"/kp/api/v1/fp/v-id",getVisitorIdentification:"/kp/api/v1/fp/g-v-id",getFPcontrols:"/kp/api/v1/fp/cnfgs",incFpCount:"/kp/api/v1/fp/inc",checkoutOffersWithoutCode:"/kp/api/v1/offers/public",checkoutOffersWithCode:"/kp/api/v1/offers/list",orderCount:"/kp/api/v1/customer/order-count",metaS2S:"kp/api/v1/integrations/meta-s2s",validateEmail:"/kp/api/v1/disposable/validate",captureFbclid:"/ka/api/v1/mcd/op1",retriveFbclid:"/ka/api/v1/mcd/op2",capiParamBuilderScript:"https://capi-automation.s3.us-east-2.amazonaws.com/public/client_js/capiParamBuilder/clientParamBuilder.bundle.js",credEligibility:"/kp/api/v1/integrations/cred/eligibility",credCoinpay:"/kp/api/v1/integrations/cred/coinpay",customerIntelligence:"kp/api/v1/customer-intelligence",healthCheck:"/kp/api/v1/health/merchant",getCountryCode:"/kp/api/v1/ct-code",createCustomerWithEmailPopup:"kp/api/v1/customer/marketing-popup-submit",getWebPersonalizationInfo:"kp/api/v1/integrations/web-personalization",getCustomerIntelligence:"kp/api/v1/customer-intelligence?cstmr-mtrcs=billing_pincode",createShopifySessionV2:"kp/api/v2/customer/shopify-session",shopifyLoginDataForCustomAccountV2URL:"kp/api/v2/customer/shopify-login-data",kwikpassVerifyOTPV2:"kp/api/v2/auth/verify-otp",checkEmail:"kp/api/v1/customer/check-email",getKwikAddsCustomEvents:"ka/api/v1/m/op12",metaS2SOpEndpoint:"ka/api/v1/e/op2",getKfAssetsPropertiesUrl:"kp/api/v1/kwikforms/components/merchants",getKwikFormData:"kp/api/kwikforms/v1/cst/dt",submitKwikFormData:"kp/api/kwikforms/v1/submit",getAddress:"v3/address",getAllAddressesByPhone:"/v3/address/getbyphone",getInfo:"/v3/address/geoinfo",addAddress:"/v3/address",deleteAddress:"/v3/address",s2sEvent:"kp/api/v1/integrations/s2s-event"},jt="snowplow_event",Wt={login_autoload:"login_autoload",login_autoload_spin_the_wheel:"login_autoload_spin_the_wheel",login_autoload_bottom_load:"login_autoload_bottom_load",login_autoload_center_load:"login_autoload_center_load",login_autoload_banner_popup:"login_autoload_banner_popup",login_autoload_discount_popup:"login_autoload_discount_popup",login_modal:"login_modal",user_type:"user_type",sso_login:"sso_login",shopify_login_modal:"shopify_login_modal",logged_in_page:"logged_in_page",token_not_found:"token_not_found",cart_token_not_found:"cart_token_not_found",kc_phone_found:"kc_phone_found",sr_phone_found:"sr_phone_found",kc_phone_found_on_sso:"kc_phone_found_on_sso",non_auth_user_identified:"non_auth_user_identified",cart_event:"cart_event",user_id_event:"user_id_event",fbclid_retrieve:"fbclid_retrieve",fbp_and_fbc_source:"fbp_and_fbc_source"},$t={click:"click",click_by_cooee:"click_by_cooee",error:"error",logged_in:"logged_in",automated:"automated",not_found:"not_found",logged_out:"logged_out",mp_email_logged_in:"mp_email_logged_in",found:"found"},qt={whatsapp_button_clicked:"whatsapp_button_clicked",whatsapp_not_installed:"whatsapp_not_installed",whatsapp_logged_in:"whatsapp_logged_in",close_popup:"close_popup",phone_Number_logged_in:"phone_Number_logged_in",submit_otp:"submit_otp",resend_otp:"resend_otp",verify_otp_error:"verify_otp_error",resend_otp_error:"resend_otp_error",send_otp_error:"send_otp_error",phone_number_edit:"phone_number_edit",phone_number_changed:"phone_number_changed",phone_number_entered:"phone_number_entered",phone_number_autofill:"phone_number_autofill",authenticated_phone_number_autofill:"authenticated_phone_number_autofill",email_entered:"email_entered",dob_entered:"dob_entered",name_entered:"name_entered",phone_entered:"phone_entered",gender_entered:"gender_entered",profession_entered:"profession_entered",true_caller_button_clicked:"true_caller_button_clicked",true_caller_sdk_opened:"true_caller_sdk_opened",true_caller_logged_in:"true_caller_logged_in",true_caller_not_installed:"true_caller_not_installed",true_caller_login_error:"true_caller_login_error",kwikpass_sso_logged_in:"kwikpass_sso_logged_in",checkout_sso_logged_in:"checkout_sso_logged_in",open_login_modal:"open_login_modal",open_login_autoload:"open_login_autoload",shopify_new:"shopify_new",shopify_old:"shopify_old",gokwik_new:"gokwik_new",gokwik_old:"gokwik_old",open_shopify_login_modal:"open_shopify_login_modal",close_shopify_login_modal:"close_shopify_login_modal",email_submitted:"email_submitted",email_edit_button_clicked:"email_edit_button_clicked",forgot_password_failed:"forgot_password_failed",reset_password_send_successfully:"reset_password_send_successfully",non_auth_user_identified_with_expired_token:"non_auth_user_identified_with_expired_token",password_box_opened:"password_box_opened",password_submitted:"password_submitted",shopify_logged_in:"shopify_logged_in",shopify_logged_in_error:"shopify_logged_in_error",success_screen:"success_screen",redirected_to_account_page:"redirected_to_account_page",order_history_button_click:"order_history_button_click",kwikpass_button_click:"kwikpass_button_click",spin_now_click:"spin_now_click",claim_now_click:"claim_now_click",try_again_click:"try_again_click",otp_sent_successfully:"otp_sent_successfully",kc_phone_found_without_kp_token:"kc_phone_found_without_kp_token",kc_phone_found_with_kp_token:"kc_phone_found_with_kp_token",kc_phone_number_autofill:"kc_phone_number_autofill",non_auth_user_identified_with_kc_phone_number:"non_auth_user_identified_with_kc_phone_number",successfully_loggedout:"successfully_loggedout",sso_button_click:"sso_button_click",phone_number_filled:"phone_number_filled",non_auth_user_identified_with_rp_phone_number:"non_auth_user_identified_with_rp_phone_number",non_auth_user_identified_with_idb_phone_number:"non_auth_user_identified_with_idb_phone_number",non_auth_user_identified_with_shopify_app_phone_number:"non_auth_user_identified_with_shopify_app_phone_number",non_auth_user_identified_with_sr_phone_number:"non_auth_user_identified_with_sr_phone_number",non_auth_user_identified_with_non_otp_verified_phone_number:"non_auth_user_identified_with_non_otp_verified_phone_number",non_auth_user_identified_with_guest_phone_number:"non_auth_user_identified_with_guest_phone_number",showed_the_criteria_error:"cred_showed_the_criteria_error",showed_the_criteria_success:"cred_showed_the_criteria_success",redeem_button_clicked:"redeem_button_clicked",user_elgibilble_for_cred:"user_elgibilble_for_cred",user_not_elgibilble_for_cred:"user_not_elgibilble_for_cred",cred_eligibility_api_error:"cred_eligibility_api_error",showed_the_checkout_offers_without_code_success:"showed_the_checkout_offers_without_code_success",showed_the_checkout_offers_code_success:"showed_the_checkout_offers_code_success",showed_the_checkout_offers_without_code_error:"showed_the_checkout_offers_without_code_error",showed_the_checkout_offers_code_error:"showed_the_checkout_offers_code_error",sr_phone_found:"sr_phone_found",non_auth_user_identified_with_no_otp_flow:"non_auth_user_identified_with_no_otp_flow",kp_mp_email_logged_in:"kp_mp_email_logged_in",kp_mp_email_entered:"kp_mp_email_entered",idb_value_found:"idb_value_found",idb_number_found:"idb_number_found",pdp:"pdp",fbclid_retrieve:"fbclid_retrieve",fbp_and_fbc_source:"fbp_and_fbc_source"},Yt={phone_number:"phone_number",email:"email",name:"name",dob:"dob",phone:"phone",profession:"profession",gender:"gender",kc_phone_number:"kc_phone_number",rp_phone_number:"rp_phone_number",sr_phone_number:"sr_phone_number",non_otp_verified_phone_number:"non_otp_verified_phone_number",shopify_app_phone_number:"shopify_app_phone_number",expired_token_phone_number:"expired_token_phone_number",plus_user:"plus_user",non_plus_user:"non_plus_user",user_logged_in:"user_logged_in",email_or_shopify_customerId_not_available:"email_or_shopify_customerId_not_available",error_in_shopify_login_data_api:"error_in_shopify_login_data_api",shopify_login_retry_limit_reached:"shopify_login_retry_limit_reached",manual_shopify_login:"manual_shopify_login",popup_type_id:"popup_type_id",no_otp_flow_phone_number:"no_otp_flow_phone_number",kp_mp_email:"kp_mp_email",idb_phone_number:"idb_phone_number",login_strategy:"kp_login_strategy",coupon_code:"coupon_code"},Jt={OTP:"otp",NO_OTP:"no_otp",EMAIL:"email"},zt={EVENTS:{PHONE_NUMBER_AUTOFILL:"kp_phone_number_autofill",MOBILE_ADDED_GK:"kp_mobile_added_gk",CREATE_SHOPIFY_SESSION:"kp_create_shopify_session",WHATSAPP_LOGGED_IN:"kp_whatsapp_logged_in",KWIKPASS_SSO_LOGGED_IN:"kp_kwikpass_sso_logged_in",CHECKOUT_SSO_LOGGED_IN:"kp_checkout_sso_logged_in",TRUECALLER_BUTTON_CLICKED:"kp_truecaller_button_clicked",OPEN_LOGIN_MODAL:"kp_open_login_modal",OPEN_LOGIN_AUTOLOAD:"kp_open_login_autoload",OPEN_SHOPIFY_LOGIN_MODAL:"kp_open_shopify_login_modal",TRUECALLER_NOT_INSTALLED:"kp_truecaller_not_installed",LOGGED_IN_PAGE:"kp_logged_in_page",REDIRECTED_TO_ACCOUNT_PAGE:"kp_redirected_to_account_page",CLOSE_POPUP:"kp_close_popup",SPIN_NOW_CLICKED:"kp_spin_now_clicked",CLAIM_NOW_CLICK:"kp_claim_now_click",TRY_AGAIN_CLICK:"kp_try_again_click",WHATSAPP_BUTTON_CLICKED:"kp_whatsapp_button_clicked",WHATSAPP_NOT_INSTALLED:"kp_whatsapp_not_installed",SUCCESS_SCREEN:"kp_success_screen",SUBMIT_OTP:"kp_submit_otp",PHONE_NUMBER_LOGGED_IN:"kp_phone_number_logged_in",VERIFY_OTP_ERROR:"kp_verify_otp_error",RESEND_OTP:"kp_resend_otp",RESEND_OTP_ERROR:"kp_resend_otp_error",PHONE_NUMBER_EDIT:"kp_phone_number_edit",PHONE_NUMBER_CHANGED:"kp_phone_number_changed",PHONE_NUMBER_ENTERED:"kp_phone_number_entered",EMAIL_ENTERED:"kp_email_entered",DOB_ENTERED:"kp_dob_entered",NAME_ENTERED:"kp_name_entered",PHONE_ENTERED:"kp_phone_entered",PROFESSION_ENTERED:"kp_profession_entered",GENDER_ENTERED:"kp_gender_entered",SEND_OTP:"kp_send_otp",SEND_OTP_ERROR:"kp_send_otp_error",TRUCALLER_SDK_OPENED:"kp_truecaller_sdk_opened",TRUECALLER_LOGGED_IN:"kp_truecaller_logged_in",TRUECALLER_LOGIN_ERROR:"kp_truecaller_login_error",REDIRECTED_TO_ACCOUNT_PAGE:"kp_redirected_to_account_page",ORDER_HISTORY_BUTTON_CLICK:"kp_order_history_button_click",KWIKPASS_BUTTON_CLICK:"kp_kwikpass_button_click",EDIT_EMAIL_BUTTON_CLICKED:"kp_edit_email_button_click",RESET_PASSWORD_SEND_SUCCESSFUL:"kp_reset_password_send_successfully",FORGOT_PASSWORD_FAILED:"kp_forgot_password_failed",EMAIL_SUBMITTED:"kp_email_submitted",SHOPPIFY_LOGGED_IN:"kp_shopify_logged_in",SHOPIFY_LOGIN_ERROR:"kp_shopify_logged_in_error",PASSWORD_BOX_OPENED:"kp_password_box_opened",PASSWORD_SUBMITTED:"kp_password_submitted",LOGOUT_BUTTON_CLICKED:"kp_logout_button_clicked",SUCCESSFULLY_LOGGED_OUT:"kp_successfully_logged_out",EMAIL_OTP_VERIFIED:"kp_email_otp_verified",CART_TOKEN_NOT_FOUND:"cart_token_not_found",KC_PHONE_FOUND_IN_PROMOTIONAL_LINK:"kc_phone_found_in_promotional_link",KC_PHONE_NUMBER_AUTOFILL:"kc_phone_number_autofill",KC_PHONE_NUMBER_SSO:"kc_phone_number_sso",NON_AUTH_USER_IDENTIFIED_WITH_KC_PHONE_NUMBER:"kp_non_auth_user_identified_with_kc_phone_number",NON_AUTH_USER_IDENTIFIED_WITH_RP_PHONE_NUMBER:"kp_non_auth_user_identified_with_rp_phone_number",NON_AUTH_USER_IDENTIFIED_WITH_IDB_PHONE_NUMBER:"kp_non_auth_user_identified_with_idb_phone_number",NON_AUTH_USER_IDENTIFIED_WITH_SR_PHONE_NUMBER:"kp_non_auth_user_identified_with_sr_phone_number",NON_AUTH_USER_IDENTIFIED_WITH_NON_OTP_VERIFIED_PHONE_NUMBER:"kp_non_auth_user_identified_with_non_otp_verified_phone_number",NON_AUTH_USER_IDENTIFIED_WITH_GUEST_PHONE_NUMBER:"kp_non_auth_user_identified_with_guest_phone_number",NON_AUTH_USER_IDENTIFIED_WITH_SHOPIFY_APP_PHONE_NUMBER:"kp_non_auth_user_identified_with_shopify_app_phone_number",NON_AUTH_USER_IDENTIFIED_WITH_NO_OTP_FLOW:"kp_non_auth_user_identified_with_no_otp_flow",NON_AUTH_USER_IDENTIFIED_WITH_EXPIRED_TOKEN_PHONE_NUMBER:"NON_AUTH_USER_IDENTIFIED_WITH_EXPIRED_TOKEN_PHONE_NUMBER",ADD_TO_CART:"add_to_cart"},PROVIDERS:{SNOWPLOW:"snowplow",NETCORE:"netcore",CLEVERTAP:"clevertap",GOOGLE_ANALYTICS:"google_analytics",META_PIXEL:"meta_pixel",WEBENGAGE:"web_engage",MOENGAGE:"mo_engage",POPCLUB:"popclub",EASY_REWARDZ:"easy_rewardz",KlAVIYO:"Klaviyo"}},Qt={fingerprinting:"fingerprinting",structured:"structured"},Xt={KP_ANALYTICS_EVENT:"kp_analytics-events",KP_HANDLE_MULTIPASS_FOR_NEW_USER:"kp-handle-multipass-for-new-user",KP_HANDLE_NEW_USER_WITH_PASSWORD:"kp-handle-new-user-with-password",KP_HANDLE_OLD_USER_WITH_PASSWORD:"kp-handle-old-user-with-password",CLOSE_POPUP:"close_popup",TO_HANDLE_SHOPIFY_SESSION_FROM_IFRAME:"kp-to-handle-shopify-session-from-iframe",TO_HANDLE_EMAIL_INPUT_MODAL_LOGIN_FROM_IFRAME:"kp-to-handle-email-input-modal-login-from-iframe",KP_TOKEN_FOR_CUSTOM_MERCHANTS:"kp_token_for_custom_merchants",KP_HANDLE_ACCOUNT_BUTTON_CLICK_FOR_CUSTOM_MERCHANT:"handle_account_button_click_for_custom_merchant",KP_SSO_TOKEN_FOR_CUSTOM_MERCHANT:"kp_sso_token_for_custom_merchant",SHOW_EMAIL_INPUT:"kp-show-email-input",KP_SSO_TOKEN:"kp_sso_token",POP_FLOATER:"pop-floater:opened",STORE_VISITOR_INFORMATION:"store_visitor_information",PROCESS_FINGERPRINTING:"process_fingerprinting",KP_MODAL_OPENED:"kp-modal:opened",KP_PHONE_SENT:"kp-phone:sent",KP_USER_CALLBACK:"kp_user_callback",REDIRECT_INTERN_USER:"redirect_international_login",CHECKOUT_WITH_NEW_EMAIL:"new_email_on_checkout",CUSTOM_PAGE_VIEW:"page_view_kp",CHECKOUT_ORDER_SUCCESS:"orderSuccess",OPEN_URL_SAME_TAB:"open-url-same-tab",CLOSE_POPUP_NO_OTP_LOGIN:"close-popup-no-otp-login",IDB_TOKEN_FOUND:"IDB_TOKEN_FOUND"},Zt="LOGIN_MODAL";function en(e){return e?{property_1:Yt.popup_type_id,value_1:e}:{}}const tn={cart:"iglu:com.shopify/cart/jsonschema/1-0-0",fingerprint:"iglu:co.gokwik/fingerprint/jsonschema/1-1-0",product:"iglu:co.gokwik/product/jsonschema/1-1-0",user:"iglu:co.gokwik/user/jsonschema/1-2-2",structured:"iglu:co.gokwik/structured/jsonschema/1-2-0",shopifyAnalytics:"iglu:co.gokwik/shopifyAnalytics/jsonschema/1-0-2"},nn="SP_DUID",on="kp_user_id",an="__Host-go_sid",rn=["_shopify_y","_shopify_s","cart","_landing_page","gk_orig_referrer","gk_landing_page","_shopify_sa_p","_shopify_sa_t","Master_device_id","localization","APISID","SAPISID","MUID"],sn=["category","action","label","property","value","property_1","value_1","property_2","value_2","property_3","value_3","property_4","value_4","property_5","value_5","meta","country_code"],cn=["value","value_5"],_n="kp-v-id",un="cart_token_not_found",ln={IS_PAGE_PING_ENABLED:"trk_enbld"},dn="cart_token_not_found",pn="+91",mn=(e,t=!0)=>t&&localStorage.getItem(e),fn=e=>{let t=e,n=null;for(;t!==n;)n=t,t=decodeURIComponent(t);return t},hn=(e="notifyph")=>{const t=gn(e);if(!t)return null;if(t&&!isNaN(t)){if(t?.includes("|")){const e=atob(t).split("|");return{country_code:e[0]||pn,value:e[1]}}return{country_code:pn,value:t}}if(t){const e=atob(t).split("|");return 1===e?.length?{country_code:pn,value:e[0]}:{country_code:e[0],value:e[1]}}},En=e=>{const t=document.cookie.split(";").map((e=>e.trim()));for(const n of t){const[t,o]=n.split("=");if(t===e)return o}return null},wn=e=>{const t=sessionStorage.getItem(e);return null!=t?JSON.parse(t):null},gn=(e,t=!0)=>{const n=En(e);return null==n?mn(e,t):n},yn=(e,t,n,o)=>{let i="";if(n||o){const e=new Date;n&&e.setDate(e.getDate()+n),o&&e.setTime(e.getTime()+60*o*1e3),i="; expires="+e.toUTCString()}document.cookie=e+"="+(t||"")+i+"; SameSite=None; Secure; path=/"},In=(e={})=>{let t={};return sn.forEach((n=>{e.hasOwnProperty(n)&&(t[n]="meta"===n?e[n]:cn.includes(n)?Number.parseInt(e[n]):e[n]+"")})),t},Sn=()=>{let e=wn("latitude"),t=wn("longitude");const n={};return e&&t&&(n.property_4="latitude-longitude",n.value_4=`${e}-${t}`),n},On=()=>{const e=gn("KWIKSESSIONTOKEN"),t=hn("unverified_phone_number"),n=e?hn():null,o=gn("KC_PHONE"),i=hn("rp-phone-number"),a=hn("non_authed_info"),r=hn("idb_ph_no"),s=hn("expired_ph_no"),c=hn("app_unauth_user"),_=JSON.parse(gn("unkwn")),u={value:_?.fpPhone,country_code:_?.countryCode||pn},l=function(e){let t={};if(e?.includes("|")){const n=e.split("|");t.value=n[0],t.country_code=n[1]}else t.value=e,t.country_code=pn;return t}(o),d=_?.authenticated,p=n?.value&&n||s?.value&&s||a?.value&&a||l?.value&&l||u?.value&&u||i?.value&&i||t?.value&&t||c?.value&&c||r?.value&&r;if(p?.value)return{phoneNumber:p,type:(()=>{const o=(()=>{let e=window.navigator.userAgent,t=window.navigator?.userAgentData?.platform,n="";return t||(t=window.navigator.userAgent),-1!==["Macintosh","MacIntel","MacPPC","Mac68K","macOS"].indexOf(t)||t.includes("Macintosh")?n="Mac OS":-1!==["iPhone","iPad","iPod"].indexOf(t)||t.includes("iPhone")||t.includes("iPad")?n="iOS":-1!==["Win32","Win64","Windows","WinCE"].indexOf(t)?n="Windows":/Android/.test(e)?n="Android":/Linux/.test(t)&&(n="Linux"),n})();return n?.value?e?null:[{platform:o,type:"non_auth_token_user"}]:s?.value?[{platform:o,type:"expired_token_non_auth_user"}]:a?.value?[{platform:o,type:"sr_non_auth_user"}]:l?.value?[{platform:o,type:"non_auth_user"}]:u?.value?[{platform:o,type:d?"fp_auth_user":"fp_non_auth_user"}]:i?.value?[{platform:o,type:"rp_non_auth_user"}]:t?.value?[{platform:o,type:"non_auth_token_user"}]:c?.value?[{platform:o,type:"shopify_app_non_auth_user"}]:r?.value?[{platform:o,type:"idb_non_auth_user"}]:null})()}},kn=async()=>{const e=gn("kp_email");let t;if(e){const n=await async function(e){const t=new TextEncoder,n=new TextDecoder;if(!e||!(o=e)||o.length%4!=0||!/^[A-Za-z0-9+/]+={0,2}$/.test(o))return e||null;var o;try{const o=t.encode("kR7dmP9tnL2wjH5&vC8qxF4hwQ1iyT6t"),i=t.encode("2134765890213456"),a=Uint8Array.from(atob(e),(e=>e.charCodeAt(0))),r=await crypto.subtle.importKey("raw",o,"AES-CBC",!1,["decrypt"]),s=await crypto.subtle.decrypt({name:"AES-CBC",iv:i},r,a);return n.decode(s)}catch(e){return null}}(e);t=n}return{phoneData:On(),email:t,userId:gn(on)}},Nn=()=>!!window?.Shopify?.shop||!!window?.ShopifyAnalytics||!!window?.Shopify?.designMode,Pn=()=>{const e=localStorage.getItem("_kwik_analytics_uid");if(!e)return null;try{let t=atob(e).split("").reverse().join(""),n=atob(t);return JSON.parse(n)}catch(e){return null}},Tn=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const t=crypto.getRandomValues(new Uint8Array(1))[0]%16;return("x"===e?t:3&t|8).toString(16)})),vn=()=>{const e=navigator.userAgent.toLowerCase();return!!/bot|spider|crawler|googlebot|baiduspider|petalbot|coccocbot|fetcher|userproxy|brightedge/.test(e)},bn=En(an);(({cookieName:e,cookieValue:t,timeoutMinutes:n=30,checkBeforeExpiryMs:o=12e4})=>{let i=t||En(e),a=null;i?a=Date.now()+60*n*1e3:(i=null,a=null);const r=()=>{(()=>{const t=Date.now();if(!a||a<=t)return i=Tn(),a=t+60*n*1e3,void yn(e,i,null,n);const r=a-t;r<=o&&r>0&&(a=t+60*n*1e3,yn(e,i,null,n))})()};return{start:()=>{(!i||!a||a<=Date.now())&&(i=Tn(),a=Date.now()+60*n*1e3,yn(e,i,null,n)),["click","mousemove","keydown","scroll","touchstart","focus"].forEach((e=>{window.addEventListener(e,r,{passive:!0})}))}}})({cookieName:an,cookieValue:bn,timeoutMinutes:30}).start();const Rn=(e=!0,t)=>{let n={},o=mn("kp-request-id"),i=En(an),a=En("_shopify_s"),r=window?.merchantInfo?.gkPlatform,s=window?.merchantInfo?.integrationType;if(e){const e=document.cookie.split(";").map((e=>e.trim()));for(const t of e){const e=t.split("=");if(2===e.length){const[t,o]=e;if(rn.includes(t)&&o){let e=t;"kp_utm_source"===t?e="shopify_sa_p":t&&t?.startsWith("_")?e=t.slice(1):e===on&&(e="kookie1"),n[e]=o}}}const t=Date.now(),o=En("KP_META_LAST_VISIT");let i;if(o&&(i=function(e,t){const n=new Date(e),o=new Date(t);return n.setHours(0,0,0,0),o.setHours(0,0,0,0),Math.floor(Math.abs(o-n)/864e5)}(t,+o)),i||0===i){n.kookie2=""+i;const e=new CustomEvent("kp_sync_monitor");window.dispatchEvent(e)}}return n.appId=t||window?.merchantInfo?.appId||"kwik_pass",(i||a)&&(n.shopify_s=i||a),o&&(n.request_id=o),i&&(n.session_id=i),r&&(n.gk_platform=r?.toLowerCase()),s&&(n.kp_integration_type=s?.toLowerCase()),Object.keys(n).length>0?{schema:tn.shopifyAnalytics,data:n}:null};function An(e){if(e)return{schema:tn.fingerprint,data:{visitor_id:fn(e)}}}function Cn(e){if(e){const{phoneData:t,email:n}=e;if("ée"!==t.phoneNumber?.value){let e={schema:tn.user,data:{phone:""+t.phoneNumber?.value,country_code:""+(t.phoneNumber?.country_code||"+91"),type:t.type}};return n&&(e.data.email=n),e}}}function Ln(){const e=window?.ShopifyAnalytics?.meta?.product?.id?""+window?.ShopifyAnalytics?.meta?.product?.id:null;let t=e;const n=document.querySelector(".kp-product-id");if(!e&&(t=document.querySelector("form[action='/cart/add'] input[name='product-id']")?.value,n)){const e=n.getAttribute("data-product-id");e&&(t=e)}if(t){let e=window?.ShopifyAnalytics?.meta?.selectedVariantId?""+window?.ShopifyAnalytics?.meta?.selectedVariantId:null,o=e;if(!e&&(o=document.querySelector("form[action='/cart/add'] input[name='id']")?.value,n)){const e=n?.querySelector('[name="id"]')?.value;e&&(o=e)}const i={product_id:t};return o&&(i.variant_id=o),i}return null}function Un(){const e=Ln();return e?{schema:tn.product,data:e}:null}function Dn(e,t){if(vn())return;let n=null,o="kwikform"===t?.category?t?.category:"";const i=Rn(Nn(),o),a=[];if(i&&a.push(i),"fingerprinting"===e)n={schema:tn.fingerprint,data:t};else{if("structured"!==e)return;n={schema:tn.structured,data:In({...t,...Sn()})}}"function"==typeof window.snowplow&&"function"==typeof window.snowplow&&window.snowplow((function(){try{window.snowplow("trackSelfDescribingEvent:gkwkkp",{event:n,...a.length>0&&{context:a}})}catch(e){}}))}function Mn(e,t){return function(){return e.apply(t,arguments)}}const{toString:Kn}=Object.prototype,{getPrototypeOf:Fn}=Object,Hn=(Gn=Object.create(null),e=>{const t=Kn.call(e);return Gn[t]||(Gn[t]=t.slice(8,-1).toLowerCase())});var Gn;const Bn=e=>(e=e.toLowerCase(),t=>Hn(t)===e),xn=e=>t=>typeof t===e,{isArray:Vn}=Array,jn=xn("undefined"),Wn=Bn("ArrayBuffer"),$n=xn("string"),qn=xn("function"),Yn=xn("number"),Jn=e=>null!==e&&"object"==typeof e,zn=e=>{if("object"!==Hn(e))return!1;const t=Fn(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},Qn=Bn("Date"),Xn=Bn("File"),Zn=Bn("Blob"),eo=Bn("FileList"),to=Bn("URLSearchParams");function no(e,t,{allOwnKeys:n=!1}={}){if(null==e)return;let o,i;if("object"!=typeof e&&(e=[e]),Vn(e))for(o=0,i=e.length;o<i;o++)t.call(null,e[o],o,e);else{const i=n?Object.getOwnPropertyNames(e):Object.keys(e),a=i.length;let r;for(o=0;o<a;o++)r=i[o],t.call(null,e[r],r,e)}}function oo(e,t){t=t.toLowerCase();const n=Object.keys(e);let o,i=n.length;for(;i-- >0;)if(o=n[i],t===o.toLowerCase())return o;return null}const io="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,ao=e=>!jn(e)&&e!==io,ro=(so="undefined"!=typeof Uint8Array&&Fn(Uint8Array),e=>so&&e instanceof so);var so;const co=Bn("HTMLFormElement"),_o=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),uo=Bn("RegExp"),lo=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),o={};no(n,((n,i)=>{!1!==t(n,i,e)&&(o[i]=n)})),Object.defineProperties(e,o)},po="abcdefghijklmnopqrstuvwxyz",mo="0123456789",fo={DIGIT:mo,ALPHA:po,ALPHA_DIGIT:po+po.toUpperCase()+mo},ho=Bn("AsyncFunction");var Eo={isArray:Vn,isArrayBuffer:Wn,isBuffer:function(e){return null!==e&&!jn(e)&&null!==e.constructor&&!jn(e.constructor)&&qn(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||qn(e.append)&&("formdata"===(t=Hn(e))||"object"===t&&qn(e.toString)&&"[object FormData]"==""+e))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Wn(e.buffer),t},isString:$n,isNumber:Yn,isBoolean:e=>!0===e||!1===e,isObject:Jn,isPlainObject:zn,isUndefined:jn,isDate:Qn,isFile:Xn,isBlob:Zn,isRegExp:uo,isFunction:qn,isStream:e=>Jn(e)&&qn(e.pipe),isURLSearchParams:to,isTypedArray:ro,isFileList:eo,forEach:no,merge:function e(){const{caseless:t}=ao(this)&&this||{},n={},o=(o,i)=>{const a=t&&oo(n,i)||i;n[a]=zn(n[a])&&zn(o)?e(n[a],o):zn(o)?e({},o):Vn(o)?o.slice():o};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&no(arguments[e],o);return n},extend:(e,t,n,{allOwnKeys:o}={})=>(no(t,((t,o)=>{e[o]=n&&qn(t)?Mn(t,n):t}),{allOwnKeys:o}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,o)=>{e.prototype=Object.create(t.prototype,o),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,o)=>{let i,a,r;const s={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),a=i.length;a-- >0;)r=i[a],o&&!o(r,e,t)||s[r]||(t[r]=e[r],s[r]=!0);e=!1!==n&&Fn(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:Hn,kindOfTest:Bn,endsWith:(e,t,n)=>{e+="",(void 0===n||n>e.length)&&(n=e.length);const o=e.indexOf(t,n-=t.length);return-1!==o&&o===n},toArray:e=>{if(!e)return null;if(Vn(e))return e;let t=e.length;if(!Yn(t))return null;const n=Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let o;for(;(o=n.next())&&!o.done;){const n=o.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const o=[];for(;null!==(n=e.exec(t));)o.push(n);return o},isHTMLForm:co,hasOwnProperty:_o,hasOwnProp:_o,reduceDescriptors:lo,freezeMethods:e=>{lo(e,((t,n)=>{if(qn(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;qn(e[n])&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},o=e=>{e.forEach((e=>{n[e]=!0}))};return Vn(e)?o(e):o((e+"").split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>Number.isFinite(e=+e)?e:t,findKey:oo,global:io,isContextDefined:ao,ALPHABET:fo,generateString:(e=16,t=fo.ALPHA_DIGIT)=>{let n="";const{length:o}=t;for(;e--;)n+=t[Math.random()*o|0];return n},isSpecCompliantForm:function(e){return!!(e&&qn(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=[,,,,,,,,,,],n=(e,o)=>{if(Jn(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[o]=e;const i=Vn(e)?[]:{};return no(e,((e,t)=>{const a=n(e,o+1);!jn(a)&&(i[t]=a)})),t[o]=void 0,i}}return e};return n(e,0)},isAsyncFn:ho,isThenable:e=>e&&(Jn(e)||qn(e))&&qn(e.then)&&qn(e.catch)};function wo(e,t,n,o,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),o&&(this.request=o),i&&(this.response=i)}Eo.inherits(wo,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Eo.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const go=wo.prototype,yo={};function Io(e){return Eo.isPlainObject(e)||Eo.isArray(e)}function So(e){return Eo.endsWith(e,"[]")?e.slice(0,-2):e}function Oo(e,t,n){return e?e.concat(t).map((function(e,t){return e=So(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{yo[e]={value:e}})),Object.defineProperties(wo,yo),Object.defineProperty(go,"isAxiosError",{value:!0}),wo.from=(e,t,n,o,i,a)=>{const r=Object.create(go);return Eo.toFlatObject(e,r,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),wo.call(r,e.message,t,n,o,i),r.cause=e,r.name=e.name,a&&Object.assign(r,a),r};const ko=Eo.toFlatObject(Eo,{},null,(function(e){return/^is[A-Z]/.test(e)}));function No(e,t,n){if(!Eo.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const o=(n=Eo.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!Eo.isUndefined(t[e])}))).metaTokens,i=n.visitor||_,a=n.dots,r=n.indexes,s=(n.Blob||"undefined"!=typeof Blob&&Blob)&&Eo.isSpecCompliantForm(t);if(!Eo.isFunction(i))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if(Eo.isDate(e))return e.toISOString();if(!s&&Eo.isBlob(e))throw new wo("Blob is not supported. Use a Buffer instead.");return Eo.isArrayBuffer(e)||Eo.isTypedArray(e)?s&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function _(e,n,i){let s=e;if(e&&!i&&"object"==typeof e)if(Eo.endsWith(n,"{}"))n=o?n:n.slice(0,-2),e=JSON.stringify(e);else if(Eo.isArray(e)&&function(e){return Eo.isArray(e)&&!e.some(Io)}(e)||(Eo.isFileList(e)||Eo.endsWith(n,"[]"))&&(s=Eo.toArray(e)))return n=So(n),s.forEach((function(e,o){!Eo.isUndefined(e)&&null!==e&&t.append(!0===r?Oo([n],o,a):null===r?n:n+"[]",c(e))})),!1;return!!Io(e)||(t.append(Oo(i,n,a),c(e)),!1)}const u=[],l=Object.assign(ko,{defaultVisitor:_,convertValue:c,isVisitable:Io});if(!Eo.isObject(e))throw new TypeError("data must be an object");return function e(n,o){if(!Eo.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+o.join("."));u.push(n),Eo.forEach(n,(function(n,a){!0===(!(Eo.isUndefined(n)||null===n)&&i.call(t,n,Eo.isString(a)?a.trim():a,o,l))&&e(n,o?o.concat(a):[a])})),u.pop()}}(e),t}function Po(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function To(e,t){this._pairs=[],e&&No(e,this,t)}const vo=To.prototype;function bo(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Ro(e,t,n){if(!t)return e;const o=n&&n.encode||bo,i=n&&n.serialize;let a;if(a=i?i(t,n):Eo.isURLSearchParams(t)?""+t:new To(t,n).toString(o),a){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+a}return e}vo.append=function(e,t){this._pairs.push([e,t])},vo.toString=function(e){const t=e?function(t){return e.call(this,t,Po)}:Po;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};var Ao=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Eo.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},Co={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Lo={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:To,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},isStandardBrowserEnv:(()=>{let e;return("undefined"==typeof navigator||"ReactNative"!==(e=navigator.product)&&"NativeScript"!==e&&"NS"!==e)&&"undefined"!=typeof window&&"undefined"!=typeof document})(),isStandardBrowserWebWorkerEnv:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,protocols:["http","https","file","blob","url","data"]};function Uo(e){function t(e,n,o,i){let a=e[i++];const r=Number.isFinite(+a),s=i>=e.length;return a=!a&&Eo.isArray(o)?o.length:a,s?(o[a]=Eo.hasOwnProp(o,a)?[o[a],n]:n,!r):(o[a]&&Eo.isObject(o[a])||(o[a]=[]),t(e,n,o[a],i)&&Eo.isArray(o[a])&&(o[a]=function(e){const t={},n=Object.keys(e);let o;const i=n.length;let a;for(o=0;o<i;o++)a=n[o],t[a]=e[a];return t}(o[a])),!r)}if(Eo.isFormData(e)&&Eo.isFunction(e.entries)){const n={};return Eo.forEachEntry(e,((e,o)=>{t(function(e){return Eo.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),o,n,0)})),n}return null}const Do={"Content-Type":void 0},Mo={transitional:Co,adapter:["xhr","http"],transformRequest:[function(e,t){const n=t.getContentType()||"",o=n.indexOf("application/json")>-1,i=Eo.isObject(e);if(i&&Eo.isHTMLForm(e)&&(e=new FormData(e)),Eo.isFormData(e))return o&&o?JSON.stringify(Uo(e)):e;if(Eo.isArrayBuffer(e)||Eo.isBuffer(e)||Eo.isStream(e)||Eo.isFile(e)||Eo.isBlob(e))return e;if(Eo.isArrayBufferView(e))return e.buffer;if(Eo.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),""+e;let a;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return""+function(e,t){return No(e,new Lo.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,o){return Lo.isNode&&Eo.isBuffer(e)?(this.append(t,e.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer);if((a=Eo.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return No(a?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||o?(t.setContentType("application/json",!1),function(e,t,n){if(Eo.isString(e))try{return(0,JSON.parse)(e),Eo.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Mo.transitional,n=t&&t.forcedJSONParsing,o="json"===this.responseType;if(e&&Eo.isString(e)&&(n&&!this.responseType||o)){const n=!(t&&t.silentJSONParsing)&&o;try{return JSON.parse(e)}catch(e){if(n){if("SyntaxError"===e.name)throw wo.from(e,wo.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Lo.classes.FormData,Blob:Lo.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Eo.forEach(["delete","get","head"],(function(e){Mo.headers[e]={}})),Eo.forEach(["post","put","patch"],(function(e){Mo.headers[e]=Eo.merge(Do)}));var Ko=Mo;const Fo=Eo.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Ho=Symbol("internals");function Go(e){return e&&(e+"").trim().toLowerCase()}function Bo(e){return!1===e||null==e?e:Eo.isArray(e)?e.map(Bo):e+""}function xo(e,t,n,o,i){return Eo.isFunction(o)?o.call(this,t,n):(i&&(t=n),Eo.isString(t)?Eo.isString(o)?-1!==t.indexOf(o):Eo.isRegExp(o)?o.test(t):void 0:void 0)}class Vo{constructor(e){e&&this.set(e)}set(e,t,n){const o=this;function i(e,t,n){const i=Go(t);if(!i)throw Error("header name must be a non-empty string");const a=Eo.findKey(o,i);(!a||void 0===o[a]||!0===n||void 0===n&&!1!==o[a])&&(o[a||t]=Bo(e))}const a=(e,t)=>Eo.forEach(e,((e,n)=>i(e,n,t)));return Eo.isPlainObject(e)||e instanceof this.constructor?a(e,t):Eo.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?a((e=>{const t={};let n,o,i;return e&&e.split("\n").forEach((function(e){i=e.indexOf(":"),n=e.substring(0,i).trim().toLowerCase(),o=e.substring(i+1).trim(),!n||t[n]&&Fo[n]||("set-cookie"===n?t[n]?t[n].push(o):t[n]=[o]:t[n]=t[n]?t[n]+", "+o:o)})),t})(e),t):null!=e&&i(t,e,n),this}get(e,t){if(e=Go(e)){const n=Eo.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=n.exec(e);)t[o[1]]=o[2];return t}(e);if(Eo.isFunction(t))return t.call(this,e,n);if(Eo.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Go(e)){const n=Eo.findKey(this,e);return!(!n||void 0===this[n]||t&&!xo(0,this[n],n,t))}return!1}delete(e,t){const n=this;let o=!1;function i(e){if(e=Go(e)){const i=Eo.findKey(n,e);!i||t&&!xo(0,n[i],i,t)||(delete n[i],o=!0)}}return Eo.isArray(e)?e.forEach(i):i(e),o}clear(e){const t=Object.keys(this);let n=t.length,o=!1;for(;n--;){const i=t[n];e&&!xo(0,this[i],i,e,!0)||(delete this[i],o=!0)}return o}normalize(e){const t=this,n={};return Eo.forEach(this,((o,i)=>{const a=Eo.findKey(n,i);if(a)return t[a]=Bo(o),void delete t[i];const r=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(i):(i+"").trim();r!==i&&delete t[i],t[r]=Bo(o),n[r]=!0})),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return Eo.forEach(this,((n,o)=>{null!=n&&!1!==n&&(t[o]=e&&Eo.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,t])=>e+": "+t)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach((e=>n.set(e))),n}static accessor(e){const t=(this[Ho]=this[Ho]={accessors:{}}).accessors,n=this.prototype;function o(e){const o=Go(e);t[o]||(function(e,t){const n=Eo.toCamelCase(" "+t);["get","set","has"].forEach((o=>{Object.defineProperty(e,o+n,{value:function(e,n,i){return this[o].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[o]=!0)}return Eo.isArray(e)?e.forEach(o):o(e),this}}Vo.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Eo.freezeMethods(Vo.prototype),Eo.freezeMethods(Vo);var jo=Vo;function Wo(e,t){const n=this||Ko,o=t||n,i=jo.from(o.headers);let a=o.data;return Eo.forEach(e,(function(e){a=e.call(n,a,i.normalize(),t?t.status:void 0)})),i.normalize(),a}function $o(e){return!(!e||!e.__CANCEL__)}function qo(e,t,n){wo.call(this,null==e?"canceled":e,wo.ERR_CANCELED,t,n),this.name="CanceledError"}Eo.inherits(qo,wo,{__CANCEL__:!0});var Yo=Lo.isStandardBrowserEnv?{write:function(e,t,n,o,i,a){const r=[];r.push(e+"="+encodeURIComponent(t)),Eo.isNumber(n)&&r.push("expires="+new Date(n).toGMTString()),Eo.isString(o)&&r.push("path="+o),Eo.isString(i)&&r.push("domain="+i),!0===a&&r.push("secure"),document.cookie=r.join("; ")},read:function(e){const t=document.cookie.match(RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function Jo(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}var zo=Lo.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let n;function o(n){let o=n;return e&&(t.setAttribute("href",o),o=t.href),t.setAttribute("href",o),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return n=o(window.location.href),function(e){const t=Eo.isString(e)?o(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return!0};function Qo(e,t){let n=0;const o=function(e,t){const n=Array(e=e||10),o=Array(e);let i,a=0,r=0;return t=void 0!==t?t:1e3,function(s){const c=Date.now(),_=o[r];i||(i=c),n[a]=s,o[a]=c;let u=r,l=0;for(;u!==a;)l+=n[u++],u%=e;if(a=(a+1)%e,a===r&&(r=(r+1)%e),c-i<t)return;const d=_&&c-_;return d?Math.round(1e3*l/d):void 0}}(50,250);return i=>{const a=i.loaded,r=i.lengthComputable?i.total:void 0,s=a-n,c=o(s);n=a;const _={loaded:a,total:r,progress:r?a/r:void 0,bytes:s,rate:c||void 0,estimated:c&&r&&a<=r?(r-a)/c:void 0,event:i};_[t?"download":"upload"]=!0,e(_)}}const Xo={http:null,xhr:"undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){let o=e.data;const i=jo.from(e.headers).normalize(),a=e.responseType;let r;function s(){e.cancelToken&&e.cancelToken.unsubscribe(r),e.signal&&e.signal.removeEventListener("abort",r)}Eo.isFormData(o)&&(Lo.isStandardBrowserEnv||Lo.isStandardBrowserWebWorkerEnv?i.setContentType(!1):i.setContentType("multipart/form-data;",!1));let c=new XMLHttpRequest;e.auth&&i.set("Authorization","Basic "+btoa((e.auth.username||"")+":"+(e.auth.password?unescape(encodeURIComponent(e.auth.password)):"")));const _=Jo(e.baseURL,e.url);function u(){if(!c)return;const o=jo.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders());!function(e,t,n){const o=n.config.validateStatus;n.status&&o&&!o(n.status)?t(new wo("Request failed with status code "+n.status,[wo.ERR_BAD_REQUEST,wo.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}((function(e){t(e),s()}),(function(e){n(e),s()}),{data:a&&"text"!==a&&"json"!==a?c.response:c.responseText,status:c.status,statusText:c.statusText,headers:o,config:e,request:c}),c=null}if(c.open(e.method.toUpperCase(),Ro(_,e.params,e.paramsSerializer),!0),c.timeout=e.timeout,"onloadend"in c?c.onloadend=u:c.onreadystatechange=function(){c&&4===c.readyState&&(0!==c.status||c.responseURL&&0===c.responseURL.indexOf("file:"))&&setTimeout(u)},c.onabort=function(){c&&(n(new wo("Request aborted",wo.ECONNABORTED,e,c)),c=null)},c.onerror=function(){n(new wo("Network Error",wo.ERR_NETWORK,e,c)),c=null},c.ontimeout=function(){let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new wo(t,(e.transitional||Co).clarifyTimeoutError?wo.ETIMEDOUT:wo.ECONNABORTED,e,c)),c=null},Lo.isStandardBrowserEnv){const t=(e.withCredentials||zo(_))&&e.xsrfCookieName&&Yo.read(e.xsrfCookieName);t&&i.set(e.xsrfHeaderName,t)}void 0===o&&i.setContentType(null),"setRequestHeader"in c&&Eo.forEach(i.toJSON(),(function(e,t){c.setRequestHeader(t,e)})),Eo.isUndefined(e.withCredentials)||(c.withCredentials=!!e.withCredentials),a&&"json"!==a&&(c.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&c.addEventListener("progress",Qo(e.onDownloadProgress,!0)),"function"==typeof e.onUploadProgress&&c.upload&&c.upload.addEventListener("progress",Qo(e.onUploadProgress)),(e.cancelToken||e.signal)&&(r=t=>{c&&(n(!t||t.type?new qo(null,e,c):t),c.abort(),c=null)},e.cancelToken&&e.cancelToken.subscribe(r),e.signal&&(e.signal.aborted?r():e.signal.addEventListener("abort",r)));const l=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(_);l&&-1===Lo.protocols.indexOf(l)?n(new wo("Unsupported protocol "+l+":",wo.ERR_BAD_REQUEST,e)):c.send(o||null)}))}};function Zo(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new qo(null,e)}function ei(e){return Zo(e),e.headers=jo.from(e.headers),e.data=Wo.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),(e=>{e=Eo.isArray(e)?e:[e];const{length:t}=e;let n,o;for(let i=0;i<t&&(n=e[i],!(o=Eo.isString(n)?Xo[n.toLowerCase()]:n));i++);if(!o){if(!1===o)throw new wo(`Adapter ${n} is not supported by the environment`,"ERR_NOT_SUPPORT");throw Error(Eo.hasOwnProp(Xo,n)?`Adapter '${n}' is not available in the build`:`Unknown adapter '${n}'`)}if(!Eo.isFunction(o))throw new TypeError("adapter is not a function");return o})(e.adapter||Ko.adapter)(e).then((function(t){return Zo(e),t.data=Wo.call(e,e.transformResponse,t),t.headers=jo.from(t.headers),t}),(function(t){return $o(t)||(Zo(e),t&&t.response&&(t.response.data=Wo.call(e,e.transformResponse,t.response),t.response.headers=jo.from(t.response.headers))),Promise.reject(t)}))}Eo.forEach(Xo,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}}));const ti=e=>e instanceof jo?e.toJSON():e;function ni(e,t){const n={};function o(e,t,n){return Eo.isPlainObject(e)&&Eo.isPlainObject(t)?Eo.merge.call({caseless:n},e,t):Eo.isPlainObject(t)?Eo.merge({},t):Eo.isArray(t)?t.slice():t}function i(e,t,n){return Eo.isUndefined(t)?Eo.isUndefined(e)?void 0:o(void 0,e,n):o(e,t,n)}function a(e,t){if(!Eo.isUndefined(t))return o(void 0,t)}function r(e,t){return Eo.isUndefined(t)?Eo.isUndefined(e)?void 0:o(void 0,e):o(void 0,t)}function s(n,i,a){return a in t?o(n,i):a in e?o(void 0,n):void 0}const c={url:a,method:a,data:a,baseURL:r,transformRequest:r,transformResponse:r,paramsSerializer:r,timeout:r,timeoutMessage:r,withCredentials:r,adapter:r,responseType:r,xsrfCookieName:r,xsrfHeaderName:r,onUploadProgress:r,onDownloadProgress:r,decompress:r,maxContentLength:r,maxBodyLength:r,beforeRedirect:r,transport:r,httpAgent:r,httpsAgent:r,cancelToken:r,socketPath:r,responseEncoding:r,validateStatus:s,headers:(e,t)=>i(ti(e),ti(t),!0)};return Eo.forEach(Object.keys(Object.assign({},e,t=t||{})),(function(o){const a=c[o]||i,r=a(e[o],t[o],o);Eo.isUndefined(r)&&a!==s||(n[o]=r)})),n}const oi={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{oi[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const ii={};oi.transitional=function(e,t,n){function o(e,t){return"[Axios v1.4.0] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,a)=>{if(!1===e)throw new wo(o(i," has been removed"+(t?" in "+t:"")),wo.ERR_DEPRECATED);return t&&!ii[i]&&(ii[i]=!0),!e||e(n,i,a)}};var ai={assertOptions:function(e,t,n){if("object"!=typeof e)throw new wo("options must be an object",wo.ERR_BAD_OPTION_VALUE);const o=Object.keys(e);let i=o.length;for(;i-- >0;){const a=o[i],r=t[a];if(r){const t=e[a],n=void 0===t||r(t,a,e);if(!0!==n)throw new wo("option "+a+" must be "+n,wo.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new wo("Unknown option "+a,wo.ERR_BAD_OPTION)}},validators:oi};const ri=ai.validators;class si{constructor(e){this.defaults=e,this.interceptors={request:new Ao,response:new Ao}}request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=ni(this.defaults,t);const{transitional:n,paramsSerializer:o,headers:i}=t;let a;void 0!==n&&ai.assertOptions(n,{silentJSONParsing:ri.transitional(ri.boolean),forcedJSONParsing:ri.transitional(ri.boolean),clarifyTimeoutError:ri.transitional(ri.boolean)},!1),null!=o&&(Eo.isFunction(o)?t.paramsSerializer={serialize:o}:ai.assertOptions(o,{encode:ri.function,serialize:ri.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase(),a=i&&Eo.merge(i.common,i[t.method]),a&&Eo.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete i[e]})),t.headers=jo.concat(a,i);const r=[];let s=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(s=s&&e.synchronous,r.unshift(e.fulfilled,e.rejected))}));const c=[];let _;this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)}));let u,l=0;if(!s){const e=[ei.bind(this),void 0];for(e.unshift.apply(e,r),e.push.apply(e,c),u=e.length,_=Promise.resolve(t);l<u;)_=_.then(e[l++],e[l++]);return _}u=r.length;let d=t;for(l=0;l<u;){const t=r[l++],n=r[l++];try{d=t(d)}catch(e){n.call(this,e);break}}try{_=ei(d)}catch(e){return Promise.reject(e)}for(l=0,u=c.length;l<u;)_=_.then(c[l++],c[l++]);return _}getUri(e){return Ro(Jo((e=ni(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}Eo.forEach(["delete","get","head","options"],(function(e){si.prototype[e]=function(t,n){return this.request(ni(n||{},{method:e,url:t,data:(n||{}).data}))}})),Eo.forEach(["post","put","patch"],(function(e){function t(t){return function(n,o,i){return this.request(ni(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:o}))}}si.prototype[e]=t(),si.prototype[e+"Form"]=t(!0)}));var ci=si;class _i{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const o=new Promise((e=>{n.subscribe(e),t=e})).then(e);return o.cancel=function(){n.unsubscribe(t)},o},e((function(e,o,i){n.reason||(n.reason=new qo(e,o,i),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let e;return{token:new _i((function(t){e=t})),cancel:e}}}var ui=_i;const li={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(li).forEach((([e,t])=>{li[t]=e}));var di=li;const pi=function e(t){const n=new ci(t),o=Mn(ci.prototype.request,n);return Eo.extend(o,ci.prototype,n,{allOwnKeys:!0}),Eo.extend(o,n,null,{allOwnKeys:!0}),o.create=function(n){return e(ni(t,n))},o}(Ko);pi.Axios=ci,pi.CanceledError=qo,pi.CancelToken=ui,pi.isCancel=$o,pi.VERSION="1.4.0",pi.toFormData=No,pi.AxiosError=wo,pi.Cancel=pi.CanceledError,pi.all=function(e){return Promise.all(e)},pi.spread=function(e){return function(t){return e.apply(null,t)}},pi.isAxiosError=function(e){return Eo.isObject(e)&&!0===e.isAxiosError},pi.mergeConfig=ni,pi.AxiosHeaders=jo,pi.formToJSON=e=>Uo(Eo.isHTMLForm(e)?new FormData(e):e),pi.HttpStatusCode=di,pi.default=pi;var mi=pi;const fi=e=>{let t=RegExp(e+"=([^;]+)").exec(document.cookie);return null!=t?unescape(t[1]):null},hi=e=>{var t=RegExp((e||"_sp_")+"id\\.[a-f0-9]+=([^;]+);?"),n=document.cookie.match(t);if(n&&n.length>0&&n[1]){var o=n[1].split(".");return{domain_userid:o[0],domain_sessionidx:o[2],domain_sessionid:o[5]}}return!1},Ei=(e,t)=>{const{response:n}=t||{},o=n?.data,i=n?.status;Dn({category:un,action:"error",label:`Error in ${e} cart with error_code ${i}`,property:o&&t?.stack?`Error in ${e} cart with error_code ${i}`:"NA",analyticEvent:dn})},wi=async e=>{let t=null,n=null,o=null;try{const{data:e}=await mi.get("/cart.js");n=e,t=e?.token}catch(e){Ei("getting",e)}if(!t)try{o=(await mi.post("/cart/update.json",{attributes:{domain_userid:e,network_userid:fi("sp")||null,domain_sessionid:hi().domain_sessionid||null}},{headers:{"Content-Type":"application/json",Accept:"application/json"}})).data,t=o?.token}catch(e){Ei("updating",e)}return t||Dn({category:un,action:"not_found",label:n?JSON.stringify(n):"NA",property:o?JSON.stringify(o):"NA",analyticEvent:dn}),t};async function gi(e){let t=await wi(e);if(t)return{schema:tn.cart,data:{id:t,token:t}}}function yi(){const e=wn(ln.IS_PAGE_PING_ENABLED);e&&window.snowplow("enableActivityTracking",{minimumVisitLength:parseInt(e.minimumVisitLength),heartbeatDelay:parseInt(e.heartbeatDelay)})}async function Ii(e=null){vn()||(Nn()&&!e?.type?async function(){let e=await kn();e?.phoneData?.phoneNumber?.value||(e=Pn()),e?.userId&&window.snowplow("setUserId",e?.userId),window.snowplow((async function(){let t=this.gkwkkp.getDomainUserId();t&&yn(nn,t);let n=[],o=await gi(t);o&&n.push(o);const i=Rn(Nn());i&&n.push(i);const a=An(gn(_n));a&&n.push(a);const r=Cn(e);r&&n.push(r);const s=Un();s&&n.push(s),yi();const c="undefined"!=typeof window&&window.screen&&Number.isFinite(window.screen.width)?window.screen.width:0,_="undefined"!=typeof window&&window.screen&&Number.isFinite(window.screen.height)?window.screen.height:0;n.length?window.snowplow("trackPageView:gkwkkp",{context:n,res:`${c}x${_}`,dvce_screenwidth:c,dvce_screenheight:_}):window.snowplow("trackPageView:gkwkkp",{res:`${c}x${_}`,dvce_screenwidth:c,dvce_screenheight:_})}))}():e&&async function(e){let t=await kn();t?.phoneData?.phoneNumber?.value||(t=Pn());let n=t?.userId;n&&window.snowplow("setUserId",n),window.snowplow((async function(){let n=this.gkwkkp.getDomainUserId();n&&yn(nn,n);let o=[];const i=Cn(t);i&&o.push(i);const a=An(gn(_n));a&&o.push(a);const r=Rn(Nn());r&&o.push(r),e?.data?.cart_id&&o.push({schema:tn.cart,data:{id:e.data.cart_id+"",token:e.data?.cart_id+""}}),e?.data&&delete e.data.cart_id;let s={};"product"===e?.type&&e?.data?(e.data?.product_id&&(s.product_id=e.data.product_id+""),e.data?.image_url&&(s.img_url=e.data.image_url+""),e.data?.variant_id&&(s.variant_id=e.data.variant_id+""),e.data?.name&&(s.product_name=e.data.name+""),e.data?.price&&(s.product_price=e.data.price+""),e.data?.product_currency&&(s.product_currency=e.data.product_currency+""),e.data?.handle&&(s.product_handle=(e.data.handle+"").substring(0,250))):"collection"===e?.type&&e?.data?(e.data?.collection_id&&(s.collection_id=e.data.collection_id+""),e.data?.image_url&&(s.img_url=e.data.image_url+""),e.data?.name&&(s.collection_name=(e.data.name+"").substring(0,250)),e.data?.handle&&(s.collection_handle=(e.data.handle+"").substring(0,250))):"cart"===e?.type&&e?.data&&(e?.data?.cart_id&&(s.cart_id=e.data.cart_id+""),e?.data?.product_id&&(s.product_id=e.data.product_id+""),e?.data?.variant_id&&(s.variant_id=e.data.variant_id+""),e?.data?.image_url&&(s.image_url=e.data.image_url+""),e?.data?.name&&(s.name=e.data.name+""),e?.data?.price&&(s.price=e.data.price+""),e?.data?.handle&&(s.handle=e.data.handle+""),e?.data?.product_quantity&&(s.product_quantity=e.data.product_quantity+"")),e?.type&&o.push({schema:tn.product,data:{...s,type:e.type}}),yi();const c="undefined"!=typeof window&&window.screen&&Number.isFinite(window.screen.width)?window.screen.width:0,_="undefined"!=typeof window&&window.screen&&Number.isFinite(window.screen.height)?window.screen.height:0;o.length?window.snowplow("trackPageView:gkwkkp",{context:o,res:`${c}x${_}`,dvce_screenwidth:c,dvce_screenheight:_}):window.snowplow("trackPageView:gkwkkp",{res:`${c}x${_}`,dvce_screenwidth:c,dvce_screenheight:_})}))}(e))}function Si(e){return{schema:tn.structured,data:In({...e,...Sn()})}}function Oi(e,t){"function"==typeof window.snowplow&&window.snowplow((function(){try{window.snowplow("trackSelfDescribingEvent:gkwkkp",{event:e,context:t})}catch(e){}}))}const ki=async e=>{let t=[],n=await kn();n?.phoneData?.phoneNumber?.value||(n=Pn());const o=Cn(n);o&&t.push(o);const i=Un();i&&t.push(i);let a=En(nn),r=await gi(a);r&&t.push(r);const s=On();let c={...Si({category:"cart_event",label:"add_to_cart",action:"click",value:s?.phoneNumber?.value,country_code:s?.phoneNumber?.country_code||"+91"})},_={...Si({category:"cart_event",label:"cart_update",action:"click",value:s?.phoneNumber?.value,country_code:s?.phoneNumber?.country_code||"+91"})};const u=Rn(Nn());u&&t.push(u),e&&Oi(c,t),Oi(_,t)},Ni=()=>{let e=!0;try{const t=window.fetch;window.fetch=async function(...n){const[o,i]=n;if("string"==typeof o&&(o.includes("/cart/add")||o.includes("/cart/update.js")||o.includes("/cart/change.js"))&&"POST"===i?.method?.toUpperCase()){e=o.includes("/cart/add");const i=await t.apply(this,n);return i.clone().json().then((async t=>{await ki(e)})).catch((()=>{})),i}return t.apply(this,n)};const n=XMLHttpRequest.prototype.open,o=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.open=function(t,o,...i){return e=o.includes("/cart/add"),this._isCartModificationRequest="POST"===t&&(o.includes("/cart/add")||o.includes("/cart/update.js")||o.includes("/cart/change.js")),n.call(this,t,o,...i)},XMLHttpRequest.prototype.send=function(t){return this._isCartModificationRequest&&this.addEventListener("load",(async function(){await ki(e)})),o.call(this,t)}}catch(e){}},Pi={init:function(e=null){if(!(e=>!e||(window.kwik_analytics_app_id=e,!1))(window?.merchantInfo?.mid||e))return new Promise(((e,t)=>{try{n=window,o=document,i="script",n[a="snowplow"]?e():(n.GlobalSnowplowNamespace=n.GlobalSnowplowNamespace||[],n.GlobalSnowplowNamespace.push(a),n[a]=function(){(n[a].q=n[a].q||[]).push(arguments)},n[a].q=n[a].q||[],r=o.createElement(i),s=o.getElementsByTagName(i)[0],r.async=1,r.src="https://cdn.jsdelivr.net/npm/@snowplow/javascript-tracker@3.15.0/dist/sp.min.js",s.parentNode.insertBefore(r,s),r.onload=e,r.onerror=t),async function(e){if(!window.snowplow)return!1;try{const e=window?.merchantInfo?.mid||window?.kwik_analytics_app_id,t="gokwikproduction.kwikpass.gokwik.in"?.includes(e)?"gokwikproduction.kwikpass.gokwik.in":"sp-kf-collector-prod.gokwik.io";window.snowplow("newTracker","gkwkkp",t||"sp-kf-collector-prod.gokwik.io",{appId:""+e,discoverRootDomain:!0,cookieSameSite:"Lax",contexts:{webPage:!0,performanceTiming:!0}});let n=gn(on);return n&&window.snowplow("setUserId",n),await Ii(),!0}catch(e){return!1}}(),Nn()&&Ni()}catch(e){t(e)}var n,o,i,a,r,s}))},trackPageViewEvent:Ii,trackEvent:async e=>{if(vn())return;const t=[];let n=await kn();n?.phoneData?.phoneNumber?.value||(n=Pn());let o={category:e?.category,label:e?.name,action:e?.action,...e?.attributes&&Object.keys(e.attributes).length>0&&{meta:e?.attributes}};n?.phoneData?.phoneNumber?.value&&(o.property="phoneNumber",o.value=n?.phoneData?.phoneNumber?.value,o.country_code=n?.phoneData?.phoneNumber?.country_code),o={...o};let i={...Si(o)};const a=Rn(Nn());if(a&&t.push(a),n){const e=Cn(n);e&&t.push(e)}"function"==typeof window.snowplow&&window.snowplow((function(){try{window.snowplow("trackSelfDescribingEvent:gkwkkp",{event:i,context:t})}catch(e){}}))},userLogin:async function(e){if(vn())return;const{phone:t,email:n,country_code:o}=e,i=[];let a={category:e?.type,label:e?.name,action:e?.action};if((e=>{let{phone:t,country_code:n,email:o}=e;const i={phoneData:{phoneNumber:{value:t,country_code:n||pn},type:null},email:o};if(t||o){let e=JSON.stringify(i),t=btoa(e).split("").reverse().join(""),n=btoa(t);localStorage.setItem("_kwik_analytics_uid",n)}})(e),e?.phone){let r={schema:tn.user,data:{phone:""+t,type:null,country_code:o||"+91"}};n&&(r.data.email=n),r&&i.push(r),a.property="phoneNumber",a.value=e?.phone}let r={...Si(a)};const s=Rn(Nn());s&&i.push(s),"function"==typeof window.snowplow&&window.snowplow((function(){try{window.snowplow("trackSelfDescribingEvent:gkwkkp",{event:r,context:i})}catch(e){}}))},sendCustomEvent:Dn,setUserAttribute:async function(e){if(vn())return;let t=await kn();t?.phoneData?.phoneNumber?.value||(t=Pn());const n=function(e){return e&&Object.keys(e).length>0?Object.entries(e).map((([e,t])=>({pr_property:e,pr_value:t}))):null}(e);if(!t&&!n)return;const o=[],i=Cn(t);i&&(i.data&&(i.data.user_meta=n),o.push(i));let a={...Si({category:"user_attribute",label:"kc_user_attribute_updated",action:"click"})};const r=Rn(Nn());r&&o.push(r),"function"==typeof window.snowplow&&window.snowplow((function(){try{window.snowplow("trackSelfDescribingEvent:gkwkkp",{event:a,context:o})}catch(e){}}))}};"undefined"!=typeof window&&(window.KwikAnalytics=Pi);const Ti=[zt.EVENTS.SHOPPIFY_LOGGED_IN,zt.EVENTS.SUCCESSFULLY_LOGGED_OUT],vi=[zt.EVENTS.SHOPPIFY_LOGGED_IN,zt.EVENTS.SUCCESSFULLY_LOGGED_OUT],bi=(e,t)=>{const n=t?.rules?.phoneFormat??Ie;let o;"phone"!==t?.identifier&&t?.identifier?"email"===t?.identifier?o=e?.email:"customer_id"===t?.identifier&&(o=e?.customer_id):o=e?.phone&&`${n}${e.phone}`,o&&clevertap.onUserLogin.push({Site:{Phone:e?.phone&&`${n}${e.phone}`,phone_no:e?.phone&&`${n}${e.phone}`,mobile_no:e?.phone&&`${n}${e.phone}`,Identity:o,"MSG-email":!0,"MSG-push":!0,"MSG-sms":!0,"MSG-whatsapp":!0}})},Ri=[zt.EVENTS.WHATSAPP_LOGGED_IN,zt.EVENTS.PHONE_NUMBER_LOGGED_IN,zt.EVENTS.TRUECALLER_LOGGED_IN,zt.EVENTS.SHOPPIFY_LOGGED_IN],Ai=[zt.EVENTS.SHOPPIFY_LOGGED_IN,zt.EVENTS.SUCCESSFULLY_LOGGED_OUT],Ci=[zt.EVENTS.SHOPPIFY_LOGGED_IN,zt.EVENTS.SUCCESSFULLY_LOGGED_OUT],Li=[zt.EVENTS.SHOPPIFY_LOGGED_IN,zt.EVENTS.SUCCESSFULLY_LOGGED_OUT],Ui=[zt.EVENTS.SHOPPIFY_LOGGED_IN,zt.EVENTS.SUCCESSFULLY_LOGGED_OUT],Di=[zt.EVENTS.SHOPPIFY_LOGGED_IN,zt.EVENTS.SUCCESSFULLY_LOGGED_OUT],Mi=(e,t)=>{const n=t?.rules?.phoneFormat??Ie;let o;"phone"!==t?.identifier&&t?.identifier?"email"===t?.identifier?o=e?.email:"customer_id"===t?.identifier&&(o=e?.customer_id):o=e?.phone&&`${n}${e.phone}`,o&&klaviyo.push(["identify",{$email:e?.email,$phone_number:`${n}${e.phone}`}])},Ki=(e,t,n)=>{fetch("https://a.klaviyo.com/client/subscriptions?company_id="+e,{method:"POST",headers:{revision:"2024-10-15","Content-Type":"application/vnd.api+json"},body:JSON.stringify({data:{type:"subscription",attributes:{profile:{data:{type:"profile",attributes:{phone_number:n}}}},relationships:{list:{data:{type:"list",id:t}}}}})}).then((e=>e.json())).then((e=>{})).catch((e=>{}))};let Fi,Hi=[];rt.subscribe((e=>{Hi=e})),yt.subscribe((e=>Fi=e));const Gi=[zt.EVENTS.WHATSAPP_LOGGED_IN,zt.EVENTS.PHONE_NUMBER_LOGGED_IN,zt.EVENTS.TRUECALLER_LOGGED_IN,zt.EVENTS.SHOPPIFY_LOGGED_IN,zt.EVENTS.SUCCESSFULLY_LOGGED_OUT];function Bi(e){const{analyticEvent:t,category:n,label:o,action:i}=e,a=e?.category||e?.modalType?.toLowerCase();if(e.customer_id=Fi||localStorage.getItem("kp_customer_id"),delete e.analyticEvent,n&&o&&i&&Pi.sendCustomEvent(Qt.structured,e),n!==Wt.sso_login){const n=(new Date).toISOString();e.phone=e.value?e.value:null,delete e.value,Hi?.forEach((o=>{o.name===zt.PROVIDERS.NETCORE&&Gi.includes(t)&&function(e,t,n,o){const i=n?.rules?.phoneFormat;try{let a=t?.mail;"email"===n?.identifier?a=t?.mail:"phone"===n?.identifier?a=t?.phone&&`${i}${t.phone}`:"customer_id"===n?.identifier&&(a=t?.customer_id),a&&smartech("identify",a),o&&!Ti.includes(e)&&o!==Re.LOGIN_MODAL&&n?.marketingEvents?.includes(e)?smartech("dispatch",e.replace("kp_","kp_mp_"),t):n?.events?.includes(e)&&smartech("dispatch",e,t)}catch(e){}}(t,e,o,a),o.name===zt.PROVIDERS.CLEVERTAP&&Gi.includes(t)&&(e.Date=n,function(e,t,n,o){try{bi(t,n),o&&!vi.includes(e)&&o!==Re.LOGIN_MODAL&&n?.marketingEvents?.includes(e)?clevertap.event.push(e.replace("kp_","kp_mp_"),t):n?.events?.includes(e)&&clevertap.event.push(e,t)}catch(e){}}(t,e,o,a)),o.name===zt.PROVIDERS.MOENGAGE&&Gi.includes(t)&&(e.Date=n,function(e,t,n,o){const i=n?.rules?.phoneFormat;try{let a=t?.phone&&`${i}${t.phone}`;"email"===n?.identifier?a=t?.mail:"phone"===n?.identifier?a=t?.phone&&`${i}${t.phone}`:"customer_id"===n?.identifier&&(a=t?.customer_id),a&&Ri.includes(e)&&Moengage.add_unique_user_id(a),o&&o!==Re.LOGIN_MODAL&&!Ai.includes(e)&&n?.marketingEvents?.includes(e)?Moengage.track_event(e.replace("kp_","kp_mp_"),t):n?.events?.includes(e)&&Moengage.track_event(e,t),e==zt.EVENTS.SUCCESSFULLY_LOGGED_OUT&&Moengage.destroy_session()}catch(e){}}(t,e,o,a)),o.name===zt.PROVIDERS.WEBENGAGE&&Gi.includes(t)&&(e.Date=n,function(e,t,n,o){const i=n?.rules?.phoneFormat??Ie;try{let a=Object.fromEntries(Object.entries(t).filter((([e,t])=>null!=t)));const{phone:r,email:s}=a;r&&((!n?.identifier||"phone"===n?.identifier)&&webengage.user.login(`${i}${r}`),webengage.user.setAttribute("we_phone",`${i}${r}`)),s&&("email"===n?.identifier&&webengage.user.login(s),webengage.user.setAttribute("we_email",s)),webengage.user.setAttribute("user_tag","kwikPass"),o&&!Ci.includes(e)&&o!==Re.LOGIN_MODAL&&n?.marketingEvents?.includes(e)?webengage.track(e.replace("kp_","kp_mp_"),a):n?.events?.includes(e)&&webengage.track(e,a)}catch(e){}}(t,e,o,a)),o.name===zt.PROVIDERS.GOOGLE_ANALYTICS&&Gi.includes(t)&&function(e,t,n,o){try{o&&!Li.includes(e)&&o!==Re.LOGIN_MODAL&&n?.marketingEvents?.includes(e)?gtag("event",e.replace("kp_","kp_mp_"),t):n?.events?.includes(e)&&gtag("event",e,t)}catch(e){}}(t,e,o,a),o.name===zt.PROVIDERS.META_PIXEL&&Gi.includes(t)&&function(e,t,n,o){try{o&&!Ui.includes(e)&&o!==Re.LOGIN_MODAL&&n?.marketingEvents?.includes(e)?fbq("trackCustom",e.replace("kp_","kp_mp_"),t):n?.events?.includes(e)&&fbq("trackCustom",e,t)}catch(e){}}(t,e,o,a),o.name===zt.PROVIDERS.KlAVIYO&&Gi.includes(t)&&(e.isNotificationChecked=JSON.parse($a(oe.kp_notification_checked)),function(e,t,n,o){const i=n?.rules?.phoneFormat??Ie,{isNotificationChecked:a}=t,{token:r,list_id:s}=n?.config;try{const c={phone_number:`${i}${t.phone}`,email:t.email};Mi(t,n),o&&o!==Re.LOGIN_MODAL&&!Di.includes(e)&&n?.marketingEvents?.includes(e)?klaviyo.push(["track",e.replace("kp_","kp_mp_"),c]):n?.events?.includes(e)&&klaviyo.push(["track",e,c]),a&&r&&s&&Ki(r,s,c.phone_number)}catch(e){}}(t,e,o,a))}))}}const xi=async(e=null,t,n,o,i,a,r)=>{try{const n=window.merchantInfo,o=n.mid;if(!n||!o)return;if(!window.fbq)return;const i=await ps(window.merchantInfo.mid),s=await hs(),c=i?.thirdPartyServiceProviders?.find((e=>e?.name===Ne.metas2s)),_=s?.customEvents?.filter((e=>"KP_CUSTOM"===e?.type)).map((e=>e?.name));let u;_?.length>0&&(u={events:[..._],pixelId:s?.pixelId});const l=u||c,d=s?.isConfigured;if(!(e=>{if(!e)return!0;if("object"!=typeof e||"object"==typeof e&&0===Object.keys(e).length)return!0;const t=new URLSearchParams(window.location.search),n=Object.keys(e)[0],o=e[n]?.toLowerCase(),i=t.get(n)?.toLowerCase();return i&&i.includes(o)})(l?.rules)&&!a)return;const p=Date.now(),m=$a(we.KP_META_LAST_VISIT);let f;m&&(f=function(e,t){const n=new Date(e),o=new Date(t);return n.setHours(0,0,0,0),o.setHours(0,0,0,0),Math.floor(Math.abs(o-n)/864e5)}(p,+m));let h=ar(ee.META_EVENTS_ALREADY_FIRED)||[];const E=l?.events||[];let w=[];E.includes(ne.kp_visitors)&&e===ne.kp_visitors&&w.push(ne.kp_visitors),E.includes(ne.kp_identified)&&e===ne.kp_identified&&!h?.includes(ne.kp_identified)&&w.push(ne.kp_identified),E.includes(ne.kp_engaged_visitors)&&e===ne.kp_engaged_visitors&&!h?.includes(ne.kp_engaged_visitors)&&w.push(ne.kp_engaged_visitors),E.includes(ne.kp_atc)&&e===ne.kp_atc&&function(e){if(!e||!e.custom_data)return!1;const t=e.custom_data;if(null==t.value||"number"!=typeof t.value)return!1;if(!t.currency||"string"!=typeof t.currency)return!1;if(!t.contents||!Array.isArray(t.contents)||0===t.contents.length)return!1;for(const e of t.contents){if(!e.id)return!1;if(null==e.quantity)return!1;if(null==e.item_price||"number"!=typeof e.item_price)return!1}return!(!t.content_type||"string"!=typeof t.content_type)}(t)&&w.push(ne.kp_atc),(ne.STANDARD_EVENTS.includes(e)||r)&&w.push(e),e&&a&&w.push(e);const g=Ar({mid:o})||Cr(),y=g?.phoneNumber?.value?""+g?.phoneNumber?.value:null;y&&Xr()&&!h.includes(Me)&&(window?.Shopify?.analytics.publish(Me),rr(ee.META_EVENTS_ALREADY_FIRED,[...h,Me]),h=ar(ee.META_EVENTS_ALREADY_FIRED)||[]);const I=await(async({mid:e=window?.merchantInfo?.mid,metaEventsList:t=[]})=>{let n=[];const o=Ar({mid:e})||Cr();let i;if(o?.phoneNumber?.value){const e=o.phoneNumber.value;i=await Fr("91"+e)}const a=ar(ee.META_EVENTS_ALREADY_FIRED);return!a?.includes(ne.kp_engaged_visitors)&&t.includes(ne.kp_engaged_visitors)&&(i||a?.includes(ne.kp_visitors))&&n.push(ne.kp_engaged_visitors),!a?.includes(ne.kp_identified)&&i&&t.includes(ne.kp_identified)&&n.push(ne.kp_identified),n})({mid:o,metaEventsList:E});w=[...new Set([...w,...I])];let S,O,k=await $r();if(k){const t=qa(te.KP_EMAIL);if(t!==ar(ee.KP_INVALID_EMAIL)&&t)try{const e=await async function(e,t,n=!1){try{const o=$a(we.KP_REQUEST_ID);let i=Xa(Da());if(n&&(i=Xa(os())||cs),!i&&(i=await ks(t,Vt.getCustomerEmailUrl),!i))return{status:401,message:x.serverError};const a={accept:"application/json",[re]:rs.mid||t,[_e]:o,[se]:i},r={email:e};return await as.post(Vt.validateEmail,{},r,a)}catch(e){return ds(e)}}(t,o),{body:n,status:i}=e;pr(i)&&!0===n?.data?rr(ee.KP_INVALID_EMAIL,t):(sessionStorage.removeItem(ee.KP_INVALID_EMAIL),k="")}catch(e){}}let N,P=Xa(we.KP_USER_ID);P&&(P=await Fr(P)),y&&(S=await Fr("91"+y)),k&&(N=await Fr(k?.toLowerCase()));const T=Math.floor(Date.now()/1e3),v=new URLSearchParams(window.location.search);let b=null,R=null,A=v.get("fbclid"),C=null,L=null;try{"undefined"!=typeof clientParamBuilder&&(await clientParamBuilder.processAndCollectAllParams(),b=clientParamBuilder.getFbc(),R=clientParamBuilder.getFbp(),b&&(C="param_builder"),R&&(L="param_builder"))}catch(e){}const U=$a("_fbc"),D=$a(we.KP_META_FB_CLICK_ID);let M,K=Zr($a(we.KP_BACKEND_RETRIVED_FBCLID_COOKIE));b||(b=U||D,C="manual_cookie");const F=ar(ee.KP_META_RETRIEVE_TRIGGER);if(!(A||b||K||F)){const e=await(async(e,t)=>{const n=Xr()?await cr():null;return n||e||t?{...e&&{phone:e},...n&&{cart_token:n},...t&&{external_id:t},ad_platform:"fb"}:null})(y,P);if(e){const t=await async function({mid:e,body:t}){try{const n=qa(te.KP_REQUEST_ID),o=Xa(Da()),i={accept:"application/json",[re]:e,[_e]:n,[se]:o};return await as.post(""+Vt.retriveFbclid,{},t,i)}catch(e){return ds(e)}}({mid:o,body:e});rr(ee.KP_META_RETRIEVE_TRIGGER,!0);const n=t?.body?.data;M=Zr(n?.click_id),((e,t,n)=>{if(!t||!e)return;const o=new Date(e),i=o.getTime(),a=new Date(o.getTime()+6048e5),r=function(e){if(!e)return null;try{const t=encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,((e,t)=>String.fromCharCode("0x"+t)));return btoa(t)}catch(e){return""}}(`fb.1.${i}.${t}`);document.cookie=we.KP_BACKEND_RETRIVED_FBCLID_COOKIE+"="+(r||"")+"; expires="+a.toUTCString()+"; SameSite=None; Secure; path=/"})(n?.timestamp,M),M&&(C="backend_api")}}if(K=Zr($a(we.KP_BACKEND_RETRIVED_FBCLID_COOKIE)),(A||b)&&!K){let e=await cr(),t=b?function(e){let t=e||$a("_fbc");if(!t)return null;const n=t.split(".");return n.length<4?null:n.slice(3).join(".")}(b):A,n=b?function(){const e=$a("_fbc");if(!e)return null;const t=e.split(".");if(t.length<3)return null;const n=parseInt(t[2],10);return isNaN(n)?null:new Date(n).toISOString()}():null;const i={clicks:[{...{...t&&{click_id:t},...n&&{timestamp:n},...y&&{phone:y},...P&&{external_id:P},...e&&{cart_token:e},ad_platform:"fb"}}]};"string"==typeof t&&async function({mid:e,body:t}){try{if(ar(ee.KP_META_CAPTURE_TRIGGER))return;const n=qa(te.KP_REQUEST_ID),o=Xa(Da()),i={accept:"application/json",[re]:e,[_e]:n,[se]:o},a=await as.post(""+Vt.captureFbclid,{},t,i);return rr(ee.KP_META_CAPTURE_TRIGGER,!0),a}catch(e){return ds(e)}}({mid:o,body:i})}R||(R=$a("_fbp"),R||(await new Promise((e=>setTimeout(e,500))),R=$a("_fbp")),R&&(L="manual_cookie"));let H=v.get("campaign_id")||ar("campaign_id");v.get("campaign_id")&&rr("campaign_id",v.get("campaign_id")),R||(await new Promise((e=>setTimeout(e,500))),R=$a("_fbp"),R&&!L&&(L="manual_cookie_delayed"));const G=$a(we.LOCALIZATION);G&&(O=await Fr(G?.toLowerCase()));let B=Pr(),V=B?.m_count?B?.m_count:1;const j={...N&&{em:N},...S&&{ph:S},...O&&{country:O},external_id:P};let W={event_source_url:window.location.href,kp_identified:!!S,...V&&{merchant_visit_count:V},...H&&{campaign_ads:H},...(f||0===f)&&{visited_after:f}},$=Zr($a(we.KP_BACKEND_RETRIVED_FBCLID_COOKIE)),q={event_time:T,...A&&!b&&{fb_click_id:A},user_data:{...N&&{em:[N]},...S&&{ph:[S]},...O&&{country:[O]},...b&&{fbc:b},...!b&&$&&{fbc:$},...R&&{fbp:R},external_id:P},custom_data:{...W,prd_ltv_data:await Vi(o)},action_source:"website",event_source_url:window.location.href},Y=[];if(0===w.length)return;w.forEach((e=>{let n=structuredClone(q);const o=ne.STANDARD_EVENTS.includes(e)&&r?r:"Gokwik "+("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",[...Array(28)].reduce((e=>e+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"[~~(62*Math.random())]),""));ne.STANDARD_EVENTS.includes(e)||(fbq("trackCustom",e,{...W,...j,...e===ne.kp_atc&&t?.custom_data},{user_data:j,eventID:o,event_source_url:window.location.href}),e===ne.kp_atc&&t?.custom_data&&(n.custom_data={...n?.custom_data,...t?.custom_data})),Y.push({event_name:e,event_id:o,...n})}));const J=[...new Set([...h,...w])];if(rr(ee.META_EVENTS_ALREADY_FIRED,J),Ut.update((e=>({...e,onMetas2sFire:!0}))),Yr(),0===Y.length)return;await async function({mid:e,body:t,isCustomEvent:n,useOperationEndpoint:o}){try{const i=qa(te.KP_REQUEST_ID),a=Xa(Da()),r={accept:"application/json",[re]:e,[_e]:i||ke,[se]:a,...n&&{is_custom_event:!0}};let s=o?Vt.metaS2SOpEndpoint:Vt.metaS2S;const c=o?{events:t}:t,_=await as.post(""+s,{},c,r);return _.body.data?.fbcValue&&za(we.KP_META_FB_CLICK_ID,_.body.data.fbcValue,90),_}catch(e){return ds(e)}}({mid:o,body:Y,isCustomEvent:a,useOperationEndpoint:d})}catch(t){let n="";if(t instanceof Error)n=t.message;else try{n=JSON.stringify(t)}catch{n=t+""}n=n.length>1e3?n.slice(0,1e3)+"...":n,Bi({category:"meta_event_s2s",action:"automatic",label:"meta-event-failure",property:e||"not_provided",value_1:""+n})}},Vi=async e=>{let t={page_urlpath:null,phone:null,m_id:null,product_product_id:null,mkt_medium:null,mkt_source:null,mkt_campaign:null,dvce_screenwidth:null,dvce_screenheight:null};t.page_urlpath=window.location.pathname;const n=Ar({mid:e})||Cr();n?.phoneNumber?.value&&(t.phone=""+n?.phoneNumber?.value),t.m_id=e,t.product_product_id=window?.__st?.rid?""+window?.__st?.rid:null;const o=new URLSearchParams(window.location.search);if(t.mkt_medium=o.get("mkt_medium")||ar(ee.MARKETING_ATTRIBUTION)?.mkt_medium,o.get("mkt_medium")&&!ar(ee.MARKETING_ATTRIBUTION)?.mkt_medium){let e=ar(ee.MARKETING_ATTRIBUTION)||{};e.mkt_medium=o.get("mkt_medium"),rr(ee.MARKETING_ATTRIBUTION,e)}if(t.mkt_source=o.get("mkt_source")||ar(ee.MARKETING_ATTRIBUTION)?.mkt_source,o.get("mkt_source")&&!ar(ee.MARKETING_ATTRIBUTION)?.mkt_source){let e=ar(ee.MARKETING_ATTRIBUTION)||{};e.mkt_source=o.get("mkt_source"),rr(ee.MARKETING_ATTRIBUTION,e)}if(t.mkt_campaign=o.get("mkt_campaign")||ar(ee.MARKETING_ATTRIBUTION)?.mkt_campaign,o.get("mkt_campaign")&&!ar(ee.MARKETING_ATTRIBUTION)?.mkt_campaign){let e=ar(ee.MARKETING_ATTRIBUTION)||{};e.mkt_campaign=o.get("mkt_campaign"),rr(ee.MARKETING_ATTRIBUTION,e)}return t.dvce_screenheight=""+window.screen.height,t.dvce_screenwidth=""+window.screen.width,Object.keys(t).forEach((e=>{t[e]||delete t[e]})),t};let ji,Wi;Ve.subscribe((e=>{ji=e?.toUpperCase()})),xe.subscribe((e=>{Wi=e?.toLowerCase()}));class $i{constructor(e,t={},n={},o={},i={}){this.baseURL=e,this.auth=t,this.headers=n,this.params=o,this.data=i}async makeRequest(e="GET",t,n={},o={},i={}){try{const a=["/v3/gkstrict/auth/otp/send","/v3/auth/browser","/v3/auth/otp/verify","/kp/api/v1/auth/browser"].includes(t),r={...this.headers,...i,"gk-platform":Wi};a||(r["kp-integration-type"]=ji);const s={url:t,method:e,headers:r,baseURL:this.baseURL,params:{...this.params,...n},data:o};o&&"object"==typeof o&&0===Object.keys(o).length&&(s.data=null);const c=await mi(s);return{status:c.status,headers:c.headers,body:c.data}}catch(e){throw e}}get(e,t,n,o){return this.makeRequest("GET",e,t,n,o)}post(e,t,n,o){return this.makeRequest("POST",e,t,n,o)}put(e,t,n,o){return this.makeRequest("PUT",e,t,n,o)}delete(e,t,n,o){return this.makeRequest("DELETE",e,t,n,o)}patch(e,t,n,o){return this.makeRequest("PATCH",e,t,n,o)}}const qi=new $i("https://gkx.gokwik.co");function Yi(e){let t=null;if(t=e?.response?.data?.error?.message?e?.response?.data?.error?.message:e?.response?.data?.error,500===e?.response?.status)throw e;if(t)return{status:e?.response?.status,message:t};throw e}async function Ji({visitorId:e,authenticated:t,phoneNumber:n}){const o=qa(te.KP_REQUEST_ID),i=window.merchantInfo.mid;try{const a={fpInfo:kr(e),authenticated:t,encph:n?.value,countryCode:n?.country_code};let r=Xa(Da());const s={"Content-Type":"application/json",[re]:i,[se]:r,[_e]:o};return await qi.post(Vt.postVisitorIdentification,{},a,s)}catch(e){return Yi(e)}}async function zi(e){const t=qa(te.KP_REQUEST_ID),n=window.merchantInfo.mid,o={visitorId:kr(e)};try{let e=Xa(Da());const i={"Content-Type":"application/json",[re]:n,[se]:e,[_e]:t};return await qi.post(Vt.getVisitorIdentification,{},o,i)}catch(e){return Yi(e)}}kt.subscribe((e=>e)),Nt.subscribe((e=>e)),xe.subscribe((e=>e)),Ve.subscribe((e=>e)),Pt.subscribe((e=>e)),at.subscribe((e=>e)),Mt.subscribe((e=>e));let Qi=!0;async function Xi(){const e=await import("https://prd-gfp.gokwik.co/web/v3/Gny2ESYUHzbeiJWwjQPh");try{const t=await e.load({endpoint:["https://prd-gfp.gokwik.co",e.defaultEndpoint],region:"ap"});if(!Qi)return;const n=await t.get({timeout:"20000"});if(Tt.set(!1),n.requestId&&er(te.FP_REQUEST_ID,n.requestId,!0,ye),n.sealedResult){if(!sessionStorage.getItem(te.VISITOR_ID_SOURCE)){sessionStorage.setItem(te.VISITOR_ID_SOURCE,Te.VISITOR_ID_GENERATED);const e=Xa(te.FP_REQUEST_ID);Pi.sendCustomEvent(Qt.fingerprinting,{fp_context_id:e||"NA",visitor_id:n.sealedResult,fp_tags:"VISITOR_ID_GENERATED",fp_found_page:Te.VISITOR_ID_GENERATED})}er(te.KP_VISITOR_ID,encodeURIComponent(n.sealedResult),!0,ye),da(encodeURIComponent(n.sealedResult))}else Pi.sendCustomEvent(Qt.fingerprinting,{fp_context_id:window?.merchantInfo?.mid||"NA",visitor_id:"VISITOR_ID_NOT_GENERATED",fp_tags:"VISITOR_ID_EMPTY"});!async function(){const e=qa(te.KP_REQUEST_ID),t=window.merchantInfo.mid;try{const n={[re]:t,[_e]:e};await qi.get(Vt.incFpCount,{},{},n)}catch(e){}}()}catch(t){switch(t.message){case e.ERROR_GENERAL_SERVER_FAILURE:Pi.sendCustomEvent(Qt.fingerprinting,{fp_context_id:window?.merchantInfo?.mid||"NA",visitor_id:"VISITOR_ID_NOT_GENERATED",fp_tags:"VISITOR_ID_GEN_SERVER_FAILURE",fp_fails_log:e.ERROR_GENERAL_SERVER_FAILURE});break;case e.ERROR_CLIENT_TIMEOUT:Pi.sendCustomEvent(Qt.fingerprinting,{fp_context_id:window?.merchantInfo?.mid||"NA",visitor_id:"VISITOR_ID_NOT_GENERATED",fp_tags:"VISITOR_ID_GEN_TIMEOUT",fp_fails_log:e.ERROR_CLIENT_TIMEOUT});break;default:Pi.sendCustomEvent(Qt.fingerprinting,{fp_context_id:window?.merchantInfo?.mid||"NA",visitor_id:"VISITOR_ID_NOT_GENERATED",fp_tags:"VISITOR_ID_GEN_FAILED",fp_fails_log:""+t?.message||"Other Error"})}}}Tt.subscribe((e=>Qi=e));let Zi=!1,ea=!0,ta=!1;function na(e){const t=Xa(te.KC_PHONE);t||(er(te.KC_PHONE,e?.data?.kcPhoneNumber),Lr(),Bi({category:Wt.non_auth_user_identified,action:$t.automated,phoneNumber:t,country_code:Ie,label:qt.non_auth_user_identified_with_kc_phone_number,analyticEvent:zt.EVENTS.NON_AUTH_USER_IDENTIFIED_WITH_KC_PHONE_NUMBER}))}async function oa(e){const{key:t,value:n}=e;if(!t||!n)return;const o=n,i=await Ns(window.merchantInfo?.mid,null,o,"idb-ph");let a=i?.body?.data?.phone,r=i?.body?.data?.country_code||Ie;a&&(Sr(`${r}|${a}`,te.IDB_PH_NO),Bi({category:Wt.non_auth_user_identified,action:$t.automated,label:qt.non_auth_user_identified_with_idb_phone_number,property:Yt.idb_phone_number,value:a,country_code:r,analyticEvent:zt.EVENTS.NON_AUTH_USER_IDENTIFIED_WITH_IDB_PHONE_NUMBER}))}function ia(e){const t=e.data[te.RP_PHONE_NUMBER];Sr(`${t?.country_code}|${t?.value}`,te.RP_PHONE_NUMBER),Bi({category:Wt.non_auth_user_identified,action:$t.automated,label:qt.non_auth_user_identified_with_rp_phone_number,property:Yt.rp_phone_number,value:t?.value,country_code:t?.country_code,analyticEvent:zt.EVENTS.NON_AUTH_USER_IDENTIFIED_WITH_RP_PHONE_NUMBER})}function aa(e){const t=e.data[te.SHOPIFY_COD_UNAUTH_PHONE_NUMBER];Sr(`${t?.country_code}|${t?.value}`,te.SHOPIFY_COD_UNAUTH_PHONE_NUMBER),Bi({category:Wt.non_auth_user_identified,action:$t.automated,label:qt.non_auth_user_identified_with_shopify_app_phone_number,property:Yt.shopify_app_phone_number,value:t?.value,country_code:t?.country_code,analyticEvent:zt.EVENTS.NON_AUTH_USER_IDENTIFIED_WITH_SHOPIFY_APP_PHONE_NUMBER})}function ra(e){Sr(`${e?.country_code}|${e?.phone||e?.value}`,te.EXPIRED_PH_NO),Bi({category:Wt.non_auth_user_identified,action:$t.automated,label:qt.non_auth_user_identified_with_expired_token,property:Yt.expired_token_phone_number,value:e?.phone||e?.value,country_code:e?.country_code,analyticEvent:zt.EVENTS.NON_AUTH_USER_IDENTIFIED_WITH_EXPIRED_TOKEN_PHONE_NUMBER})}function sa(e){const t=e.data[te.SR_PHONE_NUMBER];Sr(`${t?.country_code}|${t?.value}`,te.SR_PHONE_NUMBER),Bi({category:Wt.non_auth_user_identified,action:$t.automated,label:qt.non_auth_user_identified_with_sr_phone_number,property:Yt.sr_phone_number,value:t?.value,country_code:t?.country_code,analyticEvent:zt.EVENTS.NON_AUTH_USER_IDENTIFIED_WITH_SR_PHONE_NUMBER})}function ca(e){Bi({category:Wt.non_auth_user_identified,action:$t.automated,label:qt.non_auth_user_identified_with_non_otp_verified_phone_number,property:Yt.non_otp_verified_phone_number,value:e?.value,country_code:e?.country_code,analyticEvent:zt.EVENTS.NON_AUTH_USER_IDENTIFIED_WITH_NON_OTP_VERIFIED_PHONE_NUMBER})}function _a(e,t=Ie){Bi({category:Wt.non_auth_user_identified,action:$t.automated,label:qt.non_auth_user_identified_with_no_otp_flow,property:Yt.non_otp_verified_phone_number,value:e,country_code:t})}function ua({visitorId:e,fpPhone:t,authenticated:n}){e&&er(te.KP_VISITOR_ID,encodeURIComponent(e),!0,ye),t?.value&&(er(te.KP_VISITOR_INFO,JSON.stringify({fpPhone:t?.value,authenticated:n,countryCode:t?.country_code})),Lr())}function la({visitorId:e,fpPhone:t,authenticated:n}){const o={fpPhone:t?.value,authenticated:n,countryCode:t?.country_code};e&&(o.visitorId=encodeURIComponent(e)),openIframe(Xt.STORE_VISITOR_INFORMATION,JSON.stringify(o))}St.subscribe((e=>Zi=e)),Tt.subscribe((e=>ea=e)),It.subscribe((e=>ta=e));const da=async(e=null)=>{if(!Zi)return;e||(e=Xa(te.KP_VISITOR_ID));const t=Xa(te.FP_REQUEST_ID);if(e){sessionStorage.getItem(te.VISITOR_ID_SOURCE)||(sessionStorage.setItem(te.VISITOR_ID_SOURCE,Te.SOURCE_LOCAL),Pi.sendCustomEvent(Qt.fingerprinting,{fp_context_id:t||"NA",visitor_id:e,fp_found_page:Te.SOURCE_LOCAL}));let n=decodeURIComponent(e);const o=Xa(Ua()),i=mr(o);o&&i?.value?(Ji({visitorId:n,authenticated:!0,phoneNumber:i,countryCode:i?.country_code||Ie}),Pi.sendCustomEvent(Qt.fingerprinting,{visitor_id:n,authenticated:!0,phone_number:i?.value,country_code:i?.country_code,fp_tags:"UPDATE_VISITOR_MAPPINGS",fp_action:Se.CORE_TOKEN,fp_found_page:sessionStorage.getItem(te.VISITOR_ID_SOURCE)||"NA",fp_context_id:t||"NA"})):openIframe(Xt.PROCESS_FINGERPRINTING,encodeURIComponent(e))}else openIframe(Xt.PROCESS_FINGERPRINTING)},pa=(e,t,n,o)=>{const i=Xa(te.FP_REQUEST_ID);Pi.sendCustomEvent(Qt.fingerprinting,{visitor_id:e,authenticated:t?.data?.authenticated,phone_number:t?.data?.phoneNumber,country_code:t?.data?.countryCode||Ie,...n&&{fp_tags:n},fp_action:o,fp_found_page:sessionStorage.getItem(te.VISITOR_ID_SOURCE)||"NA",fp_context_id:i||"NA"}),ua({visitorId:e,fpPhone:{value:t?.data?.phoneNumber,country_code:t?.data?.countryCode||Ie},authenticated:t?.data?.authenticated}),la({visitorId:e,fpPhone:{value:t?.data?.phoneNumber,country_code:t?.data?.countryCode||Ie},authenticated:t?.data?.authenticated})},ma=async({visitorId:e,authenticated:t,phoneNumber:n})=>{const{status:o,body:i={}}=await zi(e);return pr(o)&&!i?.error&&i?.data?.authenticated?(pa(e,i,"FETCHED_VISITOR_INFO",Se.backend),null):{visitorId:e,authenticated:t,phoneNumber:n}},fa="KP_DB",ha="kp_storage",Ea=1;function wa(){return new Promise(((e,t)=>{const n=indexedDB.open(fa,Ea);n.onupgradeneeded=e=>{const t=e.target.result;t.objectStoreNames.contains(ha)||t.createObjectStore(ha)},n.onsuccess=()=>{e(n.result)},n.onerror=()=>{t(n.error)}}))}async function ga(e,t,n){const o=(await wa()).transaction(ha,"readonly").objectStore(ha);let i=0;if(!e(Ua())){const e=await async function(e,t){return new Promise(((n,o)=>{const i=e.get(t);i.onsuccess=()=>n(i.result),i.onerror=()=>o(i.error)}))}(o,Ua());if(e){const t={key:Ua(),value:e};window.self!==window.top?Ka({type:Xt.IDB_TOKEN_FOUND,payload:t},n):getValueFromCookiesOrLocalStorage(te.IDB_PH_NO)||oa(t),i++}}return i}function ya(e){setTimeout((()=>{fetch("/cart.js").then((e=>e.json())).then((e=>{const t=function(e){const t=e.items.map((e=>({id:e.product_id,quantity:e.quantity,item_price:e.final_line_price/e.quantity/100}))),n=e.items.reduce(((e,t)=>e+t.final_line_price),0)/100;return{custom_data:{value:n,currency:e.currency||"INR",contents:t,content_type:"product"}}}(e);xi(ne.kp_atc,t)})).catch((e=>{}))}),1e3)}let Ia;function Sa(e,t,n){const o=Math.ceil((new Date(n)-new Date)/864e5);za(we.CUSTOMER_ACCESS_TOKEN,e,o,!1),t&&(za(we.SHOPIFY_CUSTOMER_TOKEN,t,o,!1),window.kp_customer_id=t,is())}Ve.subscribe((e=>Ia=e));let Oa,ka,Na,Pa,Ta,va,ba=!1,Ra=null,Aa=[];Je.subscribe((e=>e)),ut.subscribe((e=>e)),Ge.subscribe((e=>Oa=e)),qe.subscribe((e=>e)),Be.subscribe((e=>ka=e)),vt.subscribe((e=>e)),Ye.subscribe((e=>e)),ze.subscribe((e=>e)),$e.subscribe((e=>Na=e)),Qe.subscribe((e=>va=e)),nt.subscribe((e=>{})),xe.subscribe((e=>e)),Ve.subscribe((e=>Pa=e)),Ot.subscribe((e=>e)),kt.subscribe((e=>e)),Nt.subscribe((e=>e)),Pt.subscribe((e=>e)),st.subscribe((e=>{Ta=e})),Kt.subscribe((e=>ba=e)),rt.subscribe((e=>Aa=e||[]));const Ca=new TextEncoder,La=new TextDecoder,Ua=()=>"KWIKSESSIONTOKEN",Da=()=>"KWIKUSERTOKEN",Ma=()=>"pdp.gokwik.co",Ka=(e,t)=>{t&&0===Oa.length&&(Ge.set(t),Oa=t),"string"==typeof e&&(e={type:e}),window.parent.postMessage(e,Oa)},Fa=async e=>{try{return await fetch(`https://${window.location.host}/account/login?customer[email]=${encodeURIComponent(e.email)}&customer[password]=${encodeURIComponent(e.password)}`,{method:"POST",headers:{"Content-Type":"application/json"}})}catch(e){return{}}},Ha=async()=>{try{return await fetch(`https://${window.location.host}/account.json`,{method:"GET",headers:{"Content-Type":"application/json"}})}catch(e){return{}}},Ga=async(e,t,n=!0)=>{if(e?.email&&e?.password){let o=!1;if(null!=e?.accountActivationUrl&&e?.shopifyCustomerId){const t=e?.accountActivationUrl.split("/"),n=t[t.length-1];localStorage.setItem("kp_customer_state","ENABLED");const i=await(async(e,t,n,o)=>{try{const o=new Headers;o.append("content-type","application/x-www-form-urlencoded");const i=new URLSearchParams;return i.append("form_type","activate_customer_password"),i.append("utf8","✓"),i.append("customer[password]",t),i.append("customer[password_confirmation]",t),i.append("token",n),i.append("id",e),await fetch(`https://${window.location.host}/account/activate`,{method:"POST",headers:o,body:i,redirect:"follow"})}catch(e){return{}}})(e?.shopifyCustomerId,e?.password,n);o=i?.ok}let i=0;for(;i<2;)try{let n=null;if(o||(n=await Fa(e)),!n?.ok&&!o){sessionStorage.setItem("isShopifySession",!1);break}{let a,r;if(n?.ok&&(a=await(n?.text())),/>log\s*out<|>sign\s*out</i.test(a)||o)r=!0;else{const e=await Ha();r=e?.ok}if(r){if(sessionStorage.setItem("isShopifySession",!0),t){const e=Or(),n=new CustomEvent(jt,{detail:{category:Wt.logged_in_page,action:$t.automated,label:qt.redirected_to_account_page,property:Yt.phone_number,value:e?.value,country_code:e?.country_code,analyticEvent:zt.EVENTS.REDIRECTED_TO_ACCOUNT_PAGE}});window.dispatchEvent(n),zr(t)}break}if(a.includes("Incorrect email or password.")){if(sessionStorage.setItem("isShopifySession",!1),!1===e.isRetry)break;i++}else sessionStorage.setItem("isShopifySession",!1),i++}}catch(e){sessionStorage.setItem("isShopifySession",!1),i++}2===i&&n?nr("open_auto_login_modal",{detail:{reason:Yt.shopify_login_retry_limit_reached}}):n||zr(t)}else e?.multipass?(zr(e?.multipass),sessionStorage.setItem("isShopifySession",!0)):n?sessionStorage.setItem("isShopifySession",!1):zr(t)};function Ba(e,t=!1){let n="";t&&(n=";domain="+Ma()),document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; SameSite=None; Secure; path=/"+n}const xa=()=>{document.body.style.overflow="hidden"},Va=()=>{document.body.style.overflow="auto"},ja=(e,t,n,o=!1,i)=>{let a="",r="";const s=encodeURIComponent("object"==typeof t?JSON.stringify(t):t+"");if(n||i){const e=new Date;n&&e.setDate(e.getDate()+n),i&&e.setTime(e.getTime()+60*i*1e3),a="; expires="+e.toUTCString()}o&&(r=";domain="+Ma()),document.cookie=`${e}=${s}${a}; SameSite=None; Secure; path=/${r}`},Wa=e=>{const t=document.cookie;if(!t)return null;const n=t.split(";");for(let t of n)if(t=t.trim(),t.startsWith(e+"="))try{return JSON.parse(decodeURIComponent(t.substring(e.length+1)))}catch(e){return null}return null},$a=e=>{const t=document.cookie.split(";").map((e=>e.trim()));for(const n of t){const[t,o]=n.split("=");if(t===e)return o}return null},qa=(e,t=!0)=>t&&localStorage.getItem(e),Ya=e=>e||Xa(te.AUTOLOAD_POPUP_TYPE)||null,Ja=e=>e||Xa(te.AUTOLOAD_POPUP_ID)||null,za=(e,t,n,o=!1,i)=>{let a="",r="";if(n||i){const e=new Date;n&&e.setDate(e.getDate()+n),i&&e.setTime(e.getTime()+60*i*1e3),a="; expires="+e.toUTCString()}o&&(r=";domain="+Ma()),document.cookie=e+"="+(t||"")+a+"; SameSite=None; Secure; path=/"+r},Qa=(e,t,n=!0)=>{n&&localStorage.setItem(e,t)},Xa=(e,t=!0)=>{const n=$a(e);return null==n?qa(e,t):n},Za=(e=!0)=>{const t=Xa(de,e);return t?.length>0?t:"existing"},er=(e,t,n=!0,o=365,i=!1)=>{za(e,t,o,i),Qa(e,t,n),e===Ua()&&async function(e,t){const n=(await wa()).transaction(ha,"readwrite");n.objectStore(ha).put(t,e),n.complete||new Promise(((e,t)=>{n.oncomplete=e,n.onerror=t}))}(e,t)},tr=(e,t=!0,n=!1)=>{Ba(e,n),((e,t=!0)=>{t&&localStorage.removeItem(e)})(e,t),e===Ua()&&async function(e){const t=(await wa()).transaction(ha,"readwrite");t.objectStore(ha).delete(e),t.complete||new Promise(((e,n)=>{t.oncomplete=e,t.onerror=n}))}(e)};function nr(e,t={}){const n=new CustomEvent(e,t);window.dispatchEvent(n)}const or=e=>/^5\d{2}$/.test(e),ir=()=>Xa(te.SHOPIFY_API_TAGS),ar=e=>{const t=sessionStorage.getItem(e);return null!=t?JSON.parse(t):null},rr=(e,t)=>{const n=JSON.stringify(t);sessionStorage.setItem(e,n)},sr=()=>{const e=document.querySelector(".loader");if(e){Ra=e;const t=document.createElement("img");t.src="data:image/svg+xml,%3csvg width='16' height='16' viewBox='0 0 16 16' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M7.99988 5.99991V8.66658M7.99988 11.3332H8.00654M7.07676 2.59439L1.5935 12.0655C1.28936 12.5908 1.13729 12.8535 1.15977 13.069C1.17937 13.2571 1.27789 13.4279 1.43079 13.5391C1.6061 13.6666 1.9096 13.6666 2.51662 13.6666H13.4831C14.0901 13.6666 14.3937 13.6666 14.569 13.5391C14.7219 13.4279 14.8204 13.2571 14.84 13.069C14.8625 12.8535 14.7104 12.5908 14.4063 12.0655L8.923 2.59439C8.61995 2.07095 8.46843 1.80923 8.27074 1.72132C8.09831 1.64465 7.90145 1.64465 7.72901 1.72132C7.53133 1.80923 7.3798 2.07095 7.07676 2.59439Z' stroke='%23D92D20' stroke-width='1.4' stroke-linecap='round' stroke-linejoin='round'/%3e%3c/svg%3e",t.alt="error_icon",t.id=j,e.parentNode.replaceChild(t,e)}};async function cr(){if(Xr())try{const e=await fetch("/cart.js"),t=await e.json();return t?.token}catch(e){return null}}const _r=()=>{const e=window.location.search;return new URLSearchParams(e).get("checkout_url")},ur=()=>{const e=window.location.search;let t=new URLSearchParams(e),n=t.get("kp_login"),o=t.get("kp_redirect")||window.location.pathname;const i=$a(me);return i&&(n=!0),{isReferralLink:n,redirectionURL:o,flitsReferralCode:i}};function lr(){let e=window.navigator.userAgent,t=window.navigator?.userAgentData?.platform,n="";return t||(t=window.navigator.userAgent),-1!==["Macintosh","MacIntel","MacPPC","Mac68K","macOS"].indexOf(t)||t.includes("Macintosh")?n="Mac OS":-1!==["iPhone","iPad","iPod"].indexOf(t)||t.includes("iPhone")||t.includes("iPad")?n="iOS":-1!==["Win32","Win64","Windows","WinCE"].indexOf(t)?n="Windows":/Android/.test(e)?n="Android":/Linux/.test(t)&&(n="Linux"),n}function dr(e,t){try{const n=new URL(e),o=new URL(t),i=["pathname"];for(const e of i)if(n[e]!==o[e])return!1;return!0}catch(e){return!1}}const pr=e=>[200,201].includes(e),mr=e=>e?Or():null,fr=()=>{const e=ar(ee.IS_INTERNATIONAL_USER);return window.location.pathname!==W&&window.location.pathname!==$&&"/account/register"!==window.location.pathname||1!=e},hr=async()=>{const e=Xa(te.SHOPIFY_SESSION_KEY),t=Xa(Ua()),n=await $r();t&&gs(window.merchantInfo.mid,e,n)};function Er(){const e=navigator.userAgent||navigator.vendor||window.opera;return/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(e.toLowerCase())?"MOBILE":"WEB"}const wr=e=>{const t=ar(ee.TRIGGERED_LOGIN_POPUPS_PAGE_URL)||[];t.push(e),rr(ee.TRIGGERED_LOGIN_POPUPS_PAGE_URL,t)},gr=e=>{switch(e){case"AUTO_LOAD_POPUP2":return Wt.login_autoload_spin_the_wheel;case"AUTO_LOAD_POPUP3":return Wt.login_autoload_bottom_load;case"AUTO_LOAD_POPUP4":return Wt.login_autoload_center_load;case"AUTO_LOAD_POPUP5":return Wt.login_autoload_banner_popup;case"AUTO_LOAD_POPUP6":return Wt.login_autoload_discount_popup;case Zt:return Wt.login_modal;default:return Wt.login_autoload}};function yr(e,t){let n,o=0;return function(...i){const a=Date.now();a-o<t?(n&&clearTimeout(n),n=setTimeout((()=>{o=a,e(...i)}),t-(a-o))):(o=a,e(...i))}}function Ir(){let e="unknown";const t=window?.navigator?.userAgent||"";return t.includes("Firefox")?e="Mozilla Firefox":t.includes("SamsungBrowser")?e="Samsung Internet":t.includes("Opera")||t.includes("OPR")?e="Opera":t.includes("Trident")?e="Internet Explorer":t.includes("Edge")?e="Microsoft Edge":t.includes("Chrome")&&t.includes("Safari")?e="Google Chrome":t.includes("Safari")?e="Safari":t.includes("FBAV")?e="Facebook WebView":(()=>{const e=window?.navigator?.userAgent;return/(Instagram)/i.test(e)})()?e="Instagram WebView":(()=>{const e=window?.navigator?.userAgent;return/(Twitter)/i.test(e)})()&&(e="Twitter WebView"),e}const Sr=(e,t="notifyph",n=!0,o=365,i=!1)=>{e&&!e?.includes("|")&&(e="+91|"+e);const a=btoa(e);er(t,a,n,o,i),window?.merchantInfo?.mid&&Lr()},Or=(e="notifyph")=>{const t=Xa(e);if(!t)return null;if(t&&!isNaN(t)){if(t?.includes("|")){const e=atob(t).split("|");return{country_code:e[0]||Ie,value:e[1]}}return{country_code:Ie,value:t}}if(t){const e=atob(t).split("|");return 1===e?.length?{country_code:Ie,value:e[0]}:{country_code:e[0],value:e[1]}}};function kr(e){let t=e,n=null;for(;t!==n;)n=t,t=decodeURIComponent(t);return t}const Nr=(e,t)=>{let n=Xa(we.KP_USER_ID)||t;if(!n)return;const o=qa(te.VISITED_NETWORK);let i=!1,a=o?JSON.parse(o):[];const r=a.findIndex((e=>e.id==n));let s=0,c=1;if(-1!==r){let o=a[r];(Date.now()-o.updatedAt)/1e3>86400?(s=o.m_count+1,c=n===t?e:o.kp_count?o.kp_count+1:1,a[r]={...o,updatedAt:Date.now(),m_count:s,kp_count:c},i=!0):(s=o?.m_count||1,n===t&&o.kp_count!==e&&(a[r]={...o,kp_count:e},c=e,i=!0))}else s=1,c=n===t?e:1,a.push({id:n,updatedAt:Date.now(),m_count:1,kp_count:c}),i=!0;i&&Qa(te.VISITED_NETWORK,JSON.stringify(a)),s&&!e?openIframe(ie.kp_vst_cnt,{m_count:c}):openIframe(ie.kp_vst_cnt,{m_kp_count:c})},Pr=()=>{let e=qa(te.VISITED_NETWORK),t=Xa(we.KP_USER_ID);e=JSON.parse(e)?.filter((e=>e.id.includes(t)));let n=0;return n=e?.length?e?.[0]:{},n},Tr=async(e,t,n=!1,o=!1)=>{try{ar(Y)&&sessionStorage.removeItem(Y);const i=Or(),a=Xa(Ua());if(Pa?.toLowerCase()===Q.CUSTOM_HEADLESS)return;if(null!=a&&i?.value||e){const a=await(async(e,t=!0,n=va,o,i)=>{try{o||(o=ka.mid),n.includes("/account")&&(n="/");const{status:t,body:a={}}=await async function(e,t,n){try{const o=qa(te.KP_REQUEST_ID);let i=Xa(Da());if(!i&&(i=await ks(e,Vt.createShopifySession),!i))return{status:401,message:x.serverError};const a={"Content-Type":"application/json",[re]:e,[se]:i,[ce]:ss||o,[_e]:o,[ue]:!0},r=JSON.parse($a(oe.kp_notification_checked)),s="string"==typeof ir()?JSON.parse(ir()):ir(),c={redirectUrl:t,email:n,...s&&{tags:s}};null!==r&&(c.isMarketingEventSubscribed=r);let _=Vt.createShopifySession;return us&&(_=Vt.createShopifySessionV2),await as.post(_,{},c,a)}catch(e){return ds(e,!0)}}(o,n,i);let r={};return pr(t)?(rr(ee.KP_CUSTOMER_EMAIL_DATA,!0),r={...a.data,phoneNumber:e}):429===t||490===t?rr(Y,t):(rr(ee.KP_CUSTOMER_EMAIL_DATA,!0),r={isEmailNotFound:!0}),r}catch(e){return{}}})(i?.value,!1,window.location.pathname,window.merchantInfo.mid,e);Ft.set({authRequired:a?.authRequired,email:a?.email});const{customerAccessToken:r,expiresAt:s,token:c=null}=a;if(r&&s&&Sa(r,c,s),a?.multipleEmail&&await Vr(a.multipleEmail),!1===a?.isNewUser&&Ta&&(ct.set(!0),Ba("coupon_applied")),a?.email&&a?.shopifyCustomerId){const e=await Wr(a.email);if(localStorage.setItem("kp_customer_id",a.shopifyCustomerId),localStorage.setItem("kp_customer_state",a.state),Bi({category:Wt.user_type,action:$t.automated,label:a.isNewUser?qt.shopify_new:qt.shopify_old,property:t==J.EXISTING?qt.gokwik_old:qt.gokwik_new,value:i?.value,country_code:i?.country_code,mail:e,analyticEvent:zt.EVENTS.CREATE_SHOPIFY_SESSION}),Ba(oe.kp_notification_checked),!n){const e=Xa(te.SHOPIFY_SESSION_KEY);gs(window.merchantInfo.mid,e,a.email),ws(window.merchantInfo.mid,i,a.email),ys(window.merchantInfo.mid,a?.shopifyCustomerId)}if(Pa?.toLowerCase()===Q.CUSTOM_SHOPIFY&&a?.kpToken&&(er(te.KP_TOKEN,a.kpToken),!o)){const e=new CustomEvent("kp_data_sent",{detail:{kpToken:a?.kpToken,success:!0,kpLogout:!1,error:""}});return window.dispatchEvent(e),{success:!0,kpToken:a?.kpToken,error:""}}}else if(a?.shopifyCustomerId){if(localStorage.removeItem(te.KP_EMAIL),localStorage.setItem("kp_customer_id",a.shopifyCustomerId),localStorage.setItem("kp_customer_state",a.state),Pa?.toLowerCase()===Q.CUSTOM_SHOPIFY)return{success:!1,error:"Email not found"}}else{const e=await $r(Na);if(localStorage.removeItem(te.KP_EMAIL),localStorage.removeItem("kp_customer_id"),localStorage.removeItem("kp_customer_state"),Bi({category:Wt.user_type,action:$t.automated,label:qt.shopify_new,property:t==J.EXISTING?qt.gokwik_old:qt.gokwik_new,mail:e,value:i?.value,country_code:i?.country_code,analyticEvent:zt.EVENTS.CREATE_SHOPIFY_SESSION}),Pa?.toLowerCase()===Q.CUSTOM_SHOPIFY){const e=new CustomEvent("kp_data_sent",{detail:{kpToken:null,success:!1,kpLogout:!1,error:"Email or customerId not found"}});return window.dispatchEvent(e),{success:!1,error:"Email or customerId not found"}}}}}catch(e){}};async function vr(e,t){try{if(localStorage.removeItem("kp_email"),localStorage.removeItem("kp_multiple_email"),localStorage.removeItem("kp_customer_id"),localStorage.removeItem("kp_customer_state"),sessionStorage.removeItem(ee.KP_CUSTOMER_EMAIL_DATA_ERROR),sessionStorage.removeItem(ee.KP_CUSTOMER_EMAIL_DATA_MANUAL_LOGIN),null!=Xa(Ua())&&e){const{status:n,body:o={}}=await async function(e){try{const t=qa(te.KP_REQUEST_ID);let n=Xa(Da());if(!n&&(n=await ks(e,Vt.getCustomerEmailUrl),!n))return{status:401,message:x.serverError};const o={[re]:e,[se]:n,[ce]:ss||t,[_e]:t,[ue]:!0};return await as.get(Vt.getCustomerEmailUrl,{},{},o)}catch(e){return ds(e,!0)}}(window.merchantInfo.mid);if(pr(n)){const n=o.data;rr(ee.KP_CUSTOMER_EMAIL_DATA,!0),Ft.set({authRequired:n.authRequired,email:n.email||""}),!1===n?.isNewUser&&Ta&&(ct.set(!0),Ba("coupon_applied")),n?.multipleEmail&&await Vr(n.multipleEmail),n?.email&&(await Wr(n.email),t&&Bi({category:Wt.user_type,action:$t.automated,label:n.isNewUser?qt.shopify_new:qt.shopify_old,property:t==J.EXISTING?qt.gokwik_old:qt.gokwik_new,value:e?.value,country_code:e?.country_code,mail:n.email,analyticEvent:zt.EVENTS.CREATE_SHOPIFY_SESSION})),n?.shopifyCustomerId&&(localStorage.setItem("kp_customer_id",n.shopifyCustomerId),localStorage.setItem("kp_customer_state",n.state))}else 429===n||490===n?rr(ee.KP_CUSTOMER_EMAIL_DATA_ERROR,!0):400===n?(rr(ee.KP_CUSTOMER_EMAIL_DATA,!0),rr(ee.KP_CUSTOMER_EMAIL_DATA_MANUAL_LOGIN,!0)):404===n&&rr(ee.KP_CUSTOMER_EMAIL_DATA,!0)}}catch(e){}}const br=async()=>{const e=Or(),t=ar(ee.KP_CUSTOMER_EMAIL_DATA);let n=ar(Y);const o=Xa(te.KP_TOKEN);if("true"===Xa(te.IS_SSO_LOGIN)){let n=ar(ee.KP_CUSTOMER_EMAIL_DATA_ERROR);if(!n&&t||!e||await vr(e),n=ar(ee.KP_CUSTOMER_EMAIL_DATA_ERROR),!n){const e=await $r(),t=localStorage.getItem("kp_customer_id"),n=localStorage.getItem("kp_customer_state");if(e){const o=Xa(te.SHOPIFY_API_TAGS),{status:i,body:a={}}=await Ss({email:e,mid:window.merchantInfo.mid,id:t,redirectUrl:"/account",state:n,shopify_tags:o}),r=a?.data;if(pr(i)){if(r?.kpToken){er(te.KP_TOKEN,r.kpToken);const e=new CustomEvent("kp_data_sent",{detail:{kpToken:r?.kpToken,success:!0,kpLogout:!1,error:""}});window.dispatchEvent(e)}return}429===i||490===i?nr("close_auto_login_modal"):nr("open_auto_login_modal",{detail:{reason:Yt.error_in_shopify_login_data_api}})}}}else if((n||!t||t&&!o)&&e){const{success:e}=await Tr(null);if(!e){n=ar(Y);const e=Xa(te.KP_TOKEN);n||e||nr("open_auto_login_modal",{detail:{reason:Yt.email_or_shopify_customerId_not_available}})}}else{n=ar(Y);const e=Xa(te.KP_TOKEN);n||e||nr("open_auto_login_modal",{detail:{reason:Yt.email_or_shopify_customerId_not_available}})}},Rr=async(e=!1,t=null)=>{const n=Xa(te.KP_TOKEN),o=Xa(Ua(window.merchantInfo.environment));if(n){const e=new CustomEvent("kp_data_sent",{detail:{kpToken:n,success:!0,error:"",kpLogout:!1}});return window.dispatchEvent(e),{success:!0,kpToken:n,error:""}}if((()=>{const e=!1,t=ar(Ee);return Xa(Ua(window.merchantInfo.environment))&&t&&!ar(Ee)&&"true"!==sessionStorage.getItem("isLogout")&&(handleLogout(),e=!0),e})()){const e=new CustomEvent("kp_data_sent",{detail:{kpToken:null,success:!1,kpLogout:!0,error:"kwikpass logged out"}});window.dispatchEvent(e)}else if(!o||ar("isLogout")){const n=new CustomEvent("open_login_modal",{detail:{customLogin:e,params:t}});window.dispatchEvent(n)}else await br()},Ar=({mid:e=null})=>{const t=Xa(Ua());if(t)return{phoneNumber:mr(t),source:Se.CORE_TOKEN};const n=JSON.parse(Xa(te.KP_VISITOR_INFO)),o=n?.authenticated,i={value:n?.fpPhone,country_code:n?.countryCode||Ie};return i?.value&&o?{phoneNumber:i,source:Se.FPPHONE}:void 0},Cr=()=>{const e=Or(te.EXPIRED_PH_NO);if(e?.value)return{phoneNumber:e,source:Se.EXPIRED_TOKEN_PHONE};const t=Or(te.SR_PHONE_NUMBER);if(t?.value)return{phoneNumber:t,source:Se.SRPHONE};const n=Qr(Xa(te.KC_PHONE));if(n?.value)return{phoneNumber:n,source:Se.KCPHONE};const o=JSON.parse(Xa(te.KP_VISITOR_INFO)),i={value:o?.fpPhone,country_code:o?.countryCode||Ie},a=o?.authenticated;if(i.value&&!a)return{phoneNumber:i,source:Se.FPPHONE};const r=Or(te.RP_PHONE_NUMBER);if(r?.value)return{phoneNumber:r,source:Se.RPPHONE};const s=Or(te.unverified_phone_number);if(s?.value)return{phoneNumber:s,source:Se.UNVERIFIED_PHONE};const c=Or(te.NO_OTP_FLOW_PHONE_NUMBER);return c?{phoneNumber:c,source:Se.NO_OTP_FLOW_PHONE_NUMBER}:null},Lr=()=>{const e=window?.merchantInfo?.mid,t=Cr();if(dt.set(t),!e)return;const n=Ar({mid:e});lt.set(n)},Ur=e=>!!(e&&e.length>15);function Dr(){navigator.geolocation&&navigator.geolocation.getCurrentPosition((e=>{const{latitude:t,longitude:n}=e.coords;n&&n&&(rr(Ae,n),rr(Ce,t))}),(e=>{}))}const Mr=e=>{const t=sessionStorage.getItem("isCustomAccountPage"),n=$a(we.CUSTOMER_ACCESS_TOKEN),o=getCustomerId(),{isReferralLink:i,redirectionURL:a}=ur();if(i&&null===o&&a)nr(ie.SHOW_LOADING_SCREEN),handleKpAndShopifyLogin(a);else if(e&&(!t&&null===o||t&&!n)){nr(ie.SHOW_LOADING_SCREEN);let e=_r()||(t?q:W);handleKpAndShopifyLogin(e)}else nr(ie.HIDE_LOADING_SCREEN)},Kr=async e=>{const{isReferralLink:t,redirectionURL:n}=ur();if(t)handleKpAndShopifyLogin(n);else if(e){let e=_r()||W;handleKpAndShopifyLogin(e)}};async function Fr(e){const t=e.trim().toLowerCase(),n=(new TextEncoder).encode(t),o=await crypto.subtle.digest("SHA-256",n);return Array.from(new Uint8Array(o)).map((e=>e.toString(16).padStart(2,"0"))).join("")}function Hr(e){if(!e||e.length%4!=0||/[^A-Z0-9+\/=]/i.test(e))return!1;try{return btoa(atob(e))===e}catch(e){return!1}}async function Gr(e){const t=Ca.encode(e);return crypto.subtle.importKey("raw",t,{name:"AES-CBC"},!1,["encrypt","decrypt"])}async function Br(e){const t=await Gr("kR7dmP9tnL2wjH5&vC8qxF4hwQ1iyT6t"),n=Ca.encode("2134765890213456"),o=await crypto.subtle.encrypt({name:"AES-CBC",iv:n},t,Ca.encode(e));return btoa(String.fromCharCode(...new Uint8Array(o)))}async function xr(e){const t=await Gr("kR7dmP9tnL2wjH5&vC8qxF4hwQ1iyT6t"),n=Ca.encode("2134765890213456"),o=Uint8Array.from(atob(e),(e=>e.charCodeAt(0))),i=await crypto.subtle.decrypt({name:"AES-CBC",iv:n},t,o);return La.decode(i)}async function Vr(e){if(!e)return"";const t=JSON.stringify(e),n=await Br(t);Qa(te.KP_MULTIPLE_EMAIL,n)}async function jr(){const e=qa(te.KP_MULTIPLE_EMAIL);if(!e)return null;try{const t=JSON.parse(e);if(t&&!Hr(e)){const e=await Br(JSON.stringify(t));return Qa(te.KP_MULTIPLE_EMAIL,e),t}}catch(e){}return xr(e).then((e=>{try{return JSON.parse(e)}catch(t){return e}})).catch((()=>null))}async function Wr(e,t=!0){if(!e)return"";const n=await Br(e);Qa(te.KP_EMAIL,n,t)}async function $r(e=!0){let t=Xa(te.KP_EMAIL,e)||"";if(!t)return null;if(!Hr(t)){const e=await Br(t);return Qa(te.KP_EMAIL,e),t}return t?await xr(t):null}const qr=async()=>{const e=await ps(window.merchantInfo.mid);if(!e||!window.merchantInfo?.mid)return;const t=await hs(),n=t?.customEvents?.filter((e=>"KP_CUSTOM"===e?.type)).map((e=>e?.name));let o;n?.length>0&&(o={events:[...n],pixelId:t?.pixelId});const i=e?.thirdPartyServiceProviders?.find((e=>e?.name===Ne.metas2s)),a=o||i;(a?.events||[]).includes(ne.kp_atc)&&Xr()&&function(e){const t=Object.getOwnPropertyDescriptor(Image.prototype,"src");Object.defineProperty(Image.prototype,"src",{set(e){if("string"==typeof e&&e.includes("facebook.com/tr")&&e.includes("ev=AddToCart"))try{!function(e){const t={},n=new URL(e);for(const[e,o]of n.searchParams.entries()){const n=e.replace(/\[\]$/,"");t.hasOwnProperty(n)?Array.isArray(t[n])?t[n].push(o):t[n]=[t[n],o]:t[n]=o}}(e),ya()}catch(e){}return t.set.call(this,e)},get:t.get});const n=HTMLFormElement.prototype.submit;HTMLFormElement.prototype.submit=function(){if(this.action&&this.action.includes("facebook.com/tr")){const e=new FormData(this),t={};for(const[n,o]of e.entries())t[n]=o;if("AddToCart"===t.ev)try{ya()}catch(e){}}return n.apply(this,arguments)}}(),Xr()||(window.__kwikpass={trackAtc:e=>{if(!e||!Array.isArray(e)||0===e.length)return null;try{const t=e.map((e=>({id:e.product_id||e.variant_id,quantity:e.quantity,item_price:e.price/100}))),n={custom_data:{value:e.reduce(((e,t)=>e+t.price*t.quantity),0)/100,currency:e[0].currency||"INR",contents:t,content_type:"product"}};xi(ne.kp_atc,n)}catch(e){return null}},firePixelEventViaKP:(e,t,n,o)=>{xi(t,null)}});let r=ar(ee.URL_VISITED_BY_USER)||[];r.includes(window.location.href)||(r.push(window.location.href),rr(ee.URL_VISITED_BY_USER,r)),await xi(ne.kp_visitors),await async function(e){const t=yr((async()=>{(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0)/((document.documentElement.scrollHeight||document.body.scrollHeight)-(document.documentElement.clientHeight||window.innerHeight))*100>50&&await xi(e)}),500);return window.addEventListener("scroll",t),t}(ne.kp_engaged_visitors)},Yr=()=>{_(Ut).initSPcalls&&_(Ut).onMetas2sFire&&za(we.KP_META_LAST_VISIT,Date.now())},Jr=async(e,t)=>{const n=Object.keys(e).filter((t=>!0===e[t])).join(",");if(n){const e=await async function(e,t){try{const n=qa(te.KP_REQUEST_ID);let o=Xa(Da());if(!o&&(o=await ks(t,Vt.getCustomerEmailUrl),!o))return{status:401,message:x.serverError};const i={[re]:t,[se]:o,[ce]:ss||n||ke,[_e]:n||ke};return await as.get(`${Vt.customerIntelligence}?cstmr-mtrcs=${e}`,{},{},i)}catch(e){return ds(e,!0)}}(n,t),{status:o,body:i}=e;if(pr(o)&&i?.data){const e=new CustomEvent("customer_intelligence",{detail:{data:i.data}});window.dispatchEvent(e)}}};function zr(e,t=!1){if(At){const e=new CustomEvent("close_popup",{detail:{on_navigation:!0}});window.dispatchEvent(e)}if(sessionStorage.getItem("is_rn_view")){const t=new CustomEvent("kp_redrc",{detail:{rdrct_to:e}});window.dispatchEvent(t)}else"/account"===e||e.startsWith("/account/")?(ba&&!t&&(e=q),window.location.href=e):window.location.href=e}function Qr(e){let t={};if(e?.includes("|")){const n=e.split("|");t.value=n[0],t.country_code=n[1]}else t.value=e,t.country_code=Ie;return t}function Xr(){return!!window?.Shopify?.shop||!!window?.ShopifyAnalytics||!!window?.Shopify?.designMode}function Zr(e){if(!e)return null;try{const t=atob(e),n=new Uint8Array(t.length);for(let e=0;e<t.length;e++)n[e]=t.charCodeAt(e);return decodeURIComponent(n.reduce(((e,t)=>e+String.fromCharCode(t)),""))}catch(e){return""}}function es(){document.getElementById("kp-login-button-header-logo")?.addEventListener("click",(()=>{window.location.href="/account"})),document.getElementById("kp-login-button-header-logo-mobile")?.addEventListener("click",(()=>{window.location.href="/account"}))}function ts(){const e=document.getElementById("account-popover"),t=document.querySelector("floating-panel-component.account-popover__panel");t&&t.setAttribute("popover",""),e&&e.hidePopover()}const ns=async()=>{if(Aa.some((e=>"web_personalization"===e.name)))try{const e=await Es({mid:window.merchantInfo.mid}),t=new CustomEvent("kp_web_personalization_data",{detail:{...e?.body}});window.dispatchEvent(t)}catch(e){return null}},os=()=>{const e=ka.environment;return"dev"===e?"DEVKWIKFORMTOKEN":"qa"===e?"QAKWIKFORMTOKEN":"sandbox"===e?"SANDBOXKWIKFORMTOKEN":"PRODKWIKFORMTOKEN"},is=()=>{const e=new CustomEvent("kp_customer_id",{detail:{user_logged_in:!0}});window.dispatchEvent(e)},as=new $i("https://gkx.gokwik.co");let rs,ss,cs,_s,us=!1,ls=[];function ds(e,t=!1){const{response:n}=e,o=n?.data?.error;if(401===n?.status&&t)return handleLogout();if(403===n?.status&&o===Ue.something_went_worng){const e=new CustomEvent("kp-health",{detail:{status:!1}});window.dispatchEvent(e)}if(o===Ue.scope_missing&&Bi({category:"kp_account_page",action:"page_load",label:"account_page_scope_missing"}),o)return{status:n.status,message:o};throw e}async function ps(e){try{const t=$a(we.KP_MERCHANT_CONFIG),n=qa(te.KP_REQUEST_ID);if(t)return JSON.parse(t);{const t={[re]:e,[_e]:n},{body:o}=await as.get(`${Vt.getMerchantConfig}/${e}`,{},{},t);return o?.data&&(za(we.KP_MERCHANT_CONFIG,JSON.stringify(o?.data),void 0,!1,ge),o?.data?.kpRequestId&&Qa(te.KP_REQUEST_ID,o?.data?.kpRequestId)),o?.data}}catch(e){return nr(ie.GET_MERCHANT_CONFIG_SERVER_ERROR),ds(e)}}async function ms(e,t,n,o,i,a){try{const r=qa(te.KP_REQUEST_ID);let s=Xa(Da());if(!s&&(s=await ks(t,Vt.shopifyLoginData),!s))return{status:401,message:x.serverError};const c={"Content-Type":"application/json",[re]:t,[se]:s,[ce]:ss||r,[_e]:r},_="string"==typeof a?JSON.parse(a):a,u={email:e,id:n,redirectUrl:o,state:i,..._&&{tags:_}};return await as.post(Vt.shopifyLoginData,{},u,c)}catch(e){return ds(e,!0)}}async function fs({mid:e,themeId:t,componentKeys:n}){try{const o=qa(te.KP_REQUEST_ID),i={accept:"application/json",[re]:e,[_e]:o},a={themeId:t,components:n};return await as.get(`${Vt.getAssetsPropertiesUrl}/${e}`,a,{},i)}catch(e){return ds(e)}}async function hs(e=window?.merchantInfo?.mid){try{const t=Wa(we.KP_META_KWIKADS_CONFIG),n=Wa(we.KP_META_KWIKADS_CUSTOM_EVENT),o=Wa(we.KP_META_KWIKADS_KP_CUSTOM_EVENT),i=qa(te.KP_REQUEST_ID);if(t||n||o){let e=t,i=n,a=o;i&&Array.isArray(i)&&(i=function(e){const t=qa(te.META_CUSTOM_EVENTS_CSV_DATA);if(!t)return e;try{const n=JSON.parse(t);e.forEach(((e,t)=>{e?.conditions&&Array.isArray(e.conditions)&&e.conditions.forEach(((e,o)=>{if(e.value&&"string"==typeof e.value&&e.value.startsWith("__LARGE_FIELD_REF__")){const i=e.value.replace("__LARGE_FIELD_REF__",""),a=n[i];a&&a.eventIndex===t&&a.conditionIndex===o&&(e.value=a.value)}}))}))}catch(e){}return e}(i));const r=[...i||[],...a||[]];return e.customEvents=r,e}{const t={accept:"application/json",[re]:e,[ae]:e,[_e]:i||ke},n={platform:"META",isActive:!0},o=(await as.get(""+Vt.getKwikAddsCustomEvents,n,{},t)).body;let a=o?.data;if(a){let e=(a?.customEvents||[]).filter((e=>"KP_CUSTOM"!==e?.type)),t=(a?.customEvents||[]).filter((e=>"KP_CUSTOM"===e?.type));e=function(e){const t=De,n={};return e.forEach(((e,o)=>{e?.conditions&&Array.isArray(e.conditions)&&e.conditions.forEach(((e,i)=>{if(t.includes(e.field)&&e.value&&Array.isArray(e.value)&&e.value.length>0){const t=`${o}_${i}_${e.field}`;n[t]={eventIndex:o,conditionIndex:i,field:e.field,value:e.value,operator:e.operator,logic:e.logic},e.value="__LARGE_FIELD_REF__"+t}}))})),Object.keys(n).length>0&&Qa(te.META_CUSTOM_EVENTS_CSV_DATA,JSON.stringify(n)),e}(e),ja(we.KP_META_KWIKADS_CUSTOM_EVENT,JSON.stringify(e),void 0,!1,20),ja(we.KP_META_KWIKADS_KP_CUSTOM_EVENT,JSON.stringify(t),void 0,!1,20),delete a.customEvents,ja(we.KP_META_KWIKADS_CONFIG,JSON.stringify(a),void 0,!1,20)}return o?.data}}catch(e){return ds(e)}}async function Es({mid:e=window.merchantInfo.mid}){try{const t=$a(te.KP_REQUEST_ID),n=Xa(Da()),o={accept:"application/json",[re]:e,[_e]:t,[ce]:ss||t||ke,[se]:n};return await as.get(""+Vt.getWebPersonalizationInfo,{},{},o)}catch(e){return ds(e)}}function ws(e,t,n=null){try{const o=qa(te.KP_REQUEST_ID);if(ls?.some((e=>e?.name===zt.PROVIDERS.EASY_REWARDZ))){const i={accept:"application/json",[re]:e,[_e]:o},a={merchantId:e,customerPhone:t?.value,countryCode:t?.country_code};n&&(a.customerEmail=n),function(e,t){try{const n=qa(te.KP_REQUEST_ID),o={...t,[_e]:n};as.post(""+Vt.integrateEasyRewardzUrl,{},e,o)}catch(e){return ds(e)}}(a,i)}}catch(e){}}async function gs(e,t,n=null){try{const o=qa(te.KP_REQUEST_ID);let i=Xa(Da());if(!i&&(i=await ks(mid,Vt.integratePopclubUrl),!i))return{status:401,message:x.serverError};if(ls?.some((e=>e?.name===zt.PROVIDERS.POPCLUB&&e.category===Pe.LOGIN_PARTNER))){const a={accept:"application/json",[se]:i,[re]:e,[_e]:o},r={merchantId:e,shopifySessionCookie:t};n&&(r.cem=await Br(n)),"undefined"!=typeof window&&(r.storeDomain=window?.Shopify?.shop),function(e,t){try{const n=qa(te.KP_REQUEST_ID),o={...t,[_e]:n};as.post(""+Vt.integratePopclubUrl,{},e,o)}catch(e){return ds(e)}}(r,a)}}catch(e){}}function ys(e,t){if(ls?.some((e=>e?.name===Ne.flits))&&t&&$a(me))try{const n=qa(te.KP_REQUEST_ID),o={accept:"application/json",[re]:e,[_e]:n||ke},i={inviter_referral_code:$a(me),receiver_shopify_customer_id:t};sessionStorage.removeItem(me),as.post(""+Vt.integrateFlitsUrl,{},i,o)}catch(e){return ds(e)}}async function Is(e,t){try{const n=qa(te.KP_REQUEST_ID),o={[ae]:e,[re]:e,[_e]:n,token:t};return await as.get(Vt.getGkpTokenUrl,{},{},o)}catch(e){return ds(e,!0)}}async function Ss({email:e,mid:t,id:n,redirectUrl:o,state:i,shopify_tags:a}){try{const r=qa(te.KP_REQUEST_ID);let s=Xa(Da());if(!s&&(s=await ks(t,Vt.shopifyLoginDataV2URL),!s))return{status:401,message:x.serverError};const c={[re]:t,[se]:s,[ce]:ss||r||ke,[_e]:r||ke},_=JSON.parse($a(oe.kp_notification_checked)),u="string"==typeof a?JSON.parse(a):a,l={email:e,id:n,redirectUrl:o,state:i,...u&&{tags:u}};null!==_&&(l.isMarketingEventSubscribed=_);let d=Vt.shopifyLoginDataV2URL;return us&&(d=Vt.shopifyLoginDataForCustomAccountV2URL),await as.post(d,{},l,c)}catch(e){return ds(e,!0)}}function Os({label:e,phone:t="NA"}){const n=new CustomEvent({type:jt,context:{category:Wt.token_not_found,action:$t.error,label:e,value:t}});window.dispatchEvent(n)}async function ks(e,t){try{const n=Xa(Ua());if(!n)return Os({label:t}),null;const o=await Is(e,n),i=o?.body?.data?.token;return er(Da(),i),i||Os({label:t}),i}catch(e){return ds(e)}}async function Ns(e,t,n,o){try{const i=qa(te.KP_REQUEST_ID),a={[ae]:e,[re]:e,[ce]:ss||i||ke,[_e]:i||ke,trigger:o};return t&&(a[se]=t),n&&(a[le]=n),await as.get(Vt.validateToken,{},{},a)}catch(e){return ds(e)}}function Ps(t){let n,o,i,a,s,c;return{c(){var e,s;n=m("iframe"),e=n.src,s=o="https://pdp.gokwik.co/kwikpass/kwikpass.html?version=20260220092513972",r||(r=document.createElement("a")),r.href=s,e!==r.href&&w(n,"src","https://pdp.gokwik.co/kwikpass/kwikpass.html?version=20260220092513972"),w(n,"title",""),w(n,"allow","otp-credentials"),w(n,"class",i=`${t[0]&&t[2]&&t[3]?"":"hidden"} ${"1240px"===t[4]?"iframe-kp":"iframe-kp iframe-breakpoint"}`),w(n,"id","iframe-kp"),w(n,"style",a="width: "+("1240px"===t[4]?"100%":t[4]+""))},m(e,o){d(e,n,o),t[55](n),s||(c=E(n,"load",t[56]),s=!0)},p(e,t){29&t[0]&&i!==(i=`${e[0]&&e[2]&&e[3]?"":"hidden"} ${"1240px"===e[4]?"iframe-kp":"iframe-kp iframe-breakpoint"}`)&&w(n,"class",i),16&t[0]&&a!==(a="width: "+("1240px"===e[4]?"100%":e[4]+""))&&w(n,"style",a)},i:e,o:e,d(e){e&&p(n),t[55](null),s=!1,c()}}}function Ts(e,t,n){let o,i;u(e,_t,(e=>n(4,o=e)));let a=!1,{merchantInfo:r,platform:s,merchantUrl:c,token:_,showLogin:l,userId:d,showPage:p,sessionId:m,triggerPage:f,fireNotify:h,shopifySessionId:E,fullPageUrl:w,autoloadLogin:g,isWhatsAppInstalled:y,isTrueCallerInstalled:S,pathName:k,discount:N,couponCode:P,merchantName:T,isWhatsappLogin:v,loginModalAssets:b,autoLoadPopUpAssets:R,autoLoadPopUpConfigType:A,phoneNumber:C,pageOriginURL:L,shopifyLoginModalAssets:U,redirectUrl:D,kpMultipleEmail:M,kcPhoneNumber:K,isShowShopifyLoginLoader:F,isShopifyLoginNeeded:H,notificationIsChecked:G,isShowEmailInputScreenOnButtonClick:B,kpRequestId:x,openModalFrom:V,shopifyCustomerId:j,loginFrom:W,isCredEnabled:$,checkoutOffers:q,integrationType:Y,unauthenticatedPhoneNumber:J,authenticatedPhoneNumber:z,kpEmail:Q,autoLoadPopupId:X,discountPopupOfferType:Z,isLogout:ee,country_code:te,isCustomAccountPageEnabled:ne,createIframe:oe,kwikFormProperties:ie,shopifyEmailStatus:ae}=t,re=!1;return I((()=>{const e=document.getElementById("iframe-kp"),t=()=>{window.IS_KP_IFRAME_LOADED=!0,e?.contentWindow?.postMessage({merchantInfo:r,platform:s,merchantUrl:c,token:_,showLogin:l,showPage:p,userId:d,sessionId:m,triggerPage:f,fireNotify:h,shopifySessionId:E,fullPageUrl:w,autoloadLogin:g,isWhatsAppInstalled:y,isTrueCallerInstalled:S,pathName:k,discount:N,couponCode:P,merchantName:T,isWhatsappLogin:v,loginModalAssets:b,autoLoadPopUpAssets:R,autoLoadPopUpConfigType:A,phoneNumber:C,pageOriginURL:L,shopifyLoginModalAssets:U,kpMultipleEmail:M,redirectUrl:D,notificationIsChecked:G,kcPhoneNumber:K,isShowShopifyLoginLoader:F,isShopifyLoginNeeded:H,isShowEmailInputScreenOnButtonClick:B,kpRequestId:x,openModalFrom:V,shopifyCustomerId:j,loginFrom:W,isCredEnabled:$,checkoutOffers:q,integrationType:Y,autoLoadPopupId:X,kpEmail:Q,unauthenticatedPhoneNumber:J,authenticatedPhoneNumber:z,discountPopupOfferType:Z,queryParams:window?.location?.search,isLogout:ee,country_code:te,isCustomAccountPageEnabled:ne,kwikFormProperties:ie,shopifyEmailStatus:ae,createIframe:oe},"https://pdp.gokwik.co/kwikpass")};window.addEventListener("message",(o=>{"clearKpIframeInterval"===o.data&&oe&&re&&e?.removeEventListener("load",t),"showIframe"===o.data?.type&&n(2,a=o.data.value)})),At.subscribe((n=>{const o=new CustomEvent("kpPopup",{detail:{status:n}});if(window.dispatchEvent(o),n){const n=document.getElementById("process-sso");n&&n.remove(),window.IS_PROCESS_SSO_LOADED=!1,e?.contentWindow&&oe&&re&&t(),e?.addEventListener("load",t)}else window.IS_KP_IFRAME_LOADED&&e?.contentWindow?.postMessage({merchantInfo:r,showLogin:!1},"https://pdp.gokwik.co/kwikpass")}))})),e.$$set=e=>{"merchantInfo"in e&&n(5,r=e.merchantInfo),"platform"in e&&n(6,s=e.platform),"merchantUrl"in e&&n(7,c=e.merchantUrl),"token"in e&&n(8,_=e.token),"showLogin"in e&&n(9,l=e.showLogin),"userId"in e&&n(10,d=e.userId),"showPage"in e&&n(11,p=e.showPage),"sessionId"in e&&n(12,m=e.sessionId),"triggerPage"in e&&n(13,f=e.triggerPage),"fireNotify"in e&&n(14,h=e.fireNotify),"shopifySessionId"in e&&n(15,E=e.shopifySessionId),"fullPageUrl"in e&&n(16,w=e.fullPageUrl),"autoloadLogin"in e&&n(17,g=e.autoloadLogin),"isWhatsAppInstalled"in e&&n(18,y=e.isWhatsAppInstalled),"isTrueCallerInstalled"in e&&n(19,S=e.isTrueCallerInstalled),"pathName"in e&&n(20,k=e.pathName),"discount"in e&&n(21,N=e.discount),"couponCode"in e&&n(22,P=e.couponCode),"merchantName"in e&&n(23,T=e.merchantName),"isWhatsappLogin"in e&&n(24,v=e.isWhatsappLogin),"loginModalAssets"in e&&n(25,b=e.loginModalAssets),"autoLoadPopUpAssets"in e&&n(26,R=e.autoLoadPopUpAssets),"autoLoadPopUpConfigType"in e&&n(27,A=e.autoLoadPopUpConfigType),"phoneNumber"in e&&n(28,C=e.phoneNumber),"pageOriginURL"in e&&n(29,L=e.pageOriginURL),"shopifyLoginModalAssets"in e&&n(30,U=e.shopifyLoginModalAssets),"redirectUrl"in e&&n(31,D=e.redirectUrl),"kpMultipleEmail"in e&&n(32,M=e.kpMultipleEmail),"kcPhoneNumber"in e&&n(33,K=e.kcPhoneNumber),"isShowShopifyLoginLoader"in e&&n(34,F=e.isShowShopifyLoginLoader),"isShopifyLoginNeeded"in e&&n(35,H=e.isShopifyLoginNeeded),"notificationIsChecked"in e&&n(36,G=e.notificationIsChecked),"isShowEmailInputScreenOnButtonClick"in e&&n(37,B=e.isShowEmailInputScreenOnButtonClick),"kpRequestId"in e&&n(38,x=e.kpRequestId),"openModalFrom"in e&&n(39,V=e.openModalFrom),"shopifyCustomerId"in e&&n(40,j=e.shopifyCustomerId),"loginFrom"in e&&n(41,W=e.loginFrom),"isCredEnabled"in e&&n(42,$=e.isCredEnabled),"checkoutOffers"in e&&n(43,q=e.checkoutOffers),"integrationType"in e&&n(44,Y=e.integrationType),"unauthenticatedPhoneNumber"in e&&n(45,J=e.unauthenticatedPhoneNumber),"authenticatedPhoneNumber"in e&&n(46,z=e.authenticatedPhoneNumber),"kpEmail"in e&&n(47,Q=e.kpEmail),"autoLoadPopupId"in e&&n(48,X=e.autoLoadPopupId),"discountPopupOfferType"in e&&n(49,Z=e.discountPopupOfferType),"isLogout"in e&&n(50,ee=e.isLogout),"country_code"in e&&n(51,te=e.country_code),"isCustomAccountPageEnabled"in e&&n(52,ne=e.isCustomAccountPageEnabled),"createIframe"in e&&n(0,oe=e.createIframe),"kwikFormProperties"in e&&n(53,ie=e.kwikFormProperties),"shopifyEmailStatus"in e&&n(54,ae=e.shopifyEmailStatus)},e.$$.update=()=>{1&e.$$.dirty[0]&&At.set(oe)},[oe,i,a,re,o,r,s,c,_,l,d,p,m,f,h,E,w,g,y,S,k,N,P,T,v,b,R,A,C,L,U,D,M,K,F,H,G,B,x,V,j,W,$,q,Y,J,z,Q,X,Z,ee,te,ne,ie,ae,function(e){O[e?"unshift":"push"]((()=>{i=e,n(1,i)}))},()=>{n(3,re=!0),window.IS_KP_IFRAME_LOADED=!0;const e=new CustomEvent("kp_iframe_loaded");window.dispatchEvent(e)}]}rt.subscribe((e=>{ls=e})),wt.subscribe((e=>e)),Be.subscribe((e=>rs=e)),gt.subscribe((e=>{e&&(ss=e)})),Kt.subscribe((e=>{e&&(us=e)})),je.subscribe((e=>e)),Gt.subscribe((e=>cs=e));class vs extends B{constructor(e){super(),G(this,e,Ts,Ps,a,{merchantInfo:5,platform:6,merchantUrl:7,token:8,showLogin:9,userId:10,showPage:11,sessionId:12,triggerPage:13,fireNotify:14,shopifySessionId:15,fullPageUrl:16,autoloadLogin:17,isWhatsAppInstalled:18,isTrueCallerInstalled:19,pathName:20,discount:21,couponCode:22,merchantName:23,isWhatsappLogin:24,loginModalAssets:25,autoLoadPopUpAssets:26,autoLoadPopUpConfigType:27,phoneNumber:28,pageOriginURL:29,shopifyLoginModalAssets:30,redirectUrl:31,kpMultipleEmail:32,kcPhoneNumber:33,isShowShopifyLoginLoader:34,isShopifyLoginNeeded:35,notificationIsChecked:36,isShowEmailInputScreenOnButtonClick:37,kpRequestId:38,openModalFrom:39,shopifyCustomerId:40,loginFrom:41,isCredEnabled:42,checkoutOffers:43,integrationType:44,unauthenticatedPhoneNumber:45,authenticatedPhoneNumber:46,kpEmail:47,autoLoadPopupId:48,discountPopupOfferType:49,isLogout:50,country_code:51,isCustomAccountPageEnabled:52,createIframe:0,kwikFormProperties:53,shopifyEmailStatus:54},null,[-1,-1])}}Ve.subscribe((e=>_s=e));const bs="LOGIN_MODAL_ASSETS",Rs="CUSTOM_LOGIN_MODAL_ASSETS",As=async({fieldData:e="",mid:t,redirectURL:n})=>{const o=JSON.parse(e);let i={};Object.keys(Le).map((e=>{let t=Le[e];o[t]&&(t===Le.EMAIL&&(i.email=o?.[t]),t===Le.DOB&&(i.dateOfBirth=o?.[t]),t===Le.GENDER&&(i.gender=o?.[t]),t===Le.PROFESSION&&(i.profession=o?.[t]),t===Le.NAME&&(i.name=o?.[t]))}));try{const e=await async function({mid:e,body:t,gkToken:n}){try{const o=qa(te.KP_REQUEST_ID);let i=Xa(Da())||n;if(!i&&(i=await ks(e,Vt.createShopifySession),!i))return{status:401,message:x.serverError};let a=window.location.pathname;a.includes("/account")&&(a="/");const r={"Content-Type":"application/json",[re]:e,[se]:i,[ce]:ss||o,[_e]:o},s=JSON.parse($a(oe.kp_notification_checked));let c={...t};return c.redirectUrl=a,null!==s&&(c.isMarketingEventSubscribed=s),await as.post(Vt.createShopifySessionWithMetaForCustom,{},c,r)}catch(e){return ds(e,!0)}}({mid:t,redirectUrl:n,body:i});return e}catch(e){return null}};let Cs=!1;At.subscribe((e=>Cs=e));const Ls=async()=>{try{const{status:e,body:t}=await async function(e){try{const t=qa(te.KP_REQUEST_ID);let n=Xa(Da());if(!n&&(n=await ks(e,Vt.updateCustomer),!n))return{status:401,message:x.serverError};const o={"Content-Type":"application/json",[re]:e,[se]:n,[ce]:ss||t||ke,[_e]:t||ke};return await as.get(Vt.customLogin,{},{},o)}catch(e){return ds(e,!0)}}(window.merchantInfo.mid);if(pr(e)&&t?.success){if(!t?.data?.emailRequired||t?.data?.email&&(t?.isSuccess||!t?.data?.email)){Qa("isUserCreated",!0);const n=t?.data?.merchantResponse,o=new CustomEvent("user_loggedin_merchant",{detail:n});return window.dispatchEvent(o),t?.data?.email&&await Wr(t.data.email),{status:e,isSuccess:t?.isSuccess}}(()=>{sessionStorage.setItem("shown_wb",0),sessionStorage.setItem("disable_auto_login_popup",1);const e=document.getElementById("iframe-kp");if(e&&Cs)e.contentWindow.postMessage({type:Xt.SHOW_EMAIL_INPUT,showLogin:!0,kwikFormProperties:null,isShowShopifyLoginLoader:!1,autoloadLogin:!1,loginscreenPage:3,isShopifyLoginNeeded:!0,notificationIsChecked:JSON.parse($a(oe.kp_notification_checked)),kpRequestId:getValueFromCookiesOrLocalStorage(te.KP_REQUEST_ID)},(merchantInfo,"https://pdp.gokwik.co"));else{const e=new CustomEvent("open_email_input_modal_for_custom_merchant");window.dispatchEvent(e)}})()}else{const e=new CustomEvent("close_popup");window.dispatchEvent(e)}}catch(e){const t=new CustomEvent("close_popup");return window.dispatchEvent(t),null}};function Us(t){let n,i,a,r,s,c,_,u,g,y,I,S;return{c(){n=m("div"),i=m("div"),a=m("div"),a.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="48" height="61" viewBox="0 0 48 61" fill="none"><path style="opacity: 1" d="M40 28.9547H27.3232L34.7119 10L8 32.0578H22.4878L15.1171 51L40 28.9547Z" fill="url(#paint0_linear_2307_9690)"></path><path style="transform-origin: center; animation: emanateStroke 1.5s infinite ease-out" d="M21.7318 32.3176H1.39955L38.9011 1.60199L28.5194 28.018L28.251 28.7009H28.9847H46.6736L11.8939 59.2639L22.1972 33.0002L22.465 32.3176H21.7318Z" stroke="url(#paint1_linear_2307_9690)"></path><defs><linearGradient id="paint0_linear_2307_9690" x1="24.0091" y1="22.2875" x2="24.0091" y2="42.8748" gradientUnits="userSpaceOnUse"><stop stop-color="#FFD100"></stop><stop offset="1" stop-color="#FEA200"></stop></linearGradient><linearGradient id="paint1_linear_2307_9690" x1="24" y1="0" x2="24" y2="61" gradientUnits="userSpaceOnUse"><stop stop-color="#FFD100"></stop><stop offset="1" stop-color="#FEA200"></stop></linearGradient></defs></svg>',r=h(),s=m("h2"),s.textContent="Securely logging you in!",c=h(),_=m("p"),u=f("If you don't land on the account page in 10 seconds "),g=m("button"),g.textContent="go back",y=f(" and retry!"),w(a,"class","thunder-container"),w(g,"class","link-button"),w(i,"class","kp-loader-popup"),w(n,"class","kp-loader-overlay")},m(e,o){d(e,n,o),l(n,i),l(i,a),l(i,r),l(i,s),l(i,c),l(i,_),l(_,u),l(_,g),l(_,y),I||(S=[E(g,"click",t[0]),E(g,"keydown",t[1])],I=!0)},p:e,i:e,o:e,d(e){e&&p(n),I=!1,o(S)}}}function Ds(e){var t=document.createElement("style");return t.innerHTML="\n    \t.kp-loader-overlay {\n\t\t\t\tposition: fixed;\n\t\t\t\ttop: 0;\n\t\t\t\tleft: 0;\n\t\t\t\tright: 0;\n\t\t\t\tbottom: 0;\n\t\t\t\twidth: 100vw;\n\t\t\t\theight: 100vh;\n\t\t\t\tbackground: rgba(0, 0, 0, 0.5);\n\t\t\t\tz-index: 1000;\n\t\t\t}\n\n\t\t.kp-loader-popup {\n\t\t\tpadding: 32px 16px;\n\t\t\tborder-radius: 12px;\n\t\t\tborder-bottom-left-radius: 0px;\n\t\t\tborder-bottom-right-radius: 0px;\n\t\t\ttext-align: center;\n\t\t\tbackground: white;\n\t\t\tposition: absolute;\n\t\t\ttop: auto;\n\t\t\tleft: 0;\n\t\t\tright: 0;\n\t\t\tbottom: 0;\n\t\t\theight: 290px;\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\tjustify-content: center;\n\t\t}\n\n\t\t@media (min-width: 576px) {\n\t\t\t.kp-loader-popup {\n\t\t\t\tpadding: 32px;\n\t\t\t\tborder-radius: 12px;\n\t\t\t\twidth: 391px;\n\t\t\t\theight: 270px;\n\t\t\t\tposition: absolute;\n\t\t\t\ttop: 50%;\n\t\t\t\tleft: 50%;\n\t\t\t\tbottom: auto;\n\t\t\t\tright: auto;\n\t\t\t\ttransform: translate(-50%, -50%);\n\t\t\t\tbox-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n\t\t\t}\n\t\t}\n\t\t.kp-loader-popup h2 {\n\t\t\tmargin: 0px;\n\t\t\tpadding: 0px;\n\t\t\tfont-weight: 600;\n\t\t\tfont-size: 18px;\n\t\t\tfont-family: 'Inter', sans-serif;\n\t\t\ttext-transform: normal;\n\t\t}\n\n\t\t.kp-loader-popup p {\n\t\t\tfont-size: 14px;\n\t\t\tcolor: #333;\n\t\t\tfont-family: 'Inter', sans-serif;\n\t\t\twidth: 314px;\n\t\t\tpadding: 0px;\n\t\t\tmargin: 16px auto;\n\t\t\ttext-transform: normal;\n\t\t}\n\n\t\t.thunder-container {\n\t\t\twidth: 48px;\n\t\t\theight: 61px;\n\t\t\tmargin: 0 auto 20px;\n\t\t}\n\t\t\t@keyframes emanateStroke {\n\t\t\t0% {\n\t\t\t\topacity: 0;\n\t\t\t\tstroke-width: 0;\n\t\t\t\ttransform: scale(0.95);\n\t\t\t}\n\t\t\t30% {\n\t\t\t\topacity: 1;\n\t\t\t\tstroke-width: 2;\n\t\t\t\ttransform: scale(1.05);\n\t\t\t}\n\t\t\t100% {\n\t\t\t\topacity: 0;\n\t\t\t\tstroke-width: 0;\n\t\t\t\ttransform: scale(1.2);\n\t\t\t}\n\t\t}\n\n\t\t.kp-loader-popup .link-button {\n\t\t\tall: unset;\n\t\t\tbackground: none;\n\t\t\tborder: none;\n\t\t\tcolor: #007bff;\n\t\t\tcursor: pointer;\n\t\t\tpadding: 0;\n\t\t\tfont: inherit;\n\t\t}\n\t\t.kp-loader-popup .link-button:hover {\n\t\t\tcolor: #007bff;\n\t\t\ttext-decoration: underline;\n\t\t}\n    ",document.getElementsByTagName("head")[0].appendChild(t),[()=>window.history.back(),e=>"Enter"===e.key&&window.history.back()]}class Ms extends B{constructor(e){super(),G(this,e,Ds,Us,a,{})}}const Ks=new $i("https://gkx.gokwik.co");function Fs(e){let t,n;return t=new Ms({}),{c(){K(t.$$.fragment)},m(e,o){F(t,e,o),n=!0},i(e){n||(D(t.$$.fragment,e),n=!0)},o(e){M(t.$$.fragment,e),n=!1},d(e){H(t,e)}}}function Hs(e){let t,n,i,a,r=e[37]&&Fs();return i=new vs({props:{merchantInfo:e[0],platform:e[3],merchantUrl:e[43],token:e[1],showLogin:e[10],userId:e[8],sessionId:e[9],triggerPage:e[11],fireNotify:e[46],shopifySessionId:e[12],fullPageUrl:e[44],autoloadLogin:e[5],isWhatsAppInstalled:e[20],isTrueCallerInstalled:e[21],pathName:e[45],discount:e[15],couponCode:e[17],merchantName:e[18],showPage:e[13],isWhatsappLogin:e[19],loginModalAssets:e[22],autoLoadPopUpAssets:e[23],autoLoadPopUpConfigType:e[24],shopifyLoginModalAssets:e[47],phoneNumber:e[25],pageOriginURL:e[39],kpMultipleEmail:e[2],redirectUrl:e[14],notificationIsChecked:e[38],kcPhoneNumber:e[27],isShowShopifyLoginLoader:e[4],isShopifyLoginNeeded:e[26],isShowEmailInputScreenOnButtonClick:e[6],kpRequestId:e[29],shopifyCustomerId:e[28],openModalFrom:e[48],autoLoadPopupId:e[32],loginFrom:e[16],isCredEnabled:e[40],checkoutOffers:e[49],integrationType:e[30],discountPopupOfferType:e[31],kpPopupSource:e[33],kpPopupId:e[34],createIframe:e[7],country_code:"IN",kpEmail:e[35],unauthenticatedPhoneNumber:Cr(),authenticatedPhoneNumber:Ar({mid:e[0].mid}),isLogout:ar(ee.isLogout),isCustomAccountPageEnabled:e[41],kwikFormProperties:e[36],shopifyEmailStatus:e[42]}}),{c(){r&&r.c(),t=h(),n=m("div"),K(i.$$.fragment),w(n,"id","d2c-pass")},m(e,o){r&&r.m(e,o),d(e,t,o),d(e,n,o),F(i,n,null),a=!0},p(e,n){e[37]?r?64&n[1]&&D(r,1):(r=Fs(),r.c(),D(r,1),r.m(t.parentNode,t)):r&&(U={r:0,c:[],p:U},M(r,1,1,(()=>{r=null})),U.r||o(U.c),U=U.p);const a={};1&n[0]&&(a.merchantInfo=e[0]),8&n[0]&&(a.platform=e[3]),2&n[0]&&(a.token=e[1]),1024&n[0]&&(a.showLogin=e[10]),256&n[0]&&(a.userId=e[8]),512&n[0]&&(a.sessionId=e[9]),2048&n[0]&&(a.triggerPage=e[11]),4096&n[0]&&(a.shopifySessionId=e[12]),32&n[0]&&(a.autoloadLogin=e[5]),1048576&n[0]&&(a.isWhatsAppInstalled=e[20]),2097152&n[0]&&(a.isTrueCallerInstalled=e[21]),32768&n[0]&&(a.discount=e[15]),131072&n[0]&&(a.couponCode=e[17]),262144&n[0]&&(a.merchantName=e[18]),8192&n[0]&&(a.showPage=e[13]),524288&n[0]&&(a.isWhatsappLogin=e[19]),4194304&n[0]&&(a.loginModalAssets=e[22]),8388608&n[0]&&(a.autoLoadPopUpAssets=e[23]),16777216&n[0]&&(a.autoLoadPopUpConfigType=e[24]),33554432&n[0]&&(a.phoneNumber=e[25]),256&n[1]&&(a.pageOriginURL=e[39]),4&n[0]&&(a.kpMultipleEmail=e[2]),16384&n[0]&&(a.redirectUrl=e[14]),128&n[1]&&(a.notificationIsChecked=e[38]),134217728&n[0]&&(a.kcPhoneNumber=e[27]),16&n[0]&&(a.isShowShopifyLoginLoader=e[4]),67108864&n[0]&&(a.isShopifyLoginNeeded=e[26]),64&n[0]&&(a.isShowEmailInputScreenOnButtonClick=e[6]),536870912&n[0]&&(a.kpRequestId=e[29]),268435456&n[0]&&(a.shopifyCustomerId=e[28]),2&n[1]&&(a.autoLoadPopupId=e[32]),65536&n[0]&&(a.loginFrom=e[16]),512&n[1]&&(a.isCredEnabled=e[40]),1073741824&n[0]&&(a.integrationType=e[30]),1&n[1]&&(a.discountPopupOfferType=e[31]),4&n[1]&&(a.kpPopupSource=e[33]),8&n[1]&&(a.kpPopupId=e[34]),128&n[0]&&(a.createIframe=e[7]),16&n[1]&&(a.kpEmail=e[35]),1&n[0]&&(a.authenticatedPhoneNumber=Ar({mid:e[0].mid})),1024&n[1]&&(a.isCustomAccountPageEnabled=e[41]),32&n[1]&&(a.kwikFormProperties=e[36]),2048&n[1]&&(a.shopifyEmailStatus=e[42]),i.$set(a)},i(e){a||(D(r),D(i.$$.fragment,e),a=!0)},o(e){M(r),M(i.$$.fragment,e),a=!1},d(e){r&&r.d(e),e&&p(t),e&&p(n),H(i)}}}function Gs(e,t,n){let o,i,a,r,s,c,_,l,d;u(e,et,(e=>n(67,o=e))),u(e,At,(e=>n(68,i=e))),u(e,Ft,(e=>n(69,a=e))),u(e,ht,(e=>n(70,r=e))),u(e,ot,(e=>n(71,s=e))),u(e,xt,(e=>n(72,c=e))),u(e,Bt,(e=>n(73,_=e))),u(e,Ct,(e=>n(74,l=e))),u(e,Dt,(e=>n(75,d=e)));const{TO_HANDLE_SHOPIFY_SESSION_FROM_IFRAME:p,TO_HANDLE_EMAIL_INPUT_MODAL_LOGIN_FROM_IFRAME:m,SHOW_EMAIL_INPUT:f}=Xt;let{merchantInfo:h,token:E}=t;const w=window.location.origin,g=window.location.href,S=window.location.pathname;let O,k,N,P,T,v,b,R,A,C,L,U,D,M,K,F,H,G,B,ne,ue,le,me,ge,Pe,ve,be,Re,Ae,Ce,Ue,De,Me=null,Ke=null,Fe=!0,He=!1,Ge=!1,Be=!1,je=!1,We=!1,qe="/",Ye=null,Je=Oe,ze=!1,Qe=[],nt=5e3,rt=5e3,ut=!1,lt=!1,dt=!1,gt=!1,yt=!0,It=null,St="",Ot=!1,kt=!1,Nt=!1;function Pt(){const e=getCustomerId();if(null!==e){const t=localStorage.getItem("kp_customer_id");t&&e+""==t+""||zr("/account/logout")}}async function Tt(e,t=!1){if(e?.core_token){if(rr(he,fe),rr(Ee,!0),!Xa(Da())){const t=await Is(window.merchantInfo.mid,e.core_token);t?.body?.data?.token&&er(Da(),t.body.data.token)}er(Ua(),e.core_token),Sr(`${e?.phoneNumber?.country_code}|${e?.phoneNumber?.value}`),await Tr(null,"",!1,!0);const t=new CustomEvent("user-loggedin",{detail:{token:e.core_token,login_type:"sso",user_identified:!0,phone_number:!0,email:!1,from:Oe}});window.dispatchEvent(t)}t&&Pe?.toLowerCase()===Q.PLUGIN.toLowerCase()&&Pt();const n=new CustomEvent("update-dom");window.dispatchEvent(n)}tt.subscribe((e=>Ot=e)),it.subscribe((e=>n(14,qe=e))),Xe.subscribe((e=>n(20,U=e))),Ze.subscribe((e=>n(21,D=e))),Kt.subscribe((e=>n(41,Nt=e))),at.subscribe((e=>n(24,G=e))),ft.subscribe((e=>n(22,M=e))),mt.subscribe((e=>K=e)),pt.subscribe((e=>F=e)),Rt.subscribe((e=>n(31,Qe=e))),bt.subscribe((e=>n(40,kt=e))),Ft.subscribe((async e=>{n(42,De=e)})),ht.subscribe((e=>{n(23,H=e)})),Et.subscribe((e=>{n(32,ve=e)})),xe.subscribe((e=>n(3,O=e))),Ve.subscribe((e=>n(30,Pe=e))),$e.subscribe((e=>{ue=e})),st.subscribe((e=>{})),ct.subscribe((e=>{ne=e})),wt.subscribe((e=>n(39,St=e))),Lt.subscribe((e=>{e&&xi()}));const vt=async()=>{try{const e=await fetch("/cart.js");if(e.ok){const t=(await e.json()).attributes;if(t){const e=window.location.search,n=new URLSearchParams(e).get("utm_source");t.is_kwikpass_logged_in=null==n||"WhatsApp"===n||"whatsapp"===n,await(async e=>{try{await fetch("/cart/update.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({attributes:e})})}catch(e){}})(t)}}}catch(e){}},Mt=()=>{n(7,je=!0),window.removeEventListener("mousemove",Ht),window.removeEventListener("keydown",Ht),window.removeEventListener("click",Ht),window.removeEventListener("scroll",Ht),clearTimeout(L)},Ht=()=>{clearTimeout(L),L=setTimeout(Mt,1e4)},Gt=async e=>{const t=await async function({configId:e,mid:t}){try{const n={accept:"application/json",[re]:t};return await as.get(`${Vt.getAutoloadPopupConfig}/${e}`,{},{},n)}catch(e){return ds(e)}}({configId:e,mid:window.merchantInfo.mid});if(or(t?.status))dt=!0;else{const e=t?.body?.data,n=e?.component?.componentKey;Rt.set(e?.userTargeting?.offersType||[]);const o=e?.visualConfig;rt=1e3*+(o?.coupon_screen?.dismiss_timeout??5);let i=o?.tags;er(te.SHOPIFY_API_TAGS,JSON.stringify(i||null)),at.set(n),er(te.AUTOLOAD_POPUP_TYPE,n),ht.set(o),rr("AUTO_LOAD_POPUP_ASSETS",o)}},tn=async()=>{if(!1===window.kp_health_status)return!1;if(void 0===window.kp_health_status){const e=await checkKpHealth();if(window.kp_health_status=e,!e)return!1}let e=$a(we.KP_MERCHANT_CONFIG);if(e&&!1===JSON.parse(e)?.kwikpassEnabled)return!1;if(!e){const e=await ps(window.merchantInfo.mid);if(!e?.kwikpassEnabled)return!1}return!0};var nn;I((async()=>{window.__kp_scr_load=!0,window.merchantInfo.integrationType&&(Ve.set(window.merchantInfo.integrationType),n(30,Pe=window.merchantInfo.integrationType)),window.kpParamBuilderScriptsLoaded||document.getElementById("capiParamBuilderScript")||new Promise(((e,t)=>{const n=document.createElement("script");n.src=Vt.capiParamBuilderScript,n.defer=!0,n.id="capiParamBuilderScript",n.onload=()=>{e()},n.onerror=()=>{t(Error("Failed to load capiParamBuilderScript"))},document.body.appendChild(n)})).then((()=>{window.kpParamBuilderScriptsLoaded=!0})).catch((e=>{window.kpParamBuilderScriptsLoaded=!1}));const e=window?.location?.href;if(e){const t=new URL(e).origin;wt.set(t)}let t={};var u;document.cookie.split(";").forEach((function(e){let[n,o]=e.split("=");t[n.trim()]=o})),n(12,T=t._shopify_s||""),(u=document.createElement("style")).innerHTML="\n.iframe-kp.hidden {\n\tdisplay:none;\n}\n.iframe-kp{\n\tbackground: rgba(0, 0, 0, 0.56);\n\tposition: fixed;\n\ttop: 0px;\n\tbottom: 0px;\n\tright: 0px;\n\twidth: 100%;\n\tborder: none;\n\tmargin: 0;\n\tpadding: 0;\n\toverflow: hidden;\n\tz-index: 100000000;\n\theight: 100%;\n}\n\n.iframe-breakpoint{\n\tposition: fixed !important;\n    left: 50% !important;\n    transform: translateX(-50%) !important;\n}\n",document.getElementsByTagName("head")[0].appendChild(u);try{Pi?.init().then((()=>{let e=ar("longitude"),t=ar("latitude");e&&t||async function(){try{const e=await navigator.permissions.query({name:"geolocation"});"granted"===e.state&&Dr(),e.onchange=()=>{"granted"===e.state&&Dr()}}catch(e){}}()})).catch((e=>{}))}catch(e){}window.addEventListener(ie.API_KEY_SUCCESS,(async e=>{const t=e?.detail?.isAccountPage;if(await(async()=>{!0===Ot&&await(async()=>{try{let e=getThemeId();const t=window?.location?.pathname,n=ar(X);if("/"===t||null===n){const t=await fs({mid:window.merchantInfo.mid,themeId:e,componentKeys:Rs});if(or(t?.status))lt=!0;else{let e=t?.body?.data?.components?.[Rs]?.properties;e&&(mt.set(e),rr(X,e))}}else mt.set(n)}catch(e){lt=!0}})(),await(async()=>{try{let e=getThemeId();const t=window?.location?.pathname,n=ar(Z);if("/"===t||null===n){const t=await fs({mid:window.merchantInfo.mid,themeId:e,componentKeys:bs});if(or(t?.status))lt=!0;else{let e=t?.body?.data?.components?.[bs]?.properties;if(e){nt=1e3*+(e?.coupon_screen?.dismiss_timeout??5);let t=e?.tags;er(te.SHOPIFY_API_TAGS,JSON.stringify(t||null)),er(te.SHOPIFY_API_TAGS_LOGIN_MODAL,JSON.stringify(t||null)),"19g6ilvf14ycs"===window.merchantInfo.mid&&(e={otp_screen:{label:{text:"Enter OTP sent to",color:"#2F2F2F",font_size:14,font_weight:"400"},heading:{text:"Verify Phone Number",color:"#2F2F2F",font_size:14,font_weight:"700"},resend_otp:{text:"Resend OTP",color:"#2F2F2F"},edit_button:{text:"Edit",color:"#079455",border_color:"#079455",background_color:"#F6FEF9"},action_button:{text:"Verify",color:"#BBBBBB",background_color:"#000000",font_size:14,font_weight:"400"},trouble_logging_in:{text:"Help Center",color:"#BBBBBB"}},login_screen:{label:{color:"#667085",font_size:14,font_weight:"400"},loader:{color:"#2F2F2F"},heading:{color:"#2F2F2F",text_line1:"LET'S GET RARE !",text_line1_font_size:18,text_line1_font_weight:"300"},placeholder:{text:"Enter Mobile Number",color:"#BBBBBB",font_size:14,font_weight:"400"},global_login:{font_size:16,font_weight:"400",show_login_asset:!1},submitButton:{text:"Submit",color:"#000000",font_size:14,font_color:"#BBBBBB",font_weight:"400"},line_separator:{text:"OR",color:"#98A2B3",font_size:12,font_weight:"400"},policy_service:{label:"",privacy_policy_text:"Privacy Policy",terms_of_service_text:"T&Cs"},whatsapp_enabled:!1,marketing_checkbox:{text:"Notify me for Updates and Offers",font_size:12,isEnabled:!0,consentKey:0,font_weight:"400"},trouble_logging_in:{text:"Help Center",color:"#BBBBBB"},truecaller_enabled:!1,custom_field_config:{is_active:!1,field_configs:[{is_active:!0,field_name:"Email",is_mandatory:!0}]}},coupon_screen:{cta:{show_cta:!1,font_size:14,font_weight:"700"},coupon:{code:"",text:"Extra 15% unlocked",color:"#FFF",auto_apply:!1,code_label:"Code",code_font_size:12,text_font_size:16,background_color:"#000000",code_font_weight:"700",text_font_weight:"700",code_label_font_size:12,description_font_size:11,code_label_font_weight:"700",description_font_weight:"400"},loader_message:{text:"Signing you in...",color:"#2F2F2F",font_size:14,font_weight:"400",loader_color:"#2F2F2F"},dismiss_timeout:3,success_message:{color:"#00192F",text_line1_font_size:20,text_line2_font_size:20,text_line1_font_weight:"700",text_line2_font_weight:"700"}},mobile_banner_image:"https://assets.gokwik.co/uploads/1744369508906_rare-rabbit-mobile.png",desktop_banner_image:"https://assets.gokwik.co/uploads/1744369662054_Frame 1321315212.png"}),ft.set(e),pt.set(e),rr(Z,e)}}}else ft.set(n),pt.set(n)}catch(e){lt=!0}})()})(),Pe?.toLowerCase()===Q.PLUGIN.toLowerCase()&&"19g6ilvf14ycs"!==window.merchantInfo?.mid){const n=getCustomerId();if(!e?.detail?.token&&n)return;if(e?.detail?.token)Mr(t);else if("true"===sessionStorage.getItem("isLogout"))Kr(t);else{t&&ue&&nr(ie.SHOW_LOADING_SCREEN);const e=setInterval((()=>{Fe||(clearInterval(e),Fe=!1,nr(ie.HIDE_LOADING_SCREEN),Xa(Ua())?Mr(t):Kr(t))}),500)}}})),window.addEventListener("message",(async e=>{if(n(35,Ae=await $r()),e&&"https://pdp.gokwik.co"===e.origin){const t=e.data?.type,i=e?.data?.userId,a=e?.data?.kpCount;if(i&&(e=>{Xa(we.KP_USER_ID)||(Xr()&&window?.Shopify?.analytics.publish("kp_ext_id_found",{external_id:e}),(e=>{window.snowplow("setUserId",e),Bi({category:Wt.user_id_event,action:$t.found,label:qt.pdp}),er(we.KP_USER_ID,e)})(e))})(i),a&&Nr(a,i),t===Xt.KP_TOKEN_FOR_CUSTOM_MERCHANTS)(async(e,t=5e3)=>{let n=null;er(Da(),e.token),er(Ua(),e.core_token),rr(he,e?.isCoreTokenValid?"verified":"unverified"),Sr(`${e?.phoneNumber?.country_code}|${e?.phoneNumber?.value}`),e?.couponCode&&za("coupon_applied",e.couponCode,2),sessionStorage.setItem("isLogout",!1);const o=new CustomEvent("user-loggedin",{detail:{token:e.core_token,"gk-access-token":e.token}});if(window.dispatchEvent(o),e?.modalType!==Zt)e?.customFieldValues&&await As({fieldData:e?.customFieldValues,mid:window.merchantInfo.mid,redirectURL:"/"}),n=setTimeout((()=>{const e=new CustomEvent("close_popup");window.dispatchEvent(e),clearTimeout(n),n=null}),t);else{localStorage.removeItem(te.KP_EMAIL);const e=await Ls();e?.isSuccess&&(rr(he,fe),n=setTimeout((()=>{const e=new CustomEvent("close_popup");window.dispatchEvent(e),clearTimeout(n),n=null}),t))}da()})(e.data,nt);else if(e.data.type===Xt.PROCESS_FINGERPRINTING)!async function(e){if(((e=!0)=>{const t=JSON.parse(Xa(te.KP_VISITOR_INFO,e));t&&"ée"===t?.fpPhone&&tr(te.KP_VISITOR_INFO,e)})(),!Zi)return;const{visitorId:t=null,authenticated:n=!1,phoneNumber:o={},phoneNumberSource:i=""}=e;let a=i,r=null;const s=Xa(te.FP_REQUEST_ID);if(ta&&Pi.sendCustomEvent(Qt.fingerprinting,{fp_context_id:s||"NA",visitor_id:t||"VISITOR_ID_NOT_FOUND",fp_tags:"VISITOR_ID_PROCESSING",fp_fails_log:`processFingerprintingEvent: isvIdGenerationEnabled- ${ta},shouldvIdGenerate: ${ea}`}),!t&&ta&&ea)return void Xi();if(!t)return;const c=Xa(te.KP_VISITOR_ID);if(!sessionStorage.getItem(te.VISITOR_ID_SOURCE)){const e=c?Te.SOURCE_LOCAL:Te.SOURCE_PDP;sessionStorage.setItem(te.VISITOR_ID_SOURCE,Te.SOURCE_PDP),Pi.sendCustomEvent(Qt.fingerprinting,{fp_context_id:s||"NA",visitor_id:t,fp_found_page:e})}!c&&t&&er(te.KP_VISITOR_ID,encodeURIComponent(t),!0,ye);const _=Or(te.NO_OTP_FLOW_PHONE_NUMBER);if(i===Se.CORE_TOKEN)r={visitorId:t,authenticated:n,phoneNumber:o};else{const e=Xa(Ua());if(e)a=Se.CORE_TOKEN,r={visitorId:t,authenticated:!0,phoneNumber:mr(e)};else{if(i===Se.FPPHONE&&n)return Pi.sendCustomEvent(Qt.fingerprinting,{visitor_id:t,authenticated:n,phone_number:o?.value,country_code:o?.country_code||Ie,fp_action:a,fp_found_page:sessionStorage.getItem(te.VISITOR_ID_SOURCE)||"NA",fp_context_id:s||"NA"}),void ua({visitorId:t,fpPhone:o,authenticated:n});{const e=JSON.parse(Xa(te.KP_VISITOR_INFO)),c={value:e?.fpPhone,country_code:e?.countryCode||Ie},u=e?.authenticated;if(c?.value&&u)return a=Se.FPPHONE,Pi.sendCustomEvent(Qt.fingerprinting,{visitor_id:t,authenticated:u,phone_number:c?.value,country_code:c?.country_code,fp_tags:"FOUND_FP_INFO",fp_action:a,fp_found_page:sessionStorage.getItem(te.VISITOR_ID_SOURCE)||"NA",fp_context_id:s||"NA"}),void la({visitorId:t,fpPhone:c,authenticated:u});if(i===Se.EXPIRED_TOKEN_PHONE){const e=Or(te.EXPIRED_PH_NO);if(e?.value||ra({phone:o?.value,country_code:o?.country_code||Ie}),r=await ma({visitorId:t,authenticated:n,phoneNumber:o}),!r)return}else{const e=Or(te.EXPIRED_PH_NO);if(e?.value){if(a=Se.EXPIRED_TOKEN_PHONE,r=await ma({visitorId:t,authenticated:!1,phoneNumber:e}),!r)return}else if(i===Se.SRPHONE){const e=Or(te.SR_PHONE_NUMBER);if(e?.value||sa({data:{[te.SR_PHONE_NUMBER]:o}}),r=await ma({visitorId:t,authenticated:n,phoneNumber:o}),!r)return}else{const e=Or(te.SR_PHONE_NUMBER);if(e?.value){if(a=Se.SR_PHONE_NUMBER,r=await ma({visitorId:t,authenticated:!1,phoneNumber:e}),!r)return}else if(i===Se.KCPHONE){if(Xa(te.KC_PHONE)||na({data:{kcPhoneNumber:o?.value}}),r=await ma({visitorId:t,authenticated:n,phoneNumber:o}),!r)return}else{const e=JSON.parse(Xa(te.KP_VISITOR_INFO)),s={value:e?.fpPhone,country_code:e?.countryCode||Ie},c=e?.authenticated,u=Qr(Xa(te.KC_PHONE));if(u?.value||s?.value&&!c||i===Se.FPPHONE&&!n){if(a=u?.value?Se.KCPHONE:Se.FPPHONE,r=await ma({visitorId:t,authenticated:!1,phoneNumber:u||s||o}),!r)return}else if(i===Se.RPPHONE){const e=Or(te.RP_PHONE_NUMBER);if(e?.value||ia({data:{[te.RP_PHONE_NUMBER]:o}}),r=await ma({visitorId:t,authenticated:n,phoneNumber:o}),!r)return}else if(i===Se.NON_OTP_VERIFIED_PHONE){const e=Or(te.KP_NON_OTP_VERIFIED_USER);if(e?.value||ca(o),r=await ma({visitorId:t,authenticated:n,phoneNumber:o}),!r)return}else if(i===Se.SHOPIFY_APP_PHONE_NUMBER){const e=Or(te.SHOPIFY_COD_UNAUTH_PHONE_NUMBER);if(e?.value||aa({data:{[te.SHOPIFY_COD_UNAUTH_PHONE_NUMBER]:o}}),r=await ma({visitorId:t,authenticated:n,phoneNumber:o}),!r)return}else{const e=Or(te.RP_PHONE_NUMBER),s=Or(te.KP_NON_OTP_VERIFIED_USER),c=Or(te.SHOPIFY_COD_UNAUTH_PHONE_NUMBER);if(e?.value){if(a=Se.RP_PHONE_NUMBER,r=await ma({visitorId:t,authenticated:!1,phoneNumber:e}),!r)return}else if(s?.value)a=Se.NON_OTP_VERIFIED_PHONE,r=await ma({visitorId:t,authenticated:!1,phoneNumber:s});else if(c?.value){if(a=Se.RP_PHONE_NUMBER,r=await ma({visitorId:t,authenticated:!1,phoneNumber:c}),!r)return}else if(i===Se.NO_OTP_FLOW_PHONE_NUMBER){if(_?.value||_a(o?.value,o?.country_code),r=await ma({visitorId:t,authenticated:n,phoneNumber:o}),!r)return}else if(_?.value&&(a=Se.NO_OTP_FLOW_PHONE_NUMBER,r=await ma({visitorId:t,authenticated:!1,phoneNumber:_}),!r))return}}}}}}}if(r&&r?.phoneNumber&&r?.phoneNumber?.value){const e=""+r.phoneNumber.value,n=r?.phoneNumber?.country_code;Ji(r),Pi.sendCustomEvent(Qt.fingerprinting,{visitor_id:t,authenticated:r?.authenticated,phone_number:e,country_code:n,fp_tags:"UPDATE_VISITOR_MAPPINGS",fp_action:a,fp_found_page:sessionStorage.getItem(te.VISITOR_ID_SOURCE)||"NA",fp_context_id:s||"NA"}),la({visitorId:t,fpPhone:r.phoneNumber,authenticated:r?.authenticated})}else{const{status:e,body:n={}}=await zi(t);pr(e)&&!n?.error&&pa(t,n,"FETCHED_VISITOR_INFO",Se.backend)}}(e?.data);else if("handle_email_login_via_marketing_popup"===e.data.type){if(!1===await tn())return;await async function(e,t){try{const n=qa(te.KP_REQUEST_ID),o={"Content-Type":"application/json",accept:"application/json",[ae]:rs.mid||t,[re]:rs.mid||t,[ce]:n||ke,[_e]:n||ke},i=e?.fieldData&&JSON.parse(e.fieldData);let a={email:e.email,popupId:e.popupId};return Object.keys(Le).map((e=>{let t=Le[e];i[t]&&(t===Le.DOB&&(a.dateOfBirth=i?.[t]),t===Le.GENDER&&(a.gender=i?.[t]),t===Le.PROFESSION&&(a.profession=i?.[t]),t===Le.NAME&&(a.name=i?.[t]),t===Le.PHONE&&(a.phone=i?.[t]?.value,a.country_code=i?.[t]?.country_code))})),await as.post(Vt.createCustomerWithEmailPopup,{},a,o)}catch(e){return ds(e)}}({email:e?.data?.email||"",popupId:e?.data?.popupId||"",fieldData:e?.data?.customFieldValues?e?.data?.customFieldValues:""},h.mid),Bi({category:gr(e?.data?.modalType),action:$t.mp_email_logged_in,label:qt.kp_mp_email_logged_in,email:e?.data?.email,...en(e?.data?.popupId),property_2:Yt.login_strategy,value_2:Jt.EMAIL}),Ke=setTimeout((()=>{clearTimeout(Ke);const e=new CustomEvent("close_popup");window.dispatchEvent(e)}),e?.data?.modalType===Zt?nt:rt)}else if("kp_token"===e.data.type){rr(he,e?.data?.isCoreTokenValid?"verified":"unverified");const t=e?.data?.modalType;let n=qa(te.SHOPIFY_REDIRECT_LINK);er(de,pe),e.data.token&&er(Da(),e.data.token),e.data.core_token&&er(Ua(),e.data.core_token),Sr(`${e?.data?.phoneNumber?.country_code}|${e?.data?.phoneNumber?.value}`),e.data.couponCode&&za("coupon_applied",e.data.couponCode,2),sessionStorage.setItem("isLogout",!1),e?.data?.platformType===z.CUSTOM&&e?.data?.modalType!=Zt?await As({fieldData:e?.data?.customFieldValues,mid:h.mid,redirectURL:"/"}):e?.data?.customFieldValues?await(async({fieldData:e="",mid:t,redirectURL:n})=>{const o=JSON.parse(e);let i={};Object.keys(Le).map((e=>{let t=Le[e];o[t]&&(t===Le.EMAIL&&(i.email=o?.[t]),t===Le.DOB&&(i.dateOfBirth=o?.[t]),t===Le.GENDER&&(i.gender=o?.[t]),t===Le.PROFESSION&&(i.profession=o?.[t]),t===Le.NAME&&(i.name=o?.[t]),t===Le.PHONE&&(i.phone=o?.[t]))}));try{const e=await async function({mid:e,body:t,gkToken:n}){try{const o=qa(te.KP_REQUEST_ID);let i=Xa(Da())||n;if(!i&&(i=await ks(e,Vt.createShopifySession),!i))return{status:401,message:x.serverError};let a=window.location.pathname;a.includes("/account")&&(a="/");const r={"Content-Type":"application/json",[re]:e,[se]:i,[ce]:ss||o,[_e]:o},s=JSON.parse($a(oe.kp_notification_checked)),c="string"==typeof ir()?JSON.parse(ir()):ir();let _={...t,...c&&{tags:c}};return _.redirectUrl=a,null!==s&&(_.isMarketingEventSubscribed=s),await as.post(Vt.createShopifySessionWithMetaData,{},_,r)}catch(e){return ds(e,!0)}}({mid:t,redirectUrl:n,body:i});return e}catch(e){return null}})({fieldData:e?.data?.customFieldValues,mid:h.mid,redirectURL:"/"}):(localStorage.removeItem("needsToUpdatePhone"),localStorage.removeItem(te.KP_EMAIL),localStorage.removeItem(te.KP_MULTIPLE_EMAIL),localStorage.removeItem("kp_customer_id"),localStorage.removeItem("kp_customer_state"),tr(te.unverified_phone_number),d&&await Tr(null,e.data.user_type));const o=new CustomEvent("update-dom");window.dispatchEvent(o);const i=ar("login_from")||Oe;if(i&&i!==Oe){const t=await $r(),n=new CustomEvent("user-loggedin",{detail:{token:e.data.core_token,login_type:"manual",email:t,from:i}});window.dispatchEvent(n)}else{const t=new CustomEvent("user-loggedin",{detail:{token:e.data.core_token,kpToken:e?.data?.kpToken,login_type:"manual",from:i}});window.dispatchEvent(t)}if(t!==Zt||d||(n="/customer_authentication/login?return_to=/"),null!=n||Pe?.toLowerCase()===Q.CUSTOM_SHOPIFY&&null===Xa(te.KP_TOKEN))if(window.location.pathname.includes(W)&&!V.some((e=>window.location.pathname.includes(e)))&&nr(ie.SHOW_LOADING_SCREEN),t===Zt)if(d){const e=new CustomEvent(p,{detail:{redirectUrl:n||void 0,isManualLoginEnable:!0}});window.dispatchEvent(e)}else window.location.href=n;else{const e=new CustomEvent("close_popup",{detail:{isShopifyRedirectLink:n,isCustomShopifyMerchantWithKpToken:Pe?.toLowerCase()===Q.CUSTOM_SHOPIFY}});window.dispatchEvent(e)}else e?.data?.discount_source!==Ne.cred&&(Ke=setTimeout((()=>{const e=new CustomEvent("close_popup");window.dispatchEvent(e)}),t===Zt?nt:rt));const a=Xa(te.SHOPIFY_SESSION_KEY),r=await $r();null===r&&gs(window.merchantInfo.mid,a),Bi({value:e?.data?.phoneNumber?.value,country_code:e?.data?.phoneNumber?.country_code,...r&&{mail:r},analyticEvent:e?.data?.analyticEvent,modalType:t}),l?.status&&Jr(l.merchant,window.merchantInfo.mid),ns(),da(),ga(Xa)}else if("kf_token"===e.data.type)await(async e=>{if(rr(he,e?.data?.isCoreTokenValid?"verified":"unverified"),e.data.token&&er(Da(),e.data.token),e.data.core_token&&er(Ua(),e.data.core_token),Sr(`${e?.data?.phoneNumber?.country_code}|${e?.data?.phoneNumber?.value}`),sessionStorage.setItem("isLogout",!1),e.data.token&&e.data.core_token){sessionStorage.removeItem("isShopifySession"),await Tr(null,J.EXISTING,!1,!0);const e=new CustomEvent("update-dom");window.dispatchEvent(e)}const t=new CustomEvent("user-loggedin",{detail:{token:e.data.core_token,kpToken:e?.data?.kpToken,login_type:"manual",from:Je}});window.dispatchEvent(t)})(e);else if(e.data.type===ie.EXPIRED_TOKEN_PHONE_NUMBER){const t=Or(te.EXPIRED_PH_NO);t?.value!==e.data[te.EXPIRED_PH_NO]?.value&&ra(e.data[te.EXPIRED_PH_NO])}else if(e.data.type===Xt.KP_SSO_TOKEN_FOR_CUSTOM_MERCHANT){const t=$a(we.KP_MERCHANT_CONFIG);if(t&&!1===JSON.parse(t)?.kwikpassEnabled)return;const o=e?.data?.core_token,i=e?.data?.isCoreTokenValid;rr(he,i?"verified":"unverified");const a=e.data.whatsappToken,r=await $r(ue);if(a||Bi({category:Wt.sso_login,action:$t.logged_in,label:qt.kwikpass_sso_logged_in,property:e?.data?.gkLoginSource||Za(),value:e?.data?.phoneNumber?.value,country_code:e?.data?.phoneNumber?.country_code,mail:r,analyticEvent:zt.EVENTS.KWIKPASS_SSO_LOGGED_IN}),o&&!i)return void handleLogout();let s=e?.data?.phoneNumber;er(de,pe),er(Ua(),e.data.core_token),Sr(`${s?.country_code}|${s?.value}`),Fe=!1,sessionStorage.setItem("disable_auto_login_popup",1);let c=e?.data?.token;if(c)er(Da(),c);else{const e=await Is(window.merchantInfo.mid,o);c=e?.body?.data?.token,c&&er(Da(),c)}Ba("coupon_applied");const _=new CustomEvent("user-loggedin",{detail:{token:e.data.core_token,"gk-access-token":c,login_type:a?"manual":"sso"}});window.dispatchEvent(_),sessionStorage.setItem("isLogout",!1),localStorage.removeItem(te.KP_EMAIL),a||er(te.IS_SSO_LOGIN,!0);const u=new CustomEvent("update-dom");if(window.dispatchEvent(u),a)try{n(33,be=e?.data?.kpPopupSource),n(34,Re=e?.data?.kpPopupId);const t=await ps(window.merchantInfo.mid);null!=t&&(t.kwikpassEnabled?(nr(ie.API_KEY_SUCCESS),M&&(_t.set(t.popupBreakpoint||defaultPopupBreakpoint),n(26,ze=!1),n(4,He=!1),n(10,We=!0),n(19,C=!0),n(7,je=!0),Ke=setTimeout((()=>{const e=new CustomEvent("close_popup");window.dispatchEvent(e)}),nt)),Ls()):nr(ie.KWIKPASS_DISABLED))}catch(e){nr(ie.GET_MERCHANT_CONFIG_SERVER_ERROR)}l?.status&&Jr(l.merchant,window.merchantInfo.mid),ns()}else if(e.data.type===ie.CHECK_CORE_TOKEN){const t=e?.data?.is_core_token;t||(Fe=!1)}else if("kp_sso_token"===e.data.type){const t=$a(we.KP_MERCHANT_CONFIG);if(t&&!1===JSON.parse(t)?.kwikpassEnabled)return;const o=e?.data?.isCoreTokenValid;rr(he,o?"verified":"unverified");const i=e?.data?.core_token,a=e.data?.whatsappToken;if(i&&!o)return void handleLogout();const r=qa(te.SHOPIFY_REDIRECT_LINK);e?.data?.gkLoginSource&&er(de,e?.data?.gkLoginSource);const s=await $r(ue);a||Bi({category:Wt.sso_login,action:$t.logged_in,label:qt.kwikpass_sso_logged_in,property:e?.data?.gkLoginSource||Za(),value:e?.data?.phoneNumber?.value,country_code:e?.data?.phoneNumber?.country_code,mail:s,analyticEvent:zt.EVENTS.KWIKPASS_SSO_LOGGED_IN}),er(Ua(),e.data.core_token),e?.data?.phoneNumber?.value&&Sr(`${e.data.phoneNumber?.country_code}|${e.data.phoneNumber?.value}`),Fe=!1,sessionStorage.setItem("disable_auto_login_popup",1),n(25,B=e?.data?.phoneNumber);const c=e?.data?.token;if(c)er(Da(),c);else{const e=await Is(window.merchantInfo.mid,i);e?.body?.data?.token&&er(Da(),e.body.data.token)}Ba("coupon_applied");let _=e.data.showSuccessScreenInAutoLoadPopUp;if(Pe?.toLowerCase()===Q.PLUGIN){const e=new CustomEvent("kp_add_to_cart");window.dispatchEvent(e)}sessionStorage.setItem("isLogout",!1),localStorage.removeItem("needsToUpdatePhone"),localStorage.removeItem(te.KP_EMAIL),localStorage.removeItem(te.KP_MULTIPLE_EMAIL),localStorage.removeItem("kp_customer_id"),localStorage.removeItem("kp_customer_state"),a?await Tr(null,e.data.user_type,!0):(er(te.IS_SSO_LOGIN,!0),await vr(e?.data?.phoneNumber,e?.data?.user_type));const u=new CustomEvent("update-dom");window.dispatchEvent(u);let d={token:e.data.core_token,login_type:a?"manual":"sso",from:Oe};a&&(d={...d,user_identified:!0,phone_number:!0,email:!!await $r(ue)});const p=new CustomEvent("user-loggedin",{detail:d});if(window.dispatchEvent(p),a)try{n(33,be=e?.data?.kpPopupSource),n(34,Re=e?.data?.kpPopupId);const t=await $r(),o=Ya(G);Bi({category:_?gr(o):Wt.login_modal,action:$t.logged_in,label:qt.whatsapp_logged_in,property:Yt.phone_number,mail:t,value:e?.data?.phoneNumber?.value,country_code:e?.data?.phoneNumber?.country_code,analyticEvent:zt.EVENTS.WHATSAPP_LOGGED_IN,..._&&en(Ja(ve))});const i=await ps(window.merchantInfo.mid);if(i.kwikpassEnabled){if(n(26,ze=!1),n(4,He=!1),_t.set(i?.popupBreakpoint||defaultPopupBreakpoint),_){const e=Ja(ve);await Gt(e)}else nr(ie.API_KEY_SUCCESS);_?(n(10,We=!1),n(36,Ce=null),n(5,Ge=!0)):(n(36,Ce=null),n(10,We=!0)),n(7,je=!0),n(19,C=!0),null!=r?(window.location.pathname.includes(W)&&!V.some((e=>window.location.pathname.includes(e)))&&nr(ie.SHOW_LOADING_SCREEN),Ye=setTimeout((()=>{const e=new CustomEvent("close_popup",{detail:{isShopifyRedirectLink:r}});window.dispatchEvent(e)}),3e3)):Ke=setTimeout((()=>{const e=new CustomEvent("close_popup");window.dispatchEvent(e)}),!0===Ge?rt:nt)}else nr(ie.KWIKPASS_DISABLED)}catch(e){nr(ie.GET_MERCHANT_CONFIG_SERVER_ERROR)}l?.status&&Jr(l.merchant,window.merchantInfo.mid),ns()}else if(e.data.type===ie.KC_PHONE_NUMBER)na(e);else if("close_popup"===t){const t=e?.data?.detail;if(t?.isUserCreatedForCustomMerchant){rr(he,fe),Qa("isUserCreated",!0);const e=t?.merchantData,n=new CustomEvent("user_loggedin_merchant",{detail:e});window.dispatchEvent(n),t?.merchantData?.email&&await Wr(t?.merchantData?.email)}clearTimeout(Ye),clearTimeout(Ke),sessionStorage.setItem("shown_wb",0),sessionStorage.setItem("disable_auto_login_popup",1),rr(ee.IS_POPUP_OPENED,!1),n(7,je=!1),Va();const o=Or(te.KP_NON_OTP_VERIFIED_USER);!ar(Ee)&&o?.value&&ca(o),window.location.pathname!==W&&window.location.pathname!==$||(window.history.length>1?window.history.back():zr("/"))}else if("set-new-number"===e.data.type)sessionStorage.setItem("kp-login-no",e.data.data.phoneNumber);else if("kp_truecaller_login"===e.data.type){const t=e?.data?.modalType??"";an()&&function(e,t=Zt){window.location=function(e){return`truecallersdk://truesdk/web_verify?type=btmsheet&requestNonce=${e}&partnerKey=cTB1q06d014cab37b45be9fd61b819d18ea1d&partnerName=kwikpass-prod-truecaller&lang=en&privacyUrl=https://www.gokwik.co/data-policy&termsUrl=https://www.gokwik.co/terms&loginSuffix=verifymobile&&ctaPrefix=continuewith&btnShape=rect&skipOption=useanothermethod`}(e),setTimeout((async function(){if(document.hasFocus()){sessionStorage.setItem("is_truecaller_not_installed",1),Ze.set(!1),n(21,D=!1),et.set(o.filter((e=>"trueCaller"!==e))),document.getElementById("iframe-kp").contentWindow.postMessage({type:"truecaller_not_found",error:x.truecallerNotInstalled},"https://pdp.gokwik.co");const e=await $r(ue);Bi({category:t==Zt?Wt.login_modal:gr(t),action:$t.error,label:qt.true_caller_not_installed,mail:e,analyticEvent:zt.EVENTS.TRUECALLER_NOT_INSTALLED,...t!=Zt&&en(Ja(ve))})}else on(e,t,Ja(ve))}),1e3)}(e.data.request_id,e?.data?.modalType);const i=await $r(ue);Bi({category:t==Zt?Wt.login_modal:gr(t),action:$t.click,mail:i,label:qt.true_caller_button_clicked,analyticEvent:zt.EVENTS.TRUECALLER_BUTTON_CLICKED,...t!=Zt&&en(Ja(ve))})}else if("truecaller_error"===e.data.type){const t=document.getElementById("truecaller-login");t&&(t.style.display="none"),sessionStorage.setItem("is_truecaller_not_installed",1),Ze.set(!1),et.set(o.filter((e=>"trueCaller"!==e))),n(21,D=!1),document.getElementById("iframe-kp").contentWindow.postMessage({type:"truecaller_error",error:e.data.error},"https://pdp.gokwik.co")}else if("whatsapp_not_installed"===e.data.type)sessionStorage.setItem("is_whatsapp_not_installed",1),Xe.set(!1),n(20,U=!1),et.set(o.filter((e=>"whatsApp"!==e)));else if("open-url"===e.data.type)window.open(e.data.url,"_blank","noopener, noreferrer");else if(e.data.type===Xt.OPEN_URL_SAME_TAB)zr(e.data.url);else if(e.data.type===jt){const t=await $r(ue);Bi({...e.data.context,mail:t})}else if("add_to_cart"===e.data.type)Pe?.toLowerCase()===Q.PLUGIN&&await vt();else if("user_verified_by_otp"===e.data.type&&e?.data?.kwikPass){if(!1===await tn())return;const t=e?.data?.userData?.phoneNumber,n=e?.data?.userData?.core_token;if(!n)return;rr(he,fe),rr(Ee,!0);const o=Or();let i;if(t==o?.value){if(n){const e=await Is(window.merchantInfo.mid,n);i=e?.body?.data?.token,i&&er(Da(),i)}}else{if(er(Ua(),n),Sr(`${Ie}|${t}`),tr(Da()),sessionStorage.removeItem("isShopifySession"),n){const e=await Is(window.merchantInfo.mid,n);i=e?.body?.data?.token,i&&er(Da(),i);const t=new CustomEvent("user-loggedin",{detail:{token:n,login_type:"sso",user_identified:!0,phone_number:!0,email:!1,from:Oe}});window.dispatchEvent(t)}da()}const a=await $r(ue);if(Bi({category:Wt.sso_login,action:$t.logged_in,label:qt.checkout_sso_logged_in,property:Yt.phone_number,value:t,country_code:Ie,mail:a,analyticEvent:zt.EVENTS.CHECKOUT_SSO_LOGGED_IN}),n&&i){await Tr(null,J.EXISTING,!1,!0);const e=new CustomEvent("update-dom");window.dispatchEvent(e)}}else if("guest_user_added_address"===e.data.type&&e?.data?.kwikPass){if(!1===await tn())return;const t=Xa(Ua());rr(he,"unverified"),rr(Ee,!1);const n=e?.data?.userData?.phoneNumber;if(Bi({category:Wt.non_auth_user_identified,action:$t.automated,label:qt.non_auth_user_identified_with_guest_phone_number,property:Yt.phone_number,value:n,country_code:Ie,analyticEvent:zt.EVENTS.NON_AUTH_USER_IDENTIFIED_WITH_GUEST_PHONE_NUMBER}),t){tr(Ua()),Sr(`${Ie}|${e?.data?.userData?.phoneNumber}`,te.unverified_phone_number);const t=new CustomEvent("update-dom");return void window.dispatchEvent(t)}const o=Or();n!==o?.value&&(Sr(`${Ie}|${e?.data?.userData?.phoneNumber}`),tr(Da()),sessionStorage.removeItem("isShopifySession"))}else if("close"===e.data.type&&e?.data?.kwikPass){if(!1===await tn())return;const e=sessionStorage.getItem("isLogout"),t=Xa(Ua());"true"!==e||t?Pt():openIframe("kp_checkout_close")}else if("kp_checkout_close"===e.data.type)Tt(e.data,!0);else if("order_create_success"===e.data){if(!1===await tn())return;const e=sessionStorage.getItem("isLogout"),t=Xa(Ua());"true"!==e||t||openIframe("kp_order_success")}else if("kp_order_success"===e.data.type)Tt(e.data);else if("kp_set_coupon_code"===e.data.type)!0===ne?Ba("coupon_applied"):za("coupon_applied",e.data.couponCode,2);else if(e.data.type===oe.kp_notification_checked)za(oe.kp_notification_checked,JSON.stringify(e.data.isChecked),2);else if("kp_auto_read_otp"===e.data.type)rn();else if(e.data.type===Xt.REDIRECT_INTERN_USER)rr(ee.IS_INTERNATIONAL_USER,!0),zr(e.data.body.redirectURL??"/account",!0);else if(t===Xt.CHECKOUT_ORDER_SUCCESS){if(!1===await tn())return;const t=e.data?.response.email,n=getCustomerId(),o=ar(he)===fe;if(!n&&o&&await $r()!==t){const e=t;localStorage.removeItem(te.KP_EMAIL),localStorage.removeItem(te.KP_MULTIPLE_EMAIL),localStorage.removeItem("kp_customer_id"),localStorage.removeItem("kp_customer_state"),sessionStorage.removeItem(ee.KP_CUSTOMER_EMAIL_DATA_ERROR),sessionStorage.removeItem(ee.KP_CUSTOMER_EMAIL_DATA_MANUAL_LOGIN),Tr(e,J.EXISTING)}}else t===Xt.CLOSE_POPUP_NO_OTP_LOGIN?Ke=setTimeout((()=>{const e=new CustomEvent("close_popup");window.dispatchEvent(e)}),rt):"kp-logout"===t?(n(13,v=1),handleLogout("",{},!0)):async function(e){if(e?.data?.type===Xt.KP_ANALYTICS_EVENT){const t=Or(),{emailValue:n}=e?.data?.body;if(e?.data?.eventName===zt.PROVIDERS.POPCLUB){const e=Xa(te.SHOPIFY_SESSION_KEY);gs(window.merchantInfo.mid,e,n)}ws(window.merchantInfo.mid,t,n)}else if(e?.data?.type===Xt.KP_HANDLE_MULTIPASS_FOR_NEW_USER){if(_s?.toLowerCase()===Q.CUSTOM_SHOPIFY){e?.data?.kpToken&&er(te.KP_TOKEN,e.data.kpToken);const t=new CustomEvent("kp_data_sent",{detail:{kpToken:e?.data?.kpToken,success:!0,error:"",kpLogout:!1}});window.dispatchEvent(t);const n=new CustomEvent("close_popup");window.dispatchEvent(n)}else e?.data?.multipassLink&&zr(e?.data?.multipassLink);sessionStorage.setItem("isShopifySession",!0)}else if(e?.data?.type===Xt.KP_HANDLE_NEW_USER_WITH_PASSWORD){const t=Or(),{email:n,password:o,shopify_customer_id:i,account_activation_url:a,redirectUrl:r=window.location.pathname,kpToken:s,customerAccessToken:c,expiresAt:_,token:u=null}=e.data.body,l=sessionStorage.getItem("isCustomAccountPage");if(l&&c&&_&&Sa(c,u,_),_s?.toLowerCase()===Q.CUSTOM_SHOPIFY){s&&er(te.KP_TOKEN,s);const e=new CustomEvent("kp_data_sent",{detail:{kpToken:s,success:!!s,error:"",kpLogout:!1}});window.dispatchEvent(e);const t=new CustomEvent("close_popup");window.dispatchEvent(t)}else{if(ys(window.merchantInfo.mid,i),l){zr(r);const e=new CustomEvent("close_popup");window.dispatchEvent(e)}else await Ga({email:n,password:o,account_activation_url:a,shopify_customer_id:i},r);const e=new CustomEvent(jt,{detail:{category:Wt.shopify_login_modal,action:$t.logged_in,label:qt.shopify_logged_in,property:Yt.non_plus_user,value:t?.value,country_code:t?.country_code,mail:n,analyticEvent:zt.EVENTS.SHOPPIFY_LOGGED_IN}});window.dispatchEvent(e)}await Wr(n),ws(window.merchantInfo.mid,t,n)}else if(e?.data?.type===Xt.KP_HANDLE_OLD_USER_WITH_PASSWORD){const{email:t,password:n,shopify_customer_id:o,account_activation_url:i,multipass:a,redirectUrl:r=window.location.pathname,kpToken:s,couponAutoApplyOnlyForNewUser:c,customerAccessToken:_,expiresAt:u,token:l=null}=e?.data?.body,d=Or(),p=sessionStorage.getItem("isCustomAccountPage");if(p&&_&&u&&Sa(_,l,u),c&&Ba("coupon_applied"),_s?.toLowerCase()===Q.CUSTOM_SHOPIFY){s&&er(te.KP_TOKEN,s);const e=new CustomEvent("kp_data_sent",{detail:{kpToken:s,success:!!s,error:"",kpLogout:!1}});window.dispatchEvent(e)}else{ys(window.merchantInfo.mid,o),p?zr(r):await Ga({email:t,password:n,account_activation_url:i,shopify_customer_id:o,multipass:a,isRetry:!1},r);const e=new CustomEvent(jt,{detail:{category:Wt.shopify_login_modal,action:$t.click,label:qt.password_submitted,property:Yt.phone_number,value:d?.value,country_code:d?.country_code,mail:t,analyticEvent:zt.EVENTS.PASSWORD_SUBMITTED}});window.dispatchEvent(e);const s=new CustomEvent(jt,{detail:{category:Wt.shopify_login_modal,action:$t.logged_in,label:qt.shopify_logged_in,value:d?.value,country_code:d?.country_code,mail:t,analyticEvent:zt.EVENTS.SHOPPIFY_LOGGED_IN}});window.dispatchEvent(s)}await Wr(t),localStorage.removeItem(te.KP_MULTIPLE_EMAIL),ws(window.merchantInfo.mid,d,t);const m=new CustomEvent("close_popup");window.dispatchEvent(m)}}(e)}e.data.type===ie.SR_PHONE_NUMBER?sa(e):e.data.type===ie.RP_PHONE_NUMBER?ia(e):e.data.type===ie.NON_OTP_VERIFIED_PHONE?ca(e?.data?.kp_non_otp_verified_user):e.data.type===ie.NO_OTP_FLOW_PHONE_NUMBER?_a(e?.data[te.NO_OTP_FLOW_PHONE_NUMBER],e?.data?.country_code):e.data.type===oe.kp_non_otp_verified_phone||(e.data.type===ie.SHOPIFY_COD_UNAUTH_PHONE_NUMBER?aa(e):e.data.type===Xt.IDB_TOKEN_FOUND&&(Xa(te.IDB_PH_NO)||oa(e.data?.payload)))})),window.addEventListener("close_popup",(function(e){sessionStorage.setItem("shown_wb",0),e?.detail?.on_navigation?n(7,je=!1):(sessionStorage.setItem("disable_auto_login_popup",1),n(7,je=!1),Va(),e?.detail?.isCustomShopifyMerchantWithKpToken&&br(),null!=e?.detail?.isShopifyRedirectLink&&(It=setTimeout((()=>{handleShopifyLogin(null,e?.detail?.isShopifyRedirectLink)}),500)),rr(ee.IS_POPUP_OPENED,!1))})),window.addEventListener("open_login_modal",(async e=>{const t=ar(Z);if(fr()){if(!yt||ut||lt||dt)return window.location.pathname===W||window.location.pathname===$?void 0:void zr("/account");if(ts(),!M&&t&&n(22,M=t),M){let t=M?.tags;er(te.SHOPIFY_API_TAGS,JSON.stringify(t||null)),er(te.SHOPIFY_API_TAGS_LOGIN_MODAL,JSON.stringify(t||null)),e?.detail?.showPage?(n(13,v=e?.detail?.showPage),n(26,ze=!0),n(38,Ue=JSON.parse($a(oe.kp_notification_checked)))):(e?.detail?.params?.from?n(16,Je=e?.detail?.params?.from):(n(16,Je=Oe),nr(Xt.KP_MODAL_OPENED)),rr("login_from",Je)),ft.set(e?.detail?.customLogin?K:F),n(11,P="header"),n(29,ge=qa(te.KP_REQUEST_ID)),n(8,k=Xa("gokwik-userId")),n(9,N=Xa("gokwik-sessionID")),wr(window.location.href),n(36,Ce=null),n(10,We=!0),n(7,je=!0),n(5,Ge=!1),n(19,C=!1),n(15,b=e?.detail?.discount),n(17,R=e?.detail?.couponCode),n(18,A=e?.detail?.name||s);const o=await $r(ue);n(27,le={country_code:Ie,value:Xa(te.KC_PHONE,ue)}),Bi({category:Wt.login_modal,action:$t.click,label:qt.open_login_modal,analyticEvent:zt.EVENTS.OPEN_LOGIN_MODAL,mail:o}),null!=e?.detail?.redirectLink&&(Qa(te.SHOPIFY_REDIRECT_LINK,e?.detail?.redirectLink),n(4,He=!1)),e?.detail?.isEmailRequired&&(er(te.IS_EMAIL_REQUIRED,e?.detail?.isEmailRequired),n(4,He=!0)),xa()}}})),window.addEventListener("kp-sso-custom-shopify-login",(async e=>{if(Pe?.toLowerCase()===Q.CUSTOM_SHOPIFY||Pe?.toLowerCase()===Q.CUSTOM_HEADLESS){let t;if(e?.detail?.sso_login){const{body:e={},status:n}=await async function(e){try{let t=Xa(Da()),n=Xa(ce);if(!t)return{status:401,message:x.serverError};const o={"Content-Type":"application/json",[re]:e,[se]:t,[ce]:n,[_e]:qa(te.KP_REQUEST_ID)};return await Ks.get(Vt.login.generateCustomKpToken,{},{},o)}catch(e){return function(e){let t=null;if(t=e?.response?.data?.error?.message?e.response.data.error.message:e?.response?.data?.error,500===e?.response?.status)throw e;if(t)return{status:e.response.status,message:t};throw e}(e)}}(window.merchantInfo.mid),{data:o}=e;t=pr(n)?o.kpToken:null}else t=null;const n=new CustomEvent("user-loggedin",{detail:{kpToken:t}});window.dispatchEvent(n)}})),window.addEventListener("open_email_input_modal_for_custom_merchant",(e=>{if(!yt||ut||lt||dt)return window.location.pathname===W||window.location.pathname===$?void 0:void(window.location.href="/account");n(13,v=3),n(26,ze=!0),n(4,He=!1),n(38,Ue=JSON.parse($a(oe.kp_notification_checked))),ft.set(e?.detail?.customLogin?K:F),n(8,k=Xa("gokwik-userId")),n(9,N=Xa("gokwik-sessionID")),wr(window.location.href),n(29,ge=qa(te.KP_REQUEST_ID)),n(36,Ce=null),n(10,We=!0),n(7,je=!0),n(5,Ge=!1),n(19,C=!1),n(18,A=e?.detail?.name||s),xa()})),window.addEventListener("open_kf_modal",(async e=>{if(i||!_?.includes("kwikform"))return;const t=await async function(e){try{const t=qa(te.KP_REQUEST_ID),n={accept:"application/json",[re]:e,[_e]:t||ke};return await as.get(`${Vt.getKfAssetsPropertiesUrl}/${e}`,{},{},n)}catch(e){return ds(e)}}(window.merchantInfo.mid),{body:o,status:a}=t;pr(a)&&e?.detail?.show&&(n(29,ge=qa(te.KP_REQUEST_ID)),n(36,Ce=o?.data?.components?.LEAD_GENE_POPUP),n(36,Ce.consentState=c,Ce),n(5,Ge=!1),n(10,We=!1),n(7,je=!0))})),window.addEventListener(Xt.KP_HANDLE_ACCOUNT_BUTTON_CLICK_FOR_CUSTOM_MERCHANT,(async()=>{const e=await Ls();e?.isSuccess&&(Ke=setTimeout((()=>{const e=new CustomEvent("close_popup");window.dispatchEvent(e),clearTimeout(Ke),Ke=null}),nt))})),window.addEventListener("open_login_autoload",(async e=>{if(!fr())return;if((ar(ee.TRIGGERED_LOGIN_POPUPS_PAGE_URL)||[]).some((e=>dr(e,window.location.href))))return void n(5,Ge=!1);if("19g6il4y1bh06"===window?.merchantInfo?.mid&&document.querySelector(".is--opend-drawer")&&document.querySelector(".t4s-lock-scroll"))return void n(5,Ge=!1);ts();const t=e?.detail?.autoloadPopupId;if(Et.set(t),er(te.AUTOLOAD_POPUP_ID,t),await Gt(t),yt&&!ut&&!lt&&!dt)if(n(8,k=Xa("gokwik-userId")),n(9,N=sessionStorage.getItem("gokwik-sessionID")),n(10,We=!1),G){n(36,Ce=null),n(7,je=!0),n(5,Ge=!0),n(19,C=!1),n(18,A=s);const e=await $r(ue);n(27,le={country_code:Ie,value:Xa(te.KC_PHONE,ue)}),n(29,ge=qa(te.KP_REQUEST_ID)),nr(Xt.KP_MODAL_OPENED);let o=r?.login_strategy;Bi({category:gr(Ya(G)),action:$t.click,label:qt.open_login_autoload,analyticEvent:zt.EVENTS.OPEN_LOGIN_AUTOLOAD,mail:e,...en(Ja(t)),property_2:Yt.login_strategy,value_2:Jt[o]||Jt.OTP})}else n(7,je=!1)})),window.addEventListener("shopify-session",(async e=>{try{(()=>{const e=document.getElementById(j);e&&Ra&&e.parentNode.replaceChild(Ra,e)})();const t="true"===Xa(te.IS_SSO_LOGIN),o=mr(Xa(Ua()));if(t){if(a?.authRequired)return void nr("open_auto_login_modal",{detail:{reason:Yt.email_or_shopify_customerId_not_available}});let t=ar(ee.KP_CUSTOMER_EMAIL_DATA_ERROR);const i=ar(ee.KP_CUSTOMER_EMAIL_DATA);if(!t&&i||!o||await vr(o),n(14,qe="/account"),it.set(qe),ar(ee.KP_CUSTOMER_EMAIL_DATA_MANUAL_LOGIN))nr("open_auto_login_modal",{detail:{reason:Yt.manual_shopify_login}});else if(t=ar(ee.KP_CUSTOMER_EMAIL_DATA_ERROR),t)"429"!==t&&"490"!==t||(nr("close_auto_login_modal"),sr());else{let{redirectUrl:t="/account",isManualLoginEnable:n=!0}=e.detail||{};const i=$a("coupon_applied");null!==i&&t.includes("/checkout")&&(t+="?discount="+i),Nt&&(t="/account"===t?q:t),it.set(t);const a=$a(we.CUSTOMER_ACCESS_TOKEN);if(Nt&&a)zr(t);else if(null===getCustomerId()){const e=await $r(ue),i=localStorage.getItem("kp_customer_id"),a=localStorage.getItem("kp_customer_state");if(i&&ys(window.merchantInfo.mid,i),e){const r=Xa(te.SHOPIFY_API_TAGS),{status:s,body:c={}}=await Ss({email:e,mid:window.merchantInfo.mid,id:i,redirectUrl:t,state:a,shopify_tags:r});pr(s)?(Ft.set({authRequired:c?.data?.authRequired,email:c?.data?.email}),Bi({value:o?.value,mail:e,analyticEvent:zt.EVENTS.SHOPPIFY_LOGGED_IN}),Nt?c?.data?.customerAccessToken&&c?.data?.expiresAt&&!c?.data?.authRequired?(Sa(c.data.customerAccessToken,c?.data?.token,c.data.expiresAt),zr(t)):nr("open_auto_login_modal",{detail:{reason:Yt.email_or_shopify_customerId_not_available}}):await Ga(c.data,t,n)):n?429===s||490===s?sr():nr("open_auto_login_modal",{detail:{reason:Yt.error_in_shopify_login_data_api}}):zr(t)}else n?nr("open_auto_login_modal",{detail:{reason:Yt.email_or_shopify_customerId_not_available}}):zr(t)}else{const e=Or(),n=await $r(ue);Bi({category:Wt.logged_in_page,action:$t.automated,label:qt.redirected_to_account_page,property:Yt.phone_number,value:e?.value,country_code:e?.country_code,mail:n,analyticEvent:zt.EVENTS.REDIRECTED_TO_ACCOUNT_PAGE}),zr(t)}}}else{const t=ar(ee.KP_CUSTOMER_EMAIL_DATA);let n=ar(Y);if(!n&&t||!o?!n&&Nt&&!$a(we.CUSTOMER_ACCESS_TOKEN)&&t&&await Tr(null):await Tr(null),n=ar(Y),n)"429"!==n&&"490"!==n||(nr("close_auto_login_modal"),sr());else{let{redirectUrl:t="/account",isManualLoginEnable:n=!0}=e.detail||{};const o=$a("coupon_applied");if(null!==o&&t.includes("/checkout")&&(t+="?discount="+o),Nt)t="/account"===t?q:t,it.set(t),$a(we.CUSTOMER_ACCESS_TOKEN)?zr(t):nr("open_auto_login_modal",{detail:{reason:Yt.email_or_shopify_customerId_not_available}});else if(it.set(t),null===getCustomerId()){const e=await $r(ue),o=localStorage.getItem("kp_customer_id"),i=localStorage.getItem("kp_customer_state");if(e&&o){const a=Xa(te.SHOPIFY_API_TAGS_LOGIN_MODAL),{status:r,body:s={}}=await ms(e,window.merchantInfo.mid,o,t,i,a);pr(r)?await Ga(s.data,t,n):n?429===r||490===r?sr():nr("open_auto_login_modal",{detail:{reason:Yt.error_in_shopify_login_data_api}}):zr(t)}else n?nr("open_auto_login_modal",{detail:{reason:Yt.email_or_shopify_customerId_not_available}}):zr(t)}else{const e=Or(),n=await $r(ue);Bi({category:Wt.logged_in_page,action:$t.automated,label:qt.redirected_to_account_page,property:Yt.phone_number,value:e?.value,country_code:e?.country_code,mail:n,analyticEvent:zt.EVENTS.REDIRECTED_TO_ACCOUNT_PAGE}),zr(t)}}}}catch(e){sr()}})),window.addEventListener(p,(async e=>{try{if(!fr())return;const t=ar(ee.KP_CUSTOMER_EMAIL_DATA);let n=ar(Y);if(!n&&t||await Tr(null),n=ar(Y),n){if(429===n){const e=new CustomEvent("close_popup");window.dispatchEvent(e)}}else{let{redirectUrl:t="/account",isManualLoginEnable:n=!0}=e.detail||{};const o=$a("coupon_applied");if(null!==o&&t.includes("/checkout")&&(t+="?discount="+o),Nt)t="/account"===t?q:t,it.set(t),$a(we.CUSTOMER_ACCESS_TOKEN)?zr(t):nr(m,{detail:{reason:Yt.error_in_shopify_login_data_api}});else if(it.set(t),null===getCustomerId()){const e=await $r(ue),o=localStorage.getItem("kp_customer_id"),i=localStorage.getItem("kp_customer_state");if(e&&o){const a=Xa(te.SHOPIFY_API_TAGS_LOGIN_MODAL),{status:r,body:s={}}=await ms(e,window.merchantInfo.mid,o,t,i,a);if(200===r||201===r)await Ga(s.data,t,n);else if(n)if(429===r||490===r){const e=new CustomEvent("close_popup");window.dispatchEvent(e)}else nr(m,{detail:{reason:Yt.error_in_shopify_login_data_api}});else zr(t)}else n?nr(m,{detail:{reason:Yt.email_or_shopify_customerId_not_available}}):zr(t)}else{const e=Or(),n=await $r(ue);Bi({category:Wt.logged_in_page,action:$t.automated,label:qt.redirected_to_account_page,property:Yt.phone_number,value:e?.value,country_code:e?.country_code,mail:n,analyticEvent:zt.EVENTS.REDIRECTED_TO_ACCOUNT_PAGE}),zr(t)}}}catch(e){const t=new CustomEvent("close_popup");window.dispatchEvent(t)}})),window.addEventListener(m,(async function(e){if(nr(ie.HIDE_LOADING_SCREEN),sessionStorage.setItem("shown_wb",0),sessionStorage.setItem("disable_auto_login_popup",1),null===getCustomerId()&&i){const t=await jr();document.getElementById("iframe-kp")?.contentWindow.postMessage({type:f,kwikFormProperties:null,showLogin:!0,isShowShopifyLoginLoader:!1,autoloadLogin:!1,loginscreenPage:3,redirectUrl:qe,isShopifyLoginNeeded:!0,shopifyCustomerId:localStorage.getItem("kp_customer_id"),notificationIsChecked:JSON.parse($a(oe.kp_notification_checked)),kpMultipleEmail:t,kpRequestId:Xa(te.KP_REQUEST_ID),isCustomAccountPageEnabled:Nt},"https://pdp.gokwik.co");const n=Or(),o=await $r(ue);Bi({category:Wt.shopify_login_modal,action:$t.automated,label:qt.open_shopify_login_modal,property:e?.detail?.reason,value:n?.value,country_code:n?.country_code,mail:o,analyticEvent:zt.EVENTS.OPEN_SHOPIFY_LOGIN_MODAL})}})),window.addEventListener(jt,(async e=>{const t=await $r(ue);Bi({...e.detail,mail:t})})),window.addEventListener("kp_add_to_cart",(async e=>{await vt()})),window.addEventListener("open_auto_login_modal",(async e=>{const t=await $r(ue);if(n(2,Me=await jr()),!fr())return;if(!yt||ut||lt||dt)return void zr("/account");ts(),n(36,Ce=null),n(10,We=!0),n(13,v=3),n(26,ze=!0),n(4,He=!1),n(5,Ge=!1),n(6,Be=!0),n(38,Ue=JSON.parse($a(oe.kp_notification_checked))),n(28,me=localStorage.getItem("kp_customer_id")),n(7,je=!0),nr(ie.HIDE_LOADING_SCREEN);const o=Or();n(29,ge=qa(te.KP_REQUEST_ID)),Bi({category:Wt.shopify_login_modal,action:$t.click,label:qt.open_shopify_login_modal,property:e?.detail?.reason,value:o?.value,country_code:o?.country_code,mail:t,analyticEvent:zt.EVENTS.OPEN_SHOPIFY_LOGIN_MODAL}),xa()})),window.addEventListener("close_auto_login_modal",(()=>{n(7,je=!1),Va()})),window.addEventListener(ie.GET_MERCHANT_CONFIG_SERVER_ERROR,(()=>{ut=!0})),window.addEventListener(ie.KWIKPASS_DISABLED,(()=>{yt=!1})),window.addEventListener(ie.SHOW_LOADING_SCREEN,(()=>{!yt||ut||lt||dt||n(37,gt=!0)})),window.addEventListener(ie.HIDE_LOADING_SCREEN,(()=>{n(37,gt=!1)})),window.addEventListener(ie.API_KEY_ERROR,(()=>{})),window.addEventListener(Xt.POP_FLOATER,hr),window.addEventListener(Xt.CUSTOM_PAGE_VIEW,(e=>{Pi.trackPageViewEvent(e?.detail)})),window.addEventListener("kp_sync_monitor",(e=>{Ut.update((e=>({...e,initSPcalls:!0}))),Yr()})),ga(Xa)})),nn=()=>{window.removeEventListener("mousemove",Ht),window.removeEventListener("keydown",Ht),window.removeEventListener("click",Ht),window.removeEventListener("scroll",Ht),clearTimeout(L),clearTimeout(Ke),clearTimeout(It),clearTimeout(Ye)},y().$$.on_destroy.push(nn),y().$$.after_update.push((()=>{je?xa():Va()}));const on=(e,t="LOGIN_MODAL",n)=>{document.getElementById("iframe-kp")?.contentWindow.postMessage({type:"fetch_truecaller_userdata",id:e,modalType:t,autoloadPopupId:n},"https://pdp.gokwik.co")},an=()=>{const e=window.navigator.userAgent;let t=/Android/.test(e);return["crios","insta","wv","facebook","fb","FBAN","FBAV","FB_IAB","Firefox","GSA","UCBrowser","Jasmine","OPR","Opera Mobi","OPT"].forEach((n=>{e.includes(n)&&(t=!1)})),t},rn=async()=>{if("OTPCredential"in window){const e=new AbortController;navigator.credentials.get({otp:{transport:["sms"]},signal:e.signal}).then((t=>{(e=>{const t=document.getElementById("iframe-kp");t&&t.contentWindow.postMessage(e,"https://pdp.gokwik.co")})({type:"kp_prefill_otp",data:t.code}),e.abort()})).catch((t=>{e.abort()}))}};return e.$$set=e=>{"merchantInfo"in e&&n(0,h=e.merchantInfo),"token"in e&&n(1,E=e.token)},[h,E,Me,O,He,Ge,Be,je,k,N,We,P,T,v,qe,b,Je,R,A,C,U,D,M,H,G,B,ze,le,me,ge,Pe,Qe,ve,be,Re,Ae,Ce,gt,Ue,St,kt,Nt,De,w,g,S,!1,void 0,void 0,[]]}async function Bs(){try{const e=await Es({mid:window.merchantInfo.mid});return e?.body}catch(e){return null}}async function xs(){try{const e=await async function({mid:e=window.merchantInfo.mid}){try{const t=$a(te.KP_REQUEST_ID),n=Xa(Da()),o={accept:"application/json",[re]:e,[_e]:t||ke,[ce]:ss||t||ke,[se]:n};return await as.get(""+Vt.getCustomerIntelligence,{},{},o)}catch(e){return ds(e)}}({mid:window.merchantInfo.mid});return e?.body}catch(e){return null}}Mt.subscribe((e=>{})),$e.subscribe((e=>e));const Vs=e=>{if(!window.__cartMonitorPatched__){window.__cartMonitorPatched__=!0;try{const t=["/cart/add","/cart/change","/cart/update","/cart/clear"],n=e=>t.some((t=>e.includes(t))),o=window.fetch;window.fetch=async function(...t){const[i,a]=t,r="string"==typeof i?i:i?.url??"",s=(a?.method??"GET").toUpperCase();if(n(r)&&["POST","GET"].includes(s)){const n=await o.apply(this,t);return n.clone().json().catch((()=>{})).finally(e),n}return o.apply(this,t)};const i=XMLHttpRequest.prototype.open,a=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.open=function(e,t,...o){return this._isCartMutation=["POST","GET"].includes(e.toUpperCase())&&n(t),i.call(this,e,t,...o)},XMLHttpRequest.prototype.send=function(t){return this._isCartMutation&&this.addEventListener("load",e,{once:!0}),a.call(this,t)}}catch(e){}}};let js=null,Ws=[];const $s=e=>{const t=window.location.search;return new URLSearchParams(t).get(e)},qs=e=>{let t=ar(ee.KP_MARKETING_POPUP_INFO)||{};const n=t?t?.globalLimit:null;if(n&&(t?.timesPopupOpened||0)>=n)return;const o=new CustomEvent("open_login_autoload",{detail:{autoloadPopupId:e}});window.dispatchEvent(o),t.timesPopupOpened=t?.timesPopupOpened?+t?.timesPopupOpened+1:1,rr(ee.KP_MARKETING_POPUP_INFO,t),sessionStorage.setItem(ee.IS_POPUP_OPENED,!0)},Ys=e=>{const t=["false",!1].includes(sessionStorage.getItem("isLogout")),n=Xa(Ua());return!(document.getElementById("gokwik-iframe")||!e?.showToLoggedinUser?.isEnabled&&(t||n))},Js=e=>{const t=window.location.href;e&&(Ws=ar(ee.TRIGGERED_MAKETING_POPUPS)||[],Ws.push({triggeredPageURLS:t,id:e}),rr(ee.TRIGGERED_MAKETING_POPUPS,Ws))},zs=e=>{const{pages:t,id:n}=e,o=window.location.href,i=window.location.pathname,a=t?.toShowOnCustomUrls;if(t?.customUrls&&t.customUrls.some((e=>o.includes(e)&&!1===a)))return!1;let r=ar(ee.TRIGGERED_MAKETING_POPUPS)||[];return!(!(o.includes(t?.collection_path||"/collections")&&1==t.collection||o.includes(t?.pdp_path||"/products")&&1==t.pdp||"/"==i&&1==t.home||t?.customUrls&&t.customUrls.some((e=>o.includes(e))))||r.some((e=>e?.id===n&&dr(e?.triggeredPageURLS,o))))},Qs=e=>{const{id:t,triggerValidations:n}=e;let o=ar(ee.TRIGGERED_MAKETING_POPUPS)||[];return!(o?.filter((e=>e.id===t))?.length>=(n?.popupAppearLimit?.attempt||1))},Xs=e=>{if(!e?.isEnabled)return!0;const{conditions:t}=e;return t?.some((e=>"exact"===e.type&&$s(e.param)===e.key||"contains"===e.type&&$s(e.param)?.includes(e.key)))},Zs=e=>{if(!e?.isEnabled)return!0;const{conditions:t}=e;for(const e of t){let t=$a(e?.key);return"is_present"===e?.type&&$a(e?.key)||"is_not_present"===e?.type&&!$a(e?.key)||"matches"===e?.type&&t===e?.value||"not_match"===e?.type&&t!==e?.value?"show"===e?.status:"show"!==e?.status}},ec=(e,t)=>{let n=!1;const{userTargeting:o}=e;if(!o?.merchantOrderCount?.isEnabled)return!0;if(null===t)return!1;const i=o?.merchantOrderCount?.count,a=o?.merchantOrderCount?.condition;switch(a){case"equal":n=t===i;break;case"greater_than":n=t>i;break;case"less_than":n=t<i}return n},tc=(e,t)=>{let n=!1;if(!e?.isEnabled)return!0;let o=Pr();switch(o=t===ve?o?.kp_count:o?.m_count||1,e?.condition){case"equal":n=+o===e?.count;break;case"greater_than":n=+o>e?.count;break;case"less_than":n=+o<e?.count}return n};async function nc(){const e=await fetch("/cart.js");return await e.json()}async function oc(e,t,n){const o=await nc(),i=o?.item_count;let a=!1;switch(t){case"equal":a=e===i;break;case"greater_than":a=e<i;break;case"less_than":a=e>i}a&&(Js(n),qs(n))}async function ic(e,t,n,o){const i=await nc(),a=i?.currency;if(a!==t)return;const r=+(i?.total_price?i?.total_price/100:i?.total_price)?.toFixed(2);let s=!1;switch(n){case"equal":s=e===r;break;case"greater_than":s=e<r;break;case"less_than":s=e>r}s&&(Js(o),qs(o))}const ac={timeSpent:"Time spent on website (seconds)",pageVisitNo:"Number of pages visited",visitUrl:"Visit URL",clickBased:"Click-based (HTML attribute)",productId:"Product ID",variantId:"Variant ID"},rc={equals:"=",not_equals:"!=",greater_than:">",less_than:"<",greater_than_or_equal:">=",less_than_or_equal:"<=",contains:"IN",does_not_contain:"NOT IN",like:"LIKE",not_like:"NOT LIKE",wildcard:"*",regular_expression:"regex"},sc=()=>{try{const e=ar(ee.USER_VISITED_PAGES)||[];return Array.isArray(e)?e:[]}catch(e){return[]}},cc=async e=>{const t=await hs();(t?.customEvents?.filter((e=>"CUSTOM"===e.type))||[]).filter((t=>t?.conditions?.some((t=>t?.field===ac[e])))).forEach(_c)},_c=(e,t=!1)=>{const n=structuredClone(e).conditions.map(((e,n)=>{if(e.field===ac.timeSpent){const t=((e,t)=>{const n=1e3*+e,o=_(Ht),i=Date.now()-o;return t===rc.greater_than?i>n:t===rc.less_than?i<n:t===rc.equals?i===n:t===rc.not_equals?i!==n:void 0})(e.value,e.operator);return{...e,feasibility:t}}if(e.field===ac.clickBased)return{...e,feasibility:t};if(e.field===ac.pageVisitNo){const t=((e,t)=>{let n=+e;const o=sc().length;return t==rc.equals?o===n:t===rc.greater_than?o>n:t===rc.less_than?o<n:t!==rc.not_equals?o!==n:void 0})(e.value,e.operator);return{...e,feasibility:t}}if(e.field===ac.visitUrl){const t=((e,t)=>{const n=window.location.href;let o=e;return t===rc.wildcard||(t===rc.contains?n.includes(o):t===rc.does_not_contain?!n.includes(o):t===rc.equals?o===n:void 0)})(e.value,e.operator);return{...e,feasibility:t}}if(e.field===ac.productId){const t=((e,t)=>{if(t!==rc.contains)return!1;try{const t=new Set(Array.isArray(e)?e:[e]),n=Ln()?.product_id;if(!n)return!1;const o=(()=>{const e=qa(te.META_CUSTOM_EVENTS_CSV_DATA);if(e){const t="string"==typeof e?JSON.parse(e):e;if(t&&t.productIds&&Array.isArray(t.productIds))return new Set(t.productIds)}return new Set})(),i=t.has(n),a=o.has(n);return i||a}catch(e){return!1}})(e.value,e.operator);return{...e,feasibility:t}}if(e.field===ac.variantId){const t=((e,t)=>{if(t!==rc.contains)return!1;try{const t=new Set(Array.isArray(e)?e:[e]),n=Ln()?.variant_id;if(!n)return!1;const o=(()=>{const e=qa(te.META_CUSTOM_EVENTS_CSV_DATA);if(e){const t="string"==typeof e?JSON.parse(e):e;if(t&&t.variantIds&&Array.isArray(t.variantIds))return new Set(t.variantIds)}return new Set})(),i=t.has(n),a=o.has(n);return i||a}catch(e){return!1}})(e.value,e.operator);return{...e,feasibility:t}}return e}));uc(e.name,n)},uc=(e,t)=>{(function(e){return!(!e||0===e.length)&&e.reduce(((e,t,n)=>0===n?t.feasibility:"AND"===t.logic?e&&t.feasibility:e||t.feasibility),e[0].feasibility)})(t)&&xi(e,null,0,0,0,!0)};window.addEventListener("fire_custom_meta_event",(async e=>{let t=e?.detail?.eventName;const n=await hs(),o=n?.customEvents?.filter((e=>"CUSTOM"===e.type));let i=o.filter((e=>e?.conditions?.some((e=>e?.field==ac.clickBased)))),a=i?.find((e=>e?.name===t));a&&_c(a,!0)}));let lc=!0,dc=null;const{SHOPIFY:pc}=z,mc=async(e,t)=>{try{const n=await ps(window.merchantInfo.mid);n?.thirdPartyServiceProviders?.map((e=>{"popclub"===e.name&&e.category===Pe.LOGIN_PARTNER&&tt.set(!0),e.name===Ne.cred&&bt.set(!0)}));const o=n?.marketingPopupGlobalLimit||1;let i=ar(ee.KP_MARKETING_POPUP_INFO)||{};if(i.globalLimit=o,rr(ee.KP_MARKETING_POPUP_INFO,i),!n)return;_(Ve)?.toLowerCase()===Q.CUSTOM_SHOPIFY&&(window.getThemeId=()=>161793409314,window.getCustomerId=()=>null);const{thirdPartyServiceProviders:a,kwikpassEnabled:r,isLogoutBtnDisabled:s,popupBreakpoint:c,name:u,platform:l=pc,integrationType:d="plugin",customerIntelligenceEnabled:p,customerIntelligenceMetrics:m,kpRequestId:f,customerAccountsVersion:h,isPagePingEnabled:E,pagePingConfig:w,isCustomAccountPageEnabled:g,kpFeatures:y,consentState:I}=n;if(lc=r,!lc)return void nr(ie.KWIKPASS_DISABLED);{(()=>{const e=Xa(Ua(window.merchantInfo.environment)),t=sessionStorage.getItem("isLogout"),n=Xa("notify_phone_number");!e&&!t||e&&!n||openIframe()})(),E&&rr(ee.IS_PAGE_PING_ENABLED,w),rt.set(a||[]),_t.set(c||"1240px"),ot.set(u),s&&(()=>{const e=document.getElementById("logout-button-desktop"),t=document.getElementById("logout-button-mobile");e&&(e.style.display="none"),t&&(t.style.display="none")})(),nr(ie.API_KEY_SUCCESS,{detail:{isAccountPage:e,token:t}});const n=await(async()=>{try{const e=await async function({mid:e,platform:t,isEnabled:n}){try{const o={accept:"application/json",[re]:e},i={platform:t,isEnabled:n};return await as.get(""+Vt.getAllAutoloadConfigList,i,{},o)}catch(e){return ds(e)}}({mid:window.merchantInfo.mid,isEnabled:!0,platform:Er()}),t=e?.body?.data;return t}catch(e){return nr(ie.GET_AUTOLOAD_CONFIG_SERVER_ERROR),!1}})();(async e=>{if(!e)return;let t=null;e?.some((e=>e?.userTargeting?.merchantOrderCount?.isEnabled))&&(t=await(async()=>{if(!Xa(Ua()))return 0;try{const e=await async function(e){try{const t=qa(te.KP_REQUEST_ID);let n=Xa(Da());if(!n&&(n=await ks(e,Vt.updateCustomer),!n))return{status:401,message:x.serverError};const o={accept:"application/json",[re]:e,[se]:n,[ce]:t||ke};return await as.get(Vt.orderCount,{},{},o)}catch(e){return ds(e)}}(window.merchantInfo.mid);if(pr(e?.status)){const t=e?.body?.data?.ordersCount;return t}}catch(e){return null}})());const n=e?.filter((e=>e.rules?.timeDelay?.isEnabled&&zs(e))).sort(((e,t)=>e>e.rules.timeDelay.secondsAfterLanding-t.rules.timeDelay.secondsAfterLanding))[0];n&&zs(n)&&ec(n,t)&&(e=>{const{rules:t,id:n,triggerValidations:o,userTargeting:i}=e;js=setTimeout((()=>{(null===ar(ee.IS_POPUP_OPENED)||!ar(ee.IS_POPUP_OPENED))&&Qs(e)&&Ys(o)&&Zs(i?.cookie)&&Xs(i?.utm)&&tc(i?.visitsMerchant,be)&&tc(i?.visitsKpNetwork,ve)&&(Js(n),qs(n)),clearTimeout(js)}),1e3*+t?.timeDelay?.secondsAfterLanding)})(n),e?.forEach((e=>{zs(e)&&(Qs(e)&&Ys(e?.triggerValidations)&&Xs(e?.userTargeting?.utm)&&Zs(e?.userTargeting?.cookie)&&ec(e,t)&&(e.rules?.pageScrolls?.isEnabled&&(e=>{const{rules:t,id:n,triggerValidations:o,userTargeting:i}=e;if(t?.pageScrolls?.scrollPercentage){const a=yr((()=>{(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0)/((document.documentElement.scrollHeight||document.body.scrollHeight)-(document.documentElement.clientHeight||window.innerHeight))*100>=t?.pageScrolls?.scrollPercentage&&(null===ar(ee.IS_POPUP_OPENED)||!ar(ee.IS_POPUP_OPENED))&&Qs(e)&&Ys(o)&&Zs(i?.cookie)&&Xs(i?.utm)&&tc(i?.visitsMerchant,be)&&tc(i?.visitsKpNetwork,ve)&&(qs(n),Js(n),window.removeEventListener("scroll",a))}),500);window.addEventListener("scroll",a)}})(e),e.rules?.websiteExitIntent?.isEnabled&&(e=>{const{id:t,triggerValidations:n,userTargeting:o}=e,i=yr((a=>{a.clientY<35&&((null===ar(ee.IS_POPUP_OPENED)||!ar(ee.IS_POPUP_OPENED))&&Qs(e)&&Ys(n)&&Zs(o?.cookie)&&Xs(o?.utm)&&tc(o?.visitsMerchant,be)&&tc(o?.visitsKpNetwork,ve)&&(qs(t),Js(t)),window.removeEventListener("mousemove",i))}),300);window.addEventListener("mousemove",i)})(e),e.rules?.pagesVisited?.isEnabled&&e.rules?.pagesVisited?.condition&&e.rules?.pagesVisited?.pages&&(e=>{const{id:t,rules:n,triggerValidations:o,userTargeting:i}=e;let a=ar(ee.USER_VISITED_PAGES),r=!1;switch(n?.pagesVisited?.condition){case"equal":r=a?.length>=n?.pagesVisited?.pages;case"greater_than":r=a?.length>n?.pagesVisited?.pages;break;case"less_than":r=a?.length<n?.pagesVisited?.pages}(null===ar(ee.IS_POPUP_OPENED)||!ar(ee.IS_POPUP_OPENED))&&r&&Qs(e)&&Ys(o)&&Zs(i?.cookie)&&Xs(i?.utm)&&tc(i?.visitsMerchant,be)&&tc(i?.visitsKpNetwork,ve)&&(Js(t),qs(t))})(e),e.rules?.cartItems?.isEnabled&&e.rules?.cartItems?.count&&e.rules?.cartItems?.condition&&async function(e){const{id:t,rules:n,triggerValidations:o,userTargeting:i}=e,a=n?.cartItems?.count,r=n?.cartItems?.condition;(null===ar(ee.IS_POPUP_OPENED)||!ar(ee.IS_POPUP_OPENED))&&Qs(e)&&Ys(o)&&Zs(i?.cookie)&&Xs(i?.utm)&&tc(i?.visitsMerchant,be)&&tc(i?.visitsKpNetwork,ve)&&(await oc(a,r,t),Vs((async()=>{await oc(a,r,t)})))}(e),e.rules?.cartValue?.isEnabled&&e.rules?.cartValue?.condition&&function(e){const{id:t,rules:n,triggerValidations:o,userTargeting:i}=e,a=n?.cartValue?.amount,r=n?.cartValue?.condition,s=n?.cartValue?.currency;(null===ar(ee.IS_POPUP_OPENED)||!ar(ee.IS_POPUP_OPENED))&&Qs(e)&&Ys(o)&&Zs(i?.cookie)&&Xs(i?.utm)&&tc(i?.visitsMerchant,be)&&tc(i?.visitsKpNetwork,ve)&&(ic(a,s,r,t),Vs((async()=>{ic(a,s,r,t)})))}(e)),e.rules?.clickTrigger?.isEnabled&&(e=>{const{id:t,rules:n,triggerValidations:o}=e,i=n?.clickTrigger?.target&&n?.clickTrigger?.type&&document.querySelector("id"===n?.clickTrigger?.type?"#":"."+n.clickTrigger.target);i&&i.addEventListener("click",(()=>{Ys(o)&&qs(t)}))})(e))}))})(n),_(Ve)?.toLowerCase()===Q.CUSTOM_SHOPIFY&&(window.__KP_LOGIN_SDK_INSTANCE__={handleKpLogin:Rr}),p&&m&&Ct.update((e=>({...e,status:p,...m}))),f&&Qa(_e,f),y&&Bt.set(y),function(){try{const e=$a(we.KP_MERCHANT_CONFIG);if(!e)return!1;const t=JSON.parse(e),n=t?.isCustomAccountPageEnabled||!1;return!n||Ia?.toLowerCase()!==Q.PLUGIN&&"PLUGIN"!==window.merchantInfo?.integrationType||(Kt.set(n),sessionStorage.setItem("isCustomAccountPage",!0)),n}catch(e){return!1}}()}return"classic"===h||_(Ve)?.toLowerCase()!==Q.PLUGIN.toLowerCase()||g||(Dt.set(!1),(async()=>{let e=getCustomerId();if(!e){const t=await Ha();e=t?.ok}const t=ar("isLogout");let n=document.getElementById("loggedin-icons");const o=document.getElementById("kwikpass-drawer-desktop"),i=document.getElementById("icon-close-kwikpass"),a=document.getElementById("icon-kwikpass");(!e&&t||!e)&&n?.addEventListener("click",(e=>{e.stopPropagation(),i&&i.remove(),a&&(a.style.display="flex"),o&&o.remove(),window.location.href="/account"}))})()),xt.set(I),!0}catch(e){return nr(ie.GET_MERCHANT_CONFIG_SERVER_ERROR),!1}},fc=async()=>{if(window.merchantInfo&&handleKpPlatformAndIntegrationType&&(handleKpPlatformAndIntegrationType(),Ve.set(window.merchantInfo.integrationType),xe.set(window.merchantInfo.gkPlatform)),"undefined"==typeof structuredClone&&(window.structuredClone=function e(t,n=new WeakMap){if(null===t||"object"!=typeof t)return t;if(n.has(t))return n.get(t);let o;if(t instanceof Date)o=new Date(t.getTime());else if(Array.isArray(t)){o=[],n.set(t,o);for(let i=0;i<t.length;i++)o[i]=e(t[i],n)}else if(t instanceof Map){o=new Map,n.set(t,o);for(const[i,a]of t.entries())o.set(e(i,n),e(a,n))}else if(t instanceof Set){o=new Set,n.set(t,o);for(const i of t.values())o.add(e(i,n))}else if(ArrayBuffer.isView(t))o=new t.constructor(t);else if(t instanceof ArrayBuffer)o=t.slice(0);else{o={},n.set(t,o);for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(o[i]=e(t[i],n))}return o}),(()=>{const e=navigator.userAgent.toLowerCase();return!!/bot|spider|crawler|googlebot|baiduspider|petalbot|coccocbot|fetcher|userproxy|brightedge/.test(e)})())return;if(!await(async()=>{if(!window?.merchantInfo?.mid)return!0;try{const e=await async function(e){try{const t=qa(te.KP_REQUEST_ID),n={accept:"application/json",[ae]:e,[_e]:t,version:"20260220092513972"};return await as.get(Vt.healthCheck,{},{},n)}catch(e){return ds(e)}}(window.merchantInfo.mid);if(200!==e.status){if(403===e.status){const t=new CustomEvent("kp-health",{detail:{status:e?.body?.data?.is_kwikpass_healthy}});return window.dispatchEvent(t),!1}const t=new CustomEvent("kp-health",{detail:{status:!0}});return window.dispatchEvent(t),!0}{const{data:t}=e?.body,n=new CustomEvent("kp-health",{detail:{status:t?.is_kwikpass_healthy}});return window.dispatchEvent(n),t?.is_kwikpass_healthy}}catch(e){return 403!==e?.response?.status}})())return window.kp_health_status=!1,void es();window.kp_health_status=!0;const e=new CustomEvent(ie.KWIKPASS_SCRIPT_INIT);window.dispatchEvent(e),(()=>{const e=ar(ee.USER_VISITED_PAGES)||[];e.includes(window.location.pathname)||(e.push(window.location.pathname),rr(ee.USER_VISITED_PAGES,e))})(),async function(){const e=$a(we.FP_CONTROLS_DATA);if(e){const t=JSON.parse(e);t?.vIdGeneration?.enabled&&!t?.vIdGeneration?.limitReached&&It.set(!0),t?.fpFlowAllowd&&St.set(!0)}else{const t=qa(te.KP_REQUEST_ID),n=window.merchantInfo.mid,o=Er()||"mobile",i={platform:o?.toLowerCase(),"os-type":lr(),browser:Ir()};try{let e=Xa(Da());const o={"Content-Type":"application/json",[re]:n,[_e]:t,[se]:e},{body:a,status:r}=await qi.get(Vt.getFPcontrols,i,{},o);if(pr(r)&&!a.error){const e=a?.data;za(we.FP_CONTROLS_DATA,JSON.stringify(a?.data),void 0,!1,ge),e?.vIdGeneration?.enabled&&!e?.vIdGeneration?.limitReached&&It.set(!0),e.fpFlowAllowd&&St.set(!0)}}catch(e){}}}(),tr(te.KP_NON_OTP_VERIFIED_USER),tr(te.NO_OTP_FLOW_PHONE_NUMBER);const t=On();t?.phoneNumber?.value&&async function(e){try{const t=window?.merchantInfo?.mid;if(!Ke.includes(t))return;if($a("s2s_state")||!t)return;const n={[ae]:t,[re]:t},o=await as.post(Vt.s2sEvent,{},{phoneNumber:e},n);return za("s2s_state","true",null,!1,30),o}catch(e){return ds(e)}}(t.phoneNumber.value);let n=Xa(Ua()),o=Xa(Da());n&&!Ur(n)&&(handleLogout(),n=null,o=null),o&&!Ur(o)&&(tr(Da()),o=null),function(){if(!n&&!Or(te.SR_PHONE_NUMBER)?.value){const e=localStorage.setItem;localStorage.setItem=function(t,n){const o=!localStorage.getItem(t);if(e.call(this,t,n),o&&t&&t.endsWith("_user_traits")){const e=JSON.parse(n)?.phone?.replace(Ie,"");if(e){Sr(`${Ie}|${e}`,te.SR_PHONE_NUMBER);const t=new CustomEvent(jt,{detail:{category:Wt.sr_phone_found,action:$t.automated,label:qt.sr_phone_found,value:e,country_code:Ie,property:Yt.sr_phone_number,analyticEvent:zt.EVENTS.NON_AUTH_USER_IDENTIFIED_WITH_SR_PHONE_NUMBER}});window.dispatchEvent(t)}}}}}();const i=(window.location.pathname.includes(W)||window.location.pathname.includes(q))&&!V.some((e=>window.location.pathname.includes(e)));if(n&&!ar(Ee)){const e=await Ns(window.merchantInfo?.mid,o,n,"merchant");let t=e?.body?.data;if(rr(he,t?.coreToken?.sessionType||"unverified"),rr(Ee,t?.coreToken?.isValid),t?.coreToken?.isValid&&t?.coreToken?.jwe&&(t?.coreToken?.jwe&&er(Ua(),t?.coreToken?.jwe),n=t?.coreToken?.jwe),o&&!t?.token?.isValid?(tr(Da()),o=null):t?.token?.jwe&&(er(Da(),t.token.jwe),o=t.token.jwe),!t?.coreToken?.isValid){const e=t.country_code||Ie;return t?.phone&&!t?.coreToken?.isExpired&&Sr(`${e}|${t.phone}`,te.unverified_phone_number),t?.coreToken?.isExpired&&t.phone&&(Sr(`${e}|${t.phone}`,te.EXPIRED_PH_NO),ra(t)),void handleLogout()}openIframe(ie.store_data_from_merchant,{kp_core_token:n,token:o})}Nr();const[a,r]=await Promise.all([mc(i,n),hs()]);if(a){const t=new URLSearchParams(window.location.search).get("kd");if(null!=t&&""!==t.trim()){let e=kr(t);const o=await async function(e,t){try{const n=qa(te.KP_REQUEST_ID),o={[ae]:t,[re]:t,[_e]:n},i={data:e};return await as.post(Vt.decryptPhoneNumber,{},i,o)}catch(e){return ds(e)}}(e,window.merchantInfo.mid),i=o?.body?.data?.phoneNumber;if(pr(o?.status)&&null!=i&&""!==i.trim()&&10===i.length){const e=Xa(te.KC_PHONE);if(!e||null!=e&&""!==e.trim()&&e!==i){er(te.KC_PHONE,i),Lr();const e=new CustomEvent(jt,{detail:{category:Wt.kc_phone_found,action:$t.automated,label:n?qt.kc_phone_found_with_kp_token:qt.kc_phone_found_without_kp_token,value:i,country_code:Ie,property:Yt.kc_phone_number,analyticEvent:zt.EVENTS.KC_PHONE_FOUND_IN_PROMOTIONAL_LINK}});window.dispatchEvent(e)}openIframe(ie.KC_PHONE_NUMBER,i)}}try{da()}catch(e){}document.getElementById("kp-login-button-header-logo")?.addEventListener("click",(()=>{clearTimeout(dc),dc=null,handleKpAndShopifyLogin()}));const o=document.getElementById("kp-login-button-header-logo-mobile");o&&o.addEventListener("click",(()=>{clearTimeout(dc),dc=null,handleKpAndShopifyLogin()})),document.querySelectorAll(".kwik-pass-login").forEach((e=>{e.addEventListener("click",(async e=>{let t=Xa(Ua());(!t||t&&ar(he)!==fe)&&(clearTimeout(dc),dc=null,handleKpAndShopifyLogin())}))}));const i=document.getElementById("icon-kwikpass");i&&i.addEventListener("click",(()=>{const e=Or(),t=new CustomEvent(jt,{detail:{category:Wt.logged_in_page,action:$t.click,label:qt.kwikpass_button_click,property:Yt.user_logged_in,value:e?.value,country_code:e?.country_code,analyticEvent:zt.EVENTS.KWIKPASS_BUTTON_CLICK}});window.dispatchEvent(t)}));const a=document.getElementById("icon-kwikpass-mobile");a&&a.addEventListener("click",(()=>{const e=Or(),t=new CustomEvent(jt,{detail:{category:Wt.logged_in_page,action:$t.click,label:qt.kwikpass_button_click,property:Yt.user_logged_in,value:e?.value,country_code:e?.country_code,analyticEvent:zt.EVENTS.KWIKPASS_BUTTON_CLICK}});window.dispatchEvent(t)}))}else a||es();if(window.getWebPersonalizationData=Bs,window.getCustomerIntelligenceData=xs,!window.kpParamBuilderScriptsLoaded){const e=()=>new Promise((e=>{let t,n;t=setInterval((()=>{window.kpParamBuilderScriptsLoaded&&(clearInterval(t),clearTimeout(n),e())}),100),n=setTimeout((()=>{clearInterval(t),e()}),3e3)}));await e()}await qr(),await async function(){if("19g6ila23ecj7"!==window?.merchantInfo?.mid)return;let e=location.href;const t=()=>{const t=location.href;t!==e&&(xi(ne.kp_visitors),e=t)};(()=>{const e=history.pushState;history.pushState=function(...n){e.apply(this,n),t()};const n=history.replaceState;history.replaceState=function(...e){n.apply(this,e),t()},window.addEventListener("popstate",t)})()}(),await async function(){sc();const e=await hs(),t=e?.customEvents?.filter((e=>"CUSTOM"===e.type))||[],n=Date.now();Ht.set(n),(()=>{if((()=>{const e=null!==new URLSearchParams(window.location.search).get("variant"),t="function"==typeof history.pushState;return e||t})()){let e=new URLSearchParams(window.location.search).get("variant");const t=()=>{const t=new URLSearchParams(window.location.search).get("variant");(t&&t!==e||e&&!t)&&(e=t,cc("variantId"))};window.addEventListener("popstate",t);const n=history.pushState,o=history.replaceState;return history.pushState=function(...e){n.apply(history,e),setTimeout(t,0)},history.replaceState=function(...e){o.apply(history,e),setTimeout(t,0)},window.addEventListener("hashchange",t),void setTimeout(t,100)}const e=document.querySelector("form[action='/cart/add'] input[name='product-id']"),t=document.querySelector("form[action='/cart/add'] input[name='id']"),n=document.querySelectorAll('select[name="id"], input[name="id"]:not([type="hidden"])'),o=document.querySelectorAll('input[name="id"][type="radio"], .variant-option, .product-variant-option');e&&(e.addEventListener("change",(()=>cc("productId"))),e.addEventListener("input",(()=>cc("productId")))),t&&(t.addEventListener("change",(()=>cc("variantId"))),t.addEventListener("input",(()=>cc("variantId")))),n.forEach((e=>{e!==t&&e.addEventListener("change",(()=>cc("variantId")))})),o.forEach((e=>{Array.from(n).includes(e)||e.addEventListener("click",(()=>{setTimeout((()=>cc("variantId")),100)}))}))})(),t?.forEach(((e,t)=>{!async function(e){_c(e);const t=e?.conditions?.some((e=>e.field===ac.timeSpent&&[rc.equal,rc.greater_than].includes(e.operator)));if(t){const t=e.conditions.find((e=>e.field===ac.timeSpent));t&&setTimeout((()=>{_c(e)}),1e3*+t.value)}}(e)}))}(),(()=>{const e=Xa(we.KP_USER_ID),t=JSON.parse(Xa(te.VISITED_NETWORK))||[];if(t&&e&&t?.length>0){const n=t?.filter((t=>t.id===e))[0];if(n?.m_count&&n?.updatedAt){const e=new CustomEvent("kp_visitor_data",{detail:{data:{m_count:n.m_count,last_visited_tstamp:n.updatedAt}}});window.dispatchEvent(e)}}})();const s=$a(we.SHOPIFY_CUSTOMER_TOKEN);s&&(window.kp_customer_id=s,is())},hc=new class extends B{constructor(e){super(),G(this,e,Gs,Hs,a,{merchantInfo:0,token:1},null,[-1,-1,-1,-1])}}({target:document.getElementsByTagName("body")[0],props:{merchantInfo:window.merchantInfo,platform:lr()}});if("loading"!==document.readyState){let e=window.location.pathname;fc(),function(e){const t=history.pushState,n=history.replaceState;function o(){e(window)}history.pushState=function(...e){t.apply(this,e),o()},history.replaceState=function(...e){n.apply(this,e),o()},window.addEventListener("popstate",o),window.addEventListener("hashchange",o)}((function(){const t=window.location.pathname;e!==t&&(fc(),e=t)}))}else document.addEventListener("DOMContentLoaded",(()=>{fc()}),!0);return hc}();
